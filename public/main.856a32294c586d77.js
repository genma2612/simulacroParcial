(self.webpackChunksimulacroParcial=self.webpackChunksimulacroParcial||[]).push([[179],{2011:(ht,oe,V)=>{"use strict";V.d(oe,{Dh:()=>me,GT:()=>ye,cc:()=>Ne,hO:()=>$e,on:()=>K,pX:()=>de,xv:()=>Ee});var d=V(4650),B=V(127),U=V(5813);ht=V.hmd(ht);const ce=["ngOnDestroy"],de=(ve,et,qe,Re={})=>new Proxy(ve,{get:(Se,Me)=>qe.runOutsideAngular(()=>{var Ye;if(ve[Me])return!(null===(Ye=Re?.spy)||void 0===Ye)&&Ye.get&&Re.spy.get(Me,ve[Me]),ve[Me];if(ce.indexOf(Me)>-1)return()=>{};const Qe=et.toPromise().then(Z=>{const _e=Z&&Z[Me];return"function"==typeof _e?_e.bind(Z):_e&&_e.then?_e.then(J=>qe.run(()=>J)):qe.run(()=>_e)});return new Proxy(()=>{},{get:(Z,_e)=>Qe[_e],apply:(Z,_e,J)=>Qe.then(re=>{var ae;const se=re&&re(...J);return!(null===(ae=Re?.spy)||void 0===ae)&&ae.apply&&Re.spy.apply(Me,J,se),se})})})}),ye=(ve,et)=>{et.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(Re=>{Object.defineProperty(ve.prototype,Re,Object.getOwnPropertyDescriptor(qe.prototype||qe,Re))})})};class ue{constructor(et){return et}}const me=new d.OlP("angularfire2.app.options"),Ee=new d.OlP("angularfire2.app.name");function K(ve,et,qe){const Se="object"==typeof qe&&qe||{};Se.name=Se.name||"string"==typeof qe&&qe||"[DEFAULT]";const Ye=B.Z.apps.filter(Qe=>Qe&&Qe.name===Se.name)[0]||et.runOutsideAngular(()=>B.Z.initializeApp(ve,Se));try{JSON.stringify(ve)!==JSON.stringify(Ye.options)&&Y("error",`${Ye.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Ye)}const Y=(ve,...et)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ve](...et)},te={provide:ue,useFactory:K,deps:[me,d.R0b,[new d.FiY,Ee]]};let $e=(()=>{class ve{constructor(qe){B.Z.registerVersion("angularfire",U.q4.full,"core"),B.Z.registerVersion("angularfire",U.q4.full,"app-compat"),B.Z.registerVersion("angular",d.q4F.full,qe.toString())}static initializeApp(qe,Re){return{ngModule:ve,providers:[{provide:me,useValue:qe},{provide:Ee,useValue:Re}]}}}return ve.\u0275fac=function(qe){return new(qe||ve)(d.LFG(d.Lbi))},ve.\u0275mod=d.oAB({type:ve}),ve.\u0275inj=d.cJS({providers:[te]}),ve})();function Ne(ve,et,qe,Re,Se){const[,Me,Ye]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===ve)||[];if(Me)return function xe(ve,et){try{return ve.toString()===et.toString()}catch{return ve===et}}(Se,Ye)||(ge("error",`${et} was already initialized on the ${qe} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Se,was:Ye})),Me;{const Qe=Re();return globalThis.\u0275AngularfireInstanceCache.push([ve,Qe,Se]),Qe}}const ut=!!ht.hot,ge=(ve,...et)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ve](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,oe,V)=>{"use strict";V.d(oe,{q4:()=>wi,iC:()=>Js,fc:()=>ad,HU:()=>nc,vb:()=>Pi,JM:()=>tu});var d=V(4650),B=V(5867),U=V(5861),ce=V(9681),de=V(2090),ye=V(4859),ue=V(1877),me=V(8766);const Ee="@firebase/installations",K="0.5.13",te=`w:${K}`,$e="FIS_v2",et=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qe(T){return T instanceof de.ZR&&T.code.includes("request-failed")}function Re({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Se(T){return{token:T.token,requestStatus:2,expiresIn:re(T.expiresIn),creationTime:Date.now()}}function Me(T,S){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,U.Z)(function*(T,S){const $=(yield S.json()).error;return et.create("request-failed",{requestName:T,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function Qe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Z(T,{refreshToken:S}){const k=Qe(T);return k.append("Authorization",function ae(T){return`${$e} ${T}`}(S)),k}function _e(T){return J.apply(this,arguments)}function J(){return(J=(0,U.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function re(T){return Number(T.replace("s","000"))}function se(T,S){return He.apply(this,arguments)}function He(){return(He=(0,U.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:k}){const $=Re(T),ne=Qe(T),pe=S.getImmediate({optional:!0});if(pe){const Mt=yield pe.getHeartbeatsHeader();Mt&&ne.append("x-firebase-client",Mt)}const Je={method:"POST",headers:ne,body:JSON.stringify({fid:k,authVersion:$e,appId:T.appId,sdkVersion:te})},bt=yield _e(()=>fetch($,Je));if(bt.ok){const Mt=yield bt.json();return{fid:Mt.fid||k,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:Se(Mt.authToken)}}throw yield Me("Create Installation",bt)})).apply(this,arguments)}function Be(T){return new Promise(S=>{setTimeout(S,T)})}const Xt=/^[cdef][\w-]{21}$/;function nt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function nn(T){return function yt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Xt.test(k)?k:""}catch{return""}}function Tn(T){return`${T.appName}!${T.appId}`}const sn=new Map;function Kt(T,S){const k=Tn(T);on(k,S),function Ir(T,S){const k=function Dr(){return!si&&"BroadcastChannel"in self&&(si=new BroadcastChannel("[Firebase] FID Change"),si.onmessage=T=>{on(T.data.key,T.data.fid)}),si}();k&&k.postMessage({key:T,fid:S}),function Nr(){0===sn.size&&si&&(si.close(),si=null)}()}(k,S)}function on(T,S){const k=sn.get(T);if(k)for(const $ of k)$(S)}let si=null;const Qn="firebase-installations-store";let vr=null;function kn(){return vr||(vr=(0,me.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Qn)}})),vr}function Ke(T,S){return zr.apply(this,arguments)}function zr(){return(zr=(0,U.Z)(function*(T,S){const k=Tn(T),ne=(yield kn()).transaction(Qn,"readwrite"),pe=ne.objectStore(Qn),Oe=yield pe.get(k);return yield pe.put(S,k),yield ne.done,(!Oe||Oe.fid!==S.fid)&&Kt(T,S.fid),S})).apply(this,arguments)}function fi(T){return hn.apply(this,arguments)}function hn(){return(hn=(0,U.Z)(function*(T){const S=Tn(T),$=(yield kn()).transaction(Qn,"readwrite");yield $.objectStore(Qn).delete(S),yield $.done})).apply(this,arguments)}function pi(T,S){return Di.apply(this,arguments)}function Di(){return(Di=(0,U.Z)(function*(T,S){const k=Tn(T),ne=(yield kn()).transaction(Qn,"readwrite"),pe=ne.objectStore(Qn),Oe=yield pe.get(k),Je=S(Oe);return void 0===Je?yield pe.delete(k):yield pe.put(Je,k),yield ne.done,Je&&(!Oe||Oe.fid!==Je.fid)&&Kt(T,Je.fid),Je})).apply(this,arguments)}function jn(T){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,U.Z)(function*(T){let S;const k=yield pi(T.appConfig,$=>{const ne=Rn($),pe=wt(T,ne);return S=pe.registrationPromise,pe.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Rn(T){return Pt(T||{fid:nt(),registrationStatus:0})}function wt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(et.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},$=function Ue(T,S){return vn.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:$}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Jn(T)}:{installationEntry:S}}function vn(){return(vn=(0,U.Z)(function*(T,S){try{const k=yield se(T,S);return Ke(T.appConfig,k)}catch(k){throw qe(k)&&409===k.customData.serverCode?yield fi(T.appConfig):yield Ke(T.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Jn(T){return wr.apply(this,arguments)}function wr(){return(wr=(0,U.Z)(function*(T){let S=yield Zr(T.appConfig);for(;1===S.registrationStatus;)yield Be(100),S=yield Zr(T.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:$}=yield jn(T);return $||k}return S})).apply(this,arguments)}function Zr(T){return pi(T,S=>{if(!S)throw et.create("installation-not-found");return Pt(S)})}function Pt(T){return function Or(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function an(T,S){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,U.Z)(function*({appConfig:T,heartbeatServiceProvider:S},k){const $=ln(T,k),ne=Z(T,k),pe=S.getImmediate({optional:!0});if(pe){const Mt=yield pe.getHeartbeatsHeader();Mt&&ne.append("x-firebase-client",Mt)}const Je={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:te,appId:T.appId}})},bt=yield _e(()=>fetch($,Je));if(bt.ok)return Se(yield bt.json());throw yield Me("Generate Auth Token",bt)})).apply(this,arguments)}function ln(T,{fid:S}){return`${Re(T)}/${S}/authTokens:generate`}function ar(T){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,U.Z)(function*(T,S=!1){let k;const $=yield pi(T.appConfig,pe=>{if(!W(pe))throw et.create("not-registered");const Oe=pe.authToken;if(!S&&z(Oe))return pe;if(1===Oe.requestStatus)return k=st(T,S),pe;{if(!navigator.onLine)throw et.create("app-offline");const Je=Ae(pe);return k=Et(T,Je),Je}});return k?yield k:$.authToken})).apply(this,arguments)}function st(T,S){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,U.Z)(function*(T,S){let k=yield lt(T.appConfig);for(;1===k.authToken.requestStatus;)yield Be(100),k=yield lt(T.appConfig);const $=k.authToken;return 0===$.requestStatus?ar(T,S):$})).apply(this,arguments)}function lt(T){return pi(T,S=>{if(!W(S))throw et.create("not-registered");return function le(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Et(T,S){return At.apply(this,arguments)}function At(){return(At=(0,U.Z)(function*(T,S){try{const k=yield an(T,S),$=Object.assign(Object.assign({},S),{authToken:k});return yield Ke(T.appConfig,$),k}catch(k){if(!qe(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const $=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ke(T.appConfig,$)}else yield fi(T.appConfig);throw k}})).apply(this,arguments)}function W(T){return void 0!==T&&2===T.registrationStatus}function z(T){return 2===T.requestStatus&&!function ee(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function Ae(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function vt(){return(vt=(0,U.Z)(function*(T){const S=T,{installationEntry:k,registrationPromise:$}=yield jn(S);return $?$.catch(console.error):ar(S).catch(console.error),k.fid})).apply(this,arguments)}function Hn(){return(Hn=(0,U.Z)(function*(T,S=!1){const k=T;return yield wn(k),(yield ar(k,S)).token})).apply(this,arguments)}function wn(T){return bn.apply(this,arguments)}function bn(){return(bn=(0,U.Z)(function*(T){const{registrationPromise:S}=yield jn(T);S&&(yield S)})).apply(this,arguments)}function zn(T){return et.create("missing-app-config-values",{valueName:T})}const yo="installations",Nn=T=>{const S=T.getProvider("app").getImmediate(),k=function In(T){if(!T||!T.options)throw zn("App Configuration");if(!T.name)throw zn("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!T.options[k])throw zn(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ce._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Es=T=>{const S=T.getProvider("app").getImmediate(),k=(0,ce._getProvider)(S,yo).getImmediate();return{getId:()=>function Ge(T){return vt.apply(this,arguments)}(k),getToken:ne=>function $t(T){return Hn.apply(this,arguments)}(k,ne)}};(function Ra(){(0,ce._registerComponent)(new ye.wA(yo,Nn,"PUBLIC")),(0,ce._registerComponent)(new ye.wA("installations-internal",Es,"PRIVATE"))})(),(0,ce.registerVersion)(Ee,K),(0,ce.registerVersion)(Ee,K,"esm2017");const $i="@firebase/remote-config",rr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qc{constructor(S,k,$,ne){this.client=S,this.storage=k,this.storageCache=$,this.logger=ne}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-k,ne=$<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ne}.`),ne}fetch(S){var k=this;return(0,U.Z)(function*(){const[$,ne]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ne&&k.isCachedDataFresh(S.cacheMaxAgeMillis,$))return ne;S.eTag=ne&&ne.eTag;const pe=yield k.client.fetch(S),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Oe),pe})()}}function Dl(T=navigator){return T.languages&&T.languages[0]||T.language}class Tl{constructor(S,k,$,ne,pe,Oe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=$,this.projectId=ne,this.apiKey=pe,this.appId=Oe}fetch(S){var k=this;return(0,U.Z)(function*(){var $,ne,pe;const[Oe,Je]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ct={sdk_version:k.sdkVersion,app_instance_id:Oe,app_instance_id_token:Je,app_id:k.appId,language_code:Dl()},Kn={method:"POST",headers:Bt,body:JSON.stringify(Ct)},Ur=fetch(Mt,Kn),No=new Promise((ki,Fo)=>{S.signal.addEventListener(()=>{const sp=new Error("The operation was aborted.");sp.name="AbortError",Fo(sp)})});let Xs;try{yield Promise.race([Ur,No]),Xs=yield Ur}catch(ki){let Fo="fetch-client-network";throw"AbortError"===(null===($=ki)||void 0===$?void 0:$.name)&&(Fo="fetch-timeout"),rr.create(Fo,{originalErrorMessage:null===(ne=ki)||void 0===ne?void 0:ne.message})}let Oo=Xs.status;const fa=Xs.headers.get("ETag")||void 0;let eo,sr;if(200===Xs.status){let ki;try{ki=yield Xs.json()}catch(Fo){throw rr.create("fetch-client-parse",{originalErrorMessage:null===(pe=Fo)||void 0===pe?void 0:pe.message})}eo=ki.entries,sr=ki.state}if("INSTANCE_STATE_UNSPECIFIED"===sr?Oo=500:"NO_CHANGE"===sr?Oo=304:("NO_TEMPLATE"===sr||"EMPTY_CONFIG"===sr)&&(eo={}),304!==Oo&&200!==Oo)throw rr.create("fetch-status",{httpStatus:Oo});return{status:Oo,eTag:fa,config:eo}})()}}class ch{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,U.Z)(function*(){const $=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,$)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:$}){var ne=this;return(0,U.Z)(function*(){yield function ur(T,S){return new Promise((k,$)=>{const ne=Math.max(S-Date.now(),0),pe=setTimeout(k,ne);T.addEventListener(()=>{clearTimeout(pe),$(rr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const pe=yield ne.client.fetch(S);return yield ne.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function Lu(T){if(!(T instanceof de.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(pe))throw pe;const Oe={throttleEndTimeMillis:Date.now()+(0,de.$s)($),backoffCount:$+1};return yield ne.storage.setThrottleMetadata(Oe),ne.attemptFetch(S,Oe)}})()}}class vo{constructor(S,k,$,ne,pe){this.app=S,this._client=k,this._storageCache=$,this._storage=ne,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Al(T,S){var k;const $=T.target.error||void 0;return rr.create(S,{originalErrorMessage:$&&(null===(k=$)||void 0===k?void 0:k.message)})}const Is="app_namespace_store";class ph{constructor(S,k,$,ne=function fh(){return new Promise((T,S)=>{var k;try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=ne=>{S(Al(ne,"storage-open"))},$.onsuccess=ne=>{T(ne.target.result)},$.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Is,{keyPath:"compositeKey"})}}catch($){S(rr.create("storage-open",{originalErrorMessage:null===(k=$)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=$,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,U.Z)(function*(){const $=yield k.openDbPromise;return new Promise((ne,pe)=>{var Oe;const bt=$.transaction([Is],"readonly").objectStore(Is),Mt=k.createCompositeKey(S);try{const Bt=bt.get(Mt);Bt.onerror=Ct=>{pe(Al(Ct,"storage-get"))},Bt.onsuccess=Ct=>{const Kn=Ct.target.result;ne(Kn?Kn.value:void 0)}}catch(Bt){pe(rr.create("storage-get",{originalErrorMessage:null===(Oe=Bt)||void 0===Oe?void 0:Oe.message}))}})})()}set(S,k){var $=this;return(0,U.Z)(function*(){const ne=yield $.openDbPromise;return new Promise((pe,Oe)=>{var Je;const Mt=ne.transaction([Is],"readwrite").objectStore(Is),Bt=$.createCompositeKey(S);try{const Ct=Mt.put({compositeKey:Bt,value:k});Ct.onerror=Kn=>{Oe(Al(Kn,"storage-set"))},Ct.onsuccess=()=>{pe()}}catch(Ct){Oe(rr.create("storage-set",{originalErrorMessage:null===(Je=Ct)||void 0===Je?void 0:Je.message}))}})})()}delete(S){var k=this;return(0,U.Z)(function*(){const $=yield k.openDbPromise;return new Promise((ne,pe)=>{var Oe;const bt=$.transaction([Is],"readwrite").objectStore(Is),Mt=k.createCompositeKey(S);try{const Bt=bt.delete(Mt);Bt.onerror=Ct=>{pe(Al(Ct,"storage-delete"))},Bt.onsuccess=()=>{ne()}}catch(Bt){pe(rr.create("storage-delete",{originalErrorMessage:null===(Oe=Bt)||void 0===Oe?void 0:Oe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Vu{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,U.Z)(function*(){const k=S.storage.getLastFetchStatus(),$=S.storage.getLastSuccessfulFetchTimestampMillis(),ne=S.storage.getActiveConfig(),pe=yield k;pe&&(S.lastFetchStatus=pe);const Oe=yield $;Oe&&(S.lastSuccessfulFetchTimestampMillis=Oe);const Je=yield ne;Je&&(S.activeConfig=Je)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Oa(){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,U.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Ds(){(0,ce._registerComponent)(new ye.wA("remote-config",function T(S,{instanceIdentifier:k}){const $=S.getProvider("app").getImmediate(),ne=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw rr.create("registration-window");if(!(0,de.hl)())throw rr.create("indexed-db-unavailable");const{projectId:pe,apiKey:Oe,appId:Je}=$.options;if(!pe)throw rr.create("registration-project-id");if(!Oe)throw rr.create("registration-api-key");if(!Je)throw rr.create("registration-app-id");const bt=new ph(Je,$.name,k=k||"firebase"),Mt=new Vu(bt),Bt=new ue.Yd($i);Bt.logLevel=ue.in.ERROR;const Ct=new Tl(ne,ce.SDK_VERSION,k,pe,Oe,Je),Kn=new ch(Ct,bt),Ur=new Qc(Kn,bt,Mt,Bt),No=new vo($,Ur,Mt,bt,Bt);return function Xn(T){const S=(0,de.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(No),No},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)($i,"0.3.12"),(0,ce.registerVersion)($i,"0.3.12","esm2017")}();const qi="/firebase-messaging-sw.js",as="/firebase-cloud-messaging-push-scope",ls="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zo="google.c.a.c_id",La="google.c.a.c_l",xl="google.c.a.ts",Bu="google.c.a.e";var Wi=(()=>{return(T=Wi||(Wi={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Wi;var T})();function gi(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ui(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(k),ne=new Uint8Array($.length);for(let pe=0;pe<$.length;++pe)ne[pe]=$.charCodeAt(pe);return ne}const bo="fcm_token_details_db",Tr="fcm_token_object_Store";function Jc(T){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,U.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(bo))return null;let S=null;return(yield(0,me.X3)(bo,5,{upgrade:($=(0,U.Z)(function*(ne,pe,Oe,Je){var bt;if(pe<2||!ne.objectStoreNames.contains(Tr))return;const Mt=Je.objectStore(Tr),Bt=yield Mt.index("fcmSenderId").get(T);if(yield Mt.clear(),Bt)if(2===pe){const Ct=Bt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;S={token:Ct.fcmToken,createTime:null!==(bt=Ct.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:gi(Ct.vapidKey)}}}else if(3===pe){const Ct=Bt;S={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:gi(Ct.auth),p256dh:gi(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:gi(Ct.vapidKey)}}}else if(4===pe){const Ct=Bt;S={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:gi(Ct.auth),p256dh:gi(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:gi(Ct.vapidKey)}}}}),function(pe,Oe,Je,bt){return $.apply(this,arguments)})})).close(),yield(0,me.Lj)(bo),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Dn(S)?S:null;var $}),Xc.apply(this,arguments)}function Dn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const mi="firebase-messaging-store";let Lr=null;function Ko(){return Lr||(Lr=(0,me.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(mi)}})),Lr}function us(T){return cs.apply(this,arguments)}function cs(){return(cs=(0,U.Z)(function*(T){const S=Si(T),$=yield(yield Ko()).transaction(mi).objectStore(mi).get(S);if($)return $;{const ne=yield Jc(T.appConfig.senderId);if(ne)return yield rn(T,ne),ne}})).apply(this,arguments)}function rn(T,S){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,U.Z)(function*(T,S){const k=Si(T),ne=(yield Ko()).transaction(mi,"readwrite");return yield ne.objectStore(mi).put(S,k),yield ne.done,S})).apply(this,arguments)}function $s(T){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,U.Z)(function*(T){const S=Si(T),$=(yield Ko()).transaction(mi,"readwrite");yield $.objectStore(mi).delete(S),yield $.done})).apply(this,arguments)}function Si({appConfig:T}){return T.appId}const Gn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rt(T,S){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,U.Z)(function*(T,S){var k;const $=yield Rl(T),ne=ke(S),pe={method:"POST",headers:$,body:JSON.stringify(ne)};let Oe;try{Oe=yield(yield fetch(hs(T.appConfig),pe)).json()}catch(Je){throw Gn.create("token-subscribe-failed",{errorInfo:null===(k=Je)||void 0===k?void 0:k.toString()})}if(Oe.error)throw Gn.create("token-subscribe-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw Gn.create("token-subscribe-no-token");return Oe.token})).apply(this,arguments)}function Hu(T,S){return ds.apply(this,arguments)}function ds(){return(ds=(0,U.Z)(function*(T,S){var k;const $=yield Rl(T),ne=ke(S.subscriptionOptions),pe={method:"PATCH",headers:$,body:JSON.stringify(ne)};let Oe;try{Oe=yield(yield fetch(`${hs(T.appConfig)}/${S.token}`,pe)).json()}catch(Je){throw Gn.create("token-update-failed",{errorInfo:null===(k=Je)||void 0===k?void 0:k.toString()})}if(Oe.error)throw Gn.create("token-update-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw Gn.create("token-update-no-token");return Oe.token})).apply(this,arguments)}function Ha(T,S){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,U.Z)(function*(T,S){var k;const ne={method:"DELETE",headers:yield Rl(T)};try{const Oe=yield(yield fetch(`${hs(T.appConfig)}/${S}`,ne)).json();if(Oe.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:Oe.error.message})}catch(pe){throw Gn.create("token-unsubscribe-failed",{errorInfo:null===(k=pe)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function hs({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Rl(T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,U.Z)(function*({appConfig:T,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function ke({p256dh:T,auth:S,endpoint:k,vapidKey:$}){const ne={web:{endpoint:k,auth:S,p256dh:T}};return $!==ls&&(ne.web.applicationPubKey=$),ne}const Yt=6048e5;function $a(T){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,U.Z)(function*(T){const S=yield Pl(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:gi(S.getKey("auth")),p256dh:gi(S.getKey("p256dh"))},$=yield us(T.firebaseDependencies);if($){if(kl($.subscriptionOptions,k))return Date.now()>=$.createTime+Yt?Co(T,{token:$.token,createTime:Date.now(),subscriptionOptions:k}):$.token;try{yield Ha(T.firebaseDependencies,$.token)}catch(ne){console.warn(ne)}return Jo(T.firebaseDependencies,k)}return Jo(T.firebaseDependencies,k)})).apply(this,arguments)}function On(T){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,U.Z)(function*(T){const S=yield us(T.firebaseDependencies);S&&(yield Ha(T.firebaseDependencies,S.token),yield $s(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Co(T,S){return _i.apply(this,arguments)}function _i(){return(_i=(0,U.Z)(function*(T,S){try{const k=yield Hu(T.firebaseDependencies,S),$=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield rn(T.firebaseDependencies,$),k}catch(k){throw yield On(T),k}})).apply(this,arguments)}function Jo(T,S){return Io.apply(this,arguments)}function Io(){return(Io=(0,U.Z)(function*(T,S){const $={token:yield Rt(T,S),createTime:Date.now(),subscriptionOptions:S};return yield rn(T,$),$.token})).apply(this,arguments)}function Pl(T,S){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,U.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ui(S)})})).apply(this,arguments)}function kl(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Do(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Fn(T,S){if(!S.notification)return;T.notification={};const k=S.notification.title;k&&(T.notification.title=k);const $=S.notification.body;$&&(T.notification.body=$);const ne=S.notification.image;ne&&(T.notification.image=ne)}(S,T),function zi(T,S){!S.data||(T.data=S.data)}(S,T),function Nl(T,S){var k,$,ne,pe,Oe;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;T.fcmOptions={};const Je=null!==(ne=null===($=S.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==ne?ne:null===(pe=S.notification)||void 0===pe?void 0:pe.click_action;Je&&(T.fcmOptions.link=Je);const bt=null===(Oe=S.fcmOptions)||void 0===Oe?void 0:Oe.analytics_label;bt&&(T.fcmOptions.analyticsLabel=bt)}(S,T),S}function Gs(T){return"object"==typeof T&&!!T&&Zo in T}function yi(T,S){const k=[];for(let $=0;$<T.length;$++)k.push(T.charAt($)),$<S.length&&k.push(S.charAt($));return k.join("")}function ea(T){return Gn.create("missing-app-config-values",{valueName:T})}yi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mh{constructor(S,k,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function gh(T){if(!T||!T.options)throw ea("App Configuration Object");if(!T.name)throw ea("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const $ of S)if(!k[$])throw ea($);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ne,installations:k,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Ol(T){return ta.apply(this,arguments)}function ta(){return(ta=(0,U.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(qi,{scope:as}),T.swRegistration.update().catch(()=>{})}catch(k){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function na(T,S){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,U.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Ol(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function ra(T,S){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,U.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=ls)})).apply(this,arguments)}function sa(){return(sa=(0,U.Z)(function*(T,S){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield ra(T,S?.vapidKey),yield na(T,S?.serviceWorkerRegistration),$a(T)})).apply(this,arguments)}function Vl(T,S,k){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,U.Z)(function*(T,S,k){const $=Bl(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:k[Zo],message_name:k[La],message_time:k[xl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bl(T){switch(T){case Wi.NOTIFICATION_CLICKED:return"notification_open";case Wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fs(){return(fs=(0,U.Z)(function*(T,S){const k=S.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===Wi.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Do(k)):T.onMessageHandler.next(Do(k)));const $=k.data;Gs($)&&"1"===$[Bu]&&(yield Vl(T,k.messageType,$))})).apply(this,arguments)}const qs="@firebase/messaging",cr=T=>{const S=new mh(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function jl(T,S){return fs.apply(this,arguments)}(S,k)),S},ci=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:$=>function ia(T,S){return sa.apply(this,arguments)}(S,$)}};function Hl(){return $l.apply(this,arguments)}function $l(){return($l=(0,U.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function An(){(0,ce._registerComponent)(new ye.wA("messaging",cr,"PUBLIC")),(0,ce._registerComponent)(new ye.wA("messaging-internal",ci,"PRIVATE")),(0,ce.registerVersion)(qs,"0.9.17"),(0,ce.registerVersion)(qs,"0.9.17","esm2017")}();const To="analytics",Wl="firebase_id",zs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oa="https://www.googletagmanager.com/gtag/js",Zn=new ue.Yd("@firebase/analytics");function Za(T){return Promise.all(T.map(S=>S.catch(k=>k)))}function Ka(T,S){const k=document.createElement("script");k.src=`${oa}?l=${T}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Ao(T,S,k,$,ne,pe){return So.apply(this,arguments)}function So(){return(So=(0,U.Z)(function*(T,S,k,$,ne,pe){const Oe=$[ne];try{if(Oe)yield S[Oe];else{const bt=(yield Za(k)).find(Mt=>Mt.measurementId===ne);bt&&(yield S[bt.appId])}}catch(Je){Zn.error(Je)}T("config",ne,pe)})).apply(this,arguments)}function xo(T,S,k,$,ne){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,U.Z)(function*(T,S,k,$,ne){try{let pe=[];if(ne&&ne.send_to){let Oe=ne.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Je=yield Za(k);for(const bt of Oe){const Mt=Je.find(Ct=>Ct.measurementId===bt),Bt=Mt&&S[Mt.appId];if(!Bt){pe=[];break}pe.push(Bt)}}0===pe.length&&(pe=Object.values(S)),yield Promise.all(pe),T("event",$,ne||{})}catch(pe){Zn.error(pe)}})).apply(this,arguments)}function qu(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(oa))return S;return null}const er=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),G=new class P{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function De(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ot(T){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,U.Z)(function*(T){var S;const{appId:k,apiKey:$}=T,ne={method:"GET",headers:De($)},pe=zs.replace("{app-id}",k),Oe=yield fetch(pe,ne);if(200!==Oe.status&&304!==Oe.status){let Je="";try{const bt=yield Oe.json();null!==(S=bt.error)&&void 0!==S&&S.message&&(Je=bt.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Je})}return Oe.json()})).apply(this,arguments)}function gn(T){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,U.Z)(function*(T,S=G,k){const{appId:$,apiKey:ne,measurementId:pe}=T.options;if(!$)throw er.create("no-app-id");if(!ne){if(pe)return{measurementId:pe,appId:$};throw er.create("no-api-key")}const Oe=S.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new Zu;return setTimeout((0,U.Z)(function*(){Je.abort()}),void 0!==k?k:6e4),ps({appId:$,apiKey:ne,measurementId:pe},Oe,Je,S)})).apply(this,arguments)}function ps(T,S,k){return gs.apply(this,arguments)}function gs(){return(gs=(0,U.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:k},$,ne=G){var pe,Oe;const{appId:Je,measurementId:bt}=T;try{yield zl($,S)}catch(Mt){if(bt)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(pe=Mt)||void 0===pe?void 0:pe.message}]`),{appId:Je,measurementId:bt};throw Mt}try{const Mt=yield ot(T);return ne.deleteThrottleMetadata(Je),Mt}catch(Mt){const Bt=Mt;if(!zu(Bt)){if(ne.deleteThrottleMetadata(Je),bt)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:Je,measurementId:bt};throw Mt}const Ct=503===Number(null===(Oe=Bt?.customData)||void 0===Oe?void 0:Oe.httpStatus)?(0,de.$s)(k,ne.intervalMillis,30):(0,de.$s)(k,ne.intervalMillis),Kn={throttleEndTimeMillis:Date.now()+Ct,backoffCount:k+1};return ne.setThrottleMetadata(Je,Kn),Zn.debug(`Calling attemptFetch again in ${Ct} millis`),ps(T,Kn,$,ne)}})).apply(this,arguments)}function zl(T,S){return new Promise((k,$)=>{const ne=Math.max(S-Date.now(),0),pe=setTimeout(k,ne);T.addEventListener(()=>{clearTimeout(pe),$(er.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function zu(T){if(!(T instanceof de.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Zu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Mo,Kl;function Ro(){return(Ro=(0,U.Z)(function*(T,S,k,$,ne){if(ne&&ne.global)T("event",k,$);else{const pe=yield S;T("event",k,Object.assign(Object.assign({},$),{send_to:pe}))}})).apply(this,arguments)}function ua(T){Kl=T}function rd(T){Mo=T}function Ys(){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,U.Z)(function*(){var T;if(!(0,de.hl)())return Zn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(S){return Zn.warn(er.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function Xa(){return(Xa=(0,U.Z)(function*(T,S,k,$,ne,pe,Oe){var Je;const bt=gn(T);bt.then(Ur=>{k[Ur.measurementId]=Ur.appId,T.options.measurementId&&Ur.measurementId!==T.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ur=>Zn.error(Ur)),S.push(bt);const Mt=Ys().then(Ur=>{if(Ur)return $.getId()}),[Bt,Ct]=yield Promise.all([bt,Mt]);qu()||Ka(pe,Bt.measurementId),Kl&&(ne("consent","default",Kl),ua(void 0)),ne("js",new Date);const Kn=null!==(Je=Oe?.config)&&void 0!==Je?Je:{};return Kn.origin="firebase",Kn.update=!0,null!=Ct&&(Kn[Wl]=Ct),ne("config",Bt.measurementId,Kn),Mo&&(ne("set",Mo),rd(void 0)),Bt.measurementId})).apply(this,arguments)}class Qu{constructor(S){this.app=S}_delete(){return delete Mi[this.app.options.appId],Promise.resolve()}}let Mi={},Po=[];const el={};let nl,ca,tl="dataLayer",Yl=!1;function Fy(T,S,k){!function hm(){const T=[];if((0,de.ru)()&&T.push("This is a browser extension environment."),(0,de.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map(($,ne)=>`(${ne+1}) ${$}`).join(" "),k=er.create("invalid-analytics-context",{errorInfo:S});Zn.warn(k.message)}}();const $=T.options.appId;if(!$)throw er.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw er.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mi[$])throw er.create("already-exists",{id:$});if(!Yl){!function xi(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(tl);const{wrappedGtag:pe,gtagCore:Oe}=function aa(T,S,k,$,ne){let pe=function(...Oe){window[$].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(pe=window[ne]),window[ne]=function Ya(T,S,k,$){function pe(){return(pe=(0,U.Z)(function*(Oe,Je,bt){try{"event"===Oe?yield xo(T,S,k,Je,bt):"config"===Oe?yield Ao(T,S,k,$,Je,bt):"consent"===Oe?T("consent","update",bt):T("set",Je)}catch(Mt){Zn.error(Mt)}})).apply(this,arguments)}return function ne(Oe,Je,bt){return pe.apply(this,arguments)}}(pe,T,S,k),{gtagCore:pe,wrappedGtag:window[ne]}}(Mi,Po,el,tl,"gtag");ca=pe,nl=Oe,Yl=!0}return Mi[$]=function Ja(T,S,k,$,ne,pe,Oe){return Xa.apply(this,arguments)}(T,Po,el,S,nl,tl,k),new Qu(T)}function Vy(){return rp.apply(this,arguments)}function rp(){return(rp=(0,U.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const ip="@firebase/analytics";!function Ri(){(0,ce._registerComponent)(new ye.wA(To,(S,{options:k})=>Fy(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ce._registerComponent)(new ye.wA("analytics-internal",function T(S){try{const k=S.getProvider(To).getImmediate();return{logEvent:($,ne,pe)=>function mn(T,S,k,$){T=(0,de.m9)(T),function _h(T,S,k,$,ne){return Ro.apply(this,arguments)}(ca,Mi[T.app.options.appId],S,k,$).catch(ne=>Zn.error(ne))}(k,$,ne,pe)}}catch(k){throw er.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ce.registerVersion)(ip,"0.8.1"),(0,ce.registerVersion)(ip,"0.8.1","esm2017")}();var ms=V(4408),rl=V(7565);const Ss=new class Zi extends rl.v{}(class sd extends ms.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(S,k,$):S.flush(this)}});var _t=V(4986),ec=V(8505),da=V(5363),Ql=V(9468);const wi=new d.GfV("7.4.1"),Jl="__angularfire_symbol__analyticsIsSupportedValue",Qs="__angularfire_symbol__analyticsIsSupported",xs="__angularfire_symbol__remoteConfigIsSupportedValue",bi="__angularfire_symbol__remoteConfigIsSupported",od="__angularfire_symbol__messagingIsSupportedValue",tc="__angularfire_symbol__messagingIsSupported";function tu(T,S,k){if(S){if(1===S.length)return S[0];const pe=S.filter(Oe=>Oe.app===k);if(1===pe.length)return pe[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[Qs]||(globalThis[Qs]=Vy().then(T=>globalThis[Jl]=T).catch(()=>globalThis[Jl]=!1)),globalThis[tc]||(globalThis[tc]=Hl().then(T=>globalThis[od]=T).catch(()=>globalThis[od]=!1)),globalThis[bi]||(globalThis[bi]=Oa().then(T=>globalThis[xs]=T).catch(()=>globalThis[xs]=!1));const Pi=(T,S)=>{const k=S?[S]:(0,B.C6)(),$=[];return k.forEach(ne=>{ne.container.getProvider(T).instances.forEach(Oe=>{$.includes(Oe)||$.push(Oe)})}),$};function il(){}class Un{constructor(S,k=Ss){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,$){const ne=this.zone;return this.delegate.schedule(function(Oe){ne.runGuarded(()=>{S.apply(this,[Oe])})},k,$)}}class Ms{constructor(S){this.zone=S,this.task=null}call(S,k){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",il,{},il,il)),k.pipe((0,ec.b)({next:$,complete:$,error:$})).subscribe(S).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nc=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Un(Zone.current)),this.insideAngular=k.run(()=>new Un(Zone.current,_t.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(d.LFG(d.R0b))},T.\u0275prov=d.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ko(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function ad(T){return T.pipe((0,da.Q)(ko().outsideAngular))}function Js(T){return ko(),function ld(T){return function(k){return(k=k.lift(new Ms(T.ngZone))).pipe((0,Ql.R)(T.outsideAngular),(0,da.Q)(T.insideAngular))}}(ko())(T)}},2090:(ht,oe,V)=>{"use strict";V.d(oe,{$s:()=>Pe,BH:()=>Xt,DV:()=>Yn,Dv:()=>vn,G6:()=>Me,GJ:()=>Nr,L:()=>me,LL:()=>Tn,Pz:()=>yt,Sg:()=>zt,UG:()=>xe,UI:()=>vr,US:()=>ye,Wj:()=>Zr,Wl:()=>xt,Yr:()=>Se,ZB:()=>Y,ZR:()=>nn,aH:()=>Be,b$:()=>ve,cI:()=>pn,dS:()=>Or,eu:()=>Qe,g5:()=>U,gK:()=>Jn,gQ:()=>Di,h$:()=>ue,hl:()=>Ye,hu:()=>B,jU:()=>ut,lb:()=>Pt,m9:()=>At,ne:()=>jn,p$:()=>K,pd:()=>pi,r3:()=>Ut,ru:()=>ge,tV:()=>Ee,uI:()=>Ne,ug:()=>an,vZ:()=>kn,w1:()=>qe,w9:()=>Dr,xO:()=>fi,xb:()=>Qn,z$:()=>$e,zI:()=>Z,zd:()=>hn});const B=function(W,z){if(!W)throw U(z)},U=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ce=function(W){const z=[];let ee=0;for(let Ae=0;Ae<W.length;Ae++){let le=W.charCodeAt(Ae);le<128?z[ee++]=le:le<2048?(z[ee++]=le>>6|192,z[ee++]=63&le|128):55296==(64512&le)&&Ae+1<W.length&&56320==(64512&W.charCodeAt(Ae+1))?(le=65536+((1023&le)<<10)+(1023&W.charCodeAt(++Ae)),z[ee++]=le>>18|240,z[ee++]=le>>12&63|128,z[ee++]=le>>6&63|128,z[ee++]=63&le|128):(z[ee++]=le>>12|224,z[ee++]=le>>6&63|128,z[ee++]=63&le|128)}return z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,z){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let le=0;le<W.length;le+=3){const Ge=W[le],vt=le+1<W.length,$t=vt?W[le+1]:0,Hn=le+2<W.length,wn=Hn?W[le+2]:0;let mt=(15&$t)<<2|wn>>6,en=63&wn;Hn||(en=64,vt||(mt=64)),Ae.push(ee[Ge>>2],ee[(3&Ge)<<4|$t>>4],ee[mt],ee[en])}return Ae.join("")},encodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(W):this.encodeByteArray(ce(W),z)},decodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(W):function(W){const z=[];let ee=0,Ae=0;for(;ee<W.length;){const le=W[ee++];if(le<128)z[Ae++]=String.fromCharCode(le);else if(le>191&&le<224){const Ge=W[ee++];z[Ae++]=String.fromCharCode((31&le)<<6|63&Ge)}else if(le>239&&le<365){const Hn=((7&le)<<18|(63&W[ee++])<<12|(63&W[ee++])<<6|63&W[ee++])-65536;z[Ae++]=String.fromCharCode(55296+(Hn>>10)),z[Ae++]=String.fromCharCode(56320+(1023&Hn))}else{const Ge=W[ee++],vt=W[ee++];z[Ae++]=String.fromCharCode((15&le)<<12|(63&Ge)<<6|63&vt)}}return z.join("")}(this.decodeStringToByteArray(W,z))},decodeStringToByteArray(W,z){this.init_();const ee=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let le=0;le<W.length;){const Ge=ee[W.charAt(le++)],$t=le<W.length?ee[W.charAt(le)]:0;++le;const wn=le<W.length?ee[W.charAt(le)]:64;++le;const Fe=le<W.length?ee[W.charAt(le)]:64;if(++le,null==Ge||null==$t||null==wn||null==Fe)throw Error();Ae.push(Ge<<2|$t>>4),64!==wn&&(Ae.push($t<<4&240|wn>>2),64!==Fe&&Ae.push(wn<<6&192|Fe))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ue=function(W){const z=ce(W);return ye.encodeByteArray(z,!0)},me=function(W){return ue(W).replace(/\./g,"")},Ee=function(W){try{return ye.decodeString(W,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(W){return Y(void 0,W)}function Y(W,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return z}for(const ee in z)!z.hasOwnProperty(ee)||!te(ee)||(W[ee]=Y(W[ee],z[ee]));return W}function te(W){return"__proto__"!==W}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function xe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ut(){return"object"==typeof self&&self.self===self}function ge(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){const W=$e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Se(){return!1}function Me(){return!xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){return"object"==typeof indexedDB}function Qe(){return new Promise((W,z)=>{try{let ee=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(Ae);le.onsuccess=()=>{le.result.close(),ee||self.indexedDB.deleteDatabase(Ae),W(!0)},le.onupgradeneeded=()=>{ee=!1},le.onerror=()=>{var Ge;z((null===(Ge=le.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(ee){z(ee)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const se=()=>function _e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u")return;const W=process.env.__FIREBASE_DEFAULTS__,z=process.env.__FIREBASE_DEFAULTS_PATH__;if(W)return z&&console.warn("Values were provided for both __FIREBASE_DEFAULTS__ and __FIREBASE_DEFAULTS_PATH__. __FIREBASE_DEFAULTS_PATH__ will be ignored."),JSON.parse(W);if(z)try{return V(9163)(z)}catch{console.warn(`Unable to read defaults from file provided to __FIREBASE_DEFAULTS_PATH__: ${z}`)}})()||(()=>{if(typeof document>"u")return;const W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),z=W&&Ee(W[1]);return z&&JSON.parse(z)})(),Be=()=>{var W;return null===(W=se())||void 0===W?void 0:W.config},yt=W=>{var z;return null===(z=se())||void 0===z?void 0:z[`_${W}`]};class Xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,ee)=>{this.resolve=z,this.reject=ee})}wrapCallback(z){return(ee,Ae)=>{ee?this.reject(ee):this.resolve(Ae),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(ee):z(ee,Ae))}}}function zt(W,z){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=z||"demo-project",le=W.iat||0,Ge=W.sub||W.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:le,exp:le+3600,auth_time:le,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},W);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(vt)),""].join(".")}class nn extends Error{constructor(z,ee,Ae){super(ee),this.code=z,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}}class Tn{constructor(z,ee,Ae){this.service=z,this.serviceName=ee,this.errors=Ae}create(z,...ee){const Ae=ee[0]||{},le=`${this.service}/${z}`,Ge=this.errors[z],vt=Ge?function sn(W,z){return W.replace(Kt,(ee,Ae)=>{const le=z[Ae];return null!=le?String(le):`<${Ae}?>`})}(Ge,Ae):"Error";return new nn(le,`${this.serviceName}: ${vt} (${le}).`,Ae)}}const Kt=/\{\$([^}]+)}/g;function pn(W){return JSON.parse(W)}function xt(W){return JSON.stringify(W)}const on=function(W){let z={},ee={},Ae={},le="";try{const Ge=W.split(".");z=pn(Ee(Ge[0])||""),ee=pn(Ee(Ge[1])||""),le=Ge[2],Ae=ee.d||{},delete ee.d}catch{}return{header:z,claims:ee,data:Ae,signature:le}},Dr=function(W){const ee=on(W).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},Nr=function(W){const z=on(W).claims;return"object"==typeof z&&!0===z.admin};function Ut(W,z){return Object.prototype.hasOwnProperty.call(W,z)}function Yn(W,z){if(Object.prototype.hasOwnProperty.call(W,z))return W[z]}function Qn(W){for(const z in W)if(Object.prototype.hasOwnProperty.call(W,z))return!1;return!0}function vr(W,z,ee){const Ae={};for(const le in W)Object.prototype.hasOwnProperty.call(W,le)&&(Ae[le]=z.call(ee,W[le],le,W));return Ae}function kn(W,z){if(W===z)return!0;const ee=Object.keys(W),Ae=Object.keys(z);for(const le of ee){if(!Ae.includes(le))return!1;const Ge=W[le],vt=z[le];if(Ke(Ge)&&Ke(vt)){if(!kn(Ge,vt))return!1}else if(Ge!==vt)return!1}for(const le of Ae)if(!ee.includes(le))return!1;return!0}function Ke(W){return null!==W&&"object"==typeof W}function fi(W){const z=[];for(const[ee,Ae]of Object.entries(W))Array.isArray(Ae)?Ae.forEach(le=>{z.push(encodeURIComponent(ee)+"="+encodeURIComponent(le))}):z.push(encodeURIComponent(ee)+"="+encodeURIComponent(Ae));return z.length?"&"+z.join("&"):""}function hn(W){const z={};return W.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[le,Ge]=Ae.split("=");z[decodeURIComponent(le)]=decodeURIComponent(Ge)}}),z}function pi(W){const z=W.indexOf("?");if(!z)return"";const ee=W.indexOf("#",z);return W.substring(z,ee>0?ee:void 0)}class Di{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,ee){ee||(ee=0);const Ae=this.W_;if("string"==typeof z)for(let Fe=0;Fe<16;Fe++)Ae[Fe]=z.charCodeAt(ee)<<24|z.charCodeAt(ee+1)<<16|z.charCodeAt(ee+2)<<8|z.charCodeAt(ee+3),ee+=4;else for(let Fe=0;Fe<16;Fe++)Ae[Fe]=z[ee]<<24|z[ee+1]<<16|z[ee+2]<<8|z[ee+3],ee+=4;for(let Fe=16;Fe<80;Fe++){const mt=Ae[Fe-3]^Ae[Fe-8]^Ae[Fe-14]^Ae[Fe-16];Ae[Fe]=4294967295&(mt<<1|mt>>>31)}let wn,bn,le=this.chain_[0],Ge=this.chain_[1],vt=this.chain_[2],$t=this.chain_[3],Hn=this.chain_[4];for(let Fe=0;Fe<80;Fe++){Fe<40?Fe<20?(wn=$t^Ge&(vt^$t),bn=1518500249):(wn=Ge^vt^$t,bn=1859775393):Fe<60?(wn=Ge&vt|$t&(Ge|vt),bn=2400959708):(wn=Ge^vt^$t,bn=3395469782);const mt=(le<<5|le>>>27)+wn+Hn+bn+Ae[Fe]&4294967295;Hn=$t,$t=vt,vt=4294967295&(Ge<<30|Ge>>>2),Ge=le,le=mt}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+$t&4294967295,this.chain_[4]=this.chain_[4]+Hn&4294967295}update(z,ee){if(null==z)return;void 0===ee&&(ee=z.length);const Ae=ee-this.blockSize;let le=0;const Ge=this.buf_;let vt=this.inbuf_;for(;le<ee;){if(0===vt)for(;le<=Ae;)this.compress_(z,le),le+=this.blockSize;if("string"==typeof z){for(;le<ee;)if(Ge[vt]=z.charCodeAt(le),++vt,++le,vt===this.blockSize){this.compress_(Ge),vt=0;break}}else for(;le<ee;)if(Ge[vt]=z[le],++vt,++le,vt===this.blockSize){this.compress_(Ge),vt=0;break}}this.inbuf_=vt,this.total_+=ee}digest(){const z=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&ee,ee/=256;this.compress_(this.buf_);let Ae=0;for(let le=0;le<5;le++)for(let Ge=24;Ge>=0;Ge-=8)z[Ae]=this.chain_[le]>>Ge&255,++Ae;return z}}function jn(W,z){const ee=new Wn(W,z);return ee.subscribe.bind(ee)}class Wn{constructor(z,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{z(this)}).catch(Ae=>{this.error(Ae)})}next(z){this.forEachObserver(ee=>{ee.next(z)})}error(z){this.forEachObserver(ee=>{ee.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,ee,Ae){let le;if(void 0===z&&void 0===ee&&void 0===Ae)throw new Error("Missing Observer.");le=function wt(W,z){if("object"!=typeof W||null===W)return!1;for(const ee of z)if(ee in W&&"function"==typeof W[ee])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:ee,complete:Ae},void 0===le.next&&(le.next=Ue),void 0===le.error&&(le.error=Ue),void 0===le.complete&&(le.complete=Ue);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),Ge}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,z)}sendOne(z,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{ee(this.observers[z])}catch(Ae){typeof console<"u"&&console.error&&console.error(Ae)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ue(){}const vn=function(W,z,ee,Ae){let le;if(Ae<z?le="at least "+z:Ae>ee&&(le=0===ee?"none":"no more than "+ee),le)throw new Error(W+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+le+".")};function Jn(W,z){return`${W} failed: ${z} argument `}function Zr(W,z,ee,Ae){if((!Ae||ee)&&"function"!=typeof ee)throw new Error(Jn(W,z)+"must be a valid function.")}function Pt(W,z,ee,Ae){if((!Ae||ee)&&("object"!=typeof ee||null===ee))throw new Error(Jn(W,z)+"must be a valid context object.")}const Or=function(W){const z=[];let ee=0;for(let Ae=0;Ae<W.length;Ae++){let le=W.charCodeAt(Ae);if(le>=55296&&le<=56319){const Ge=le-55296;Ae++,B(Ae<W.length,"Surrogate pair missing trail surrogate."),le=65536+(Ge<<10)+(W.charCodeAt(Ae)-56320)}le<128?z[ee++]=le:le<2048?(z[ee++]=le>>6|192,z[ee++]=63&le|128):le<65536?(z[ee++]=le>>12|224,z[ee++]=le>>6&63|128,z[ee++]=63&le|128):(z[ee++]=le>>18|240,z[ee++]=le>>12&63|128,z[ee++]=le>>6&63|128,z[ee++]=63&le|128)}return z},an=function(W){let z=0;for(let ee=0;ee<W.length;ee++){const Ae=W.charCodeAt(ee);Ae<128?z++:Ae<2048?z+=2:Ae>=55296&&Ae<=56319?(z+=4,ee++):z+=3}return z};function Pe(W,z=1e3,ee=2){const Ae=z*Math.pow(ee,W),le=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+le)}function At(W){return W&&W._delegate?W._delegate:W}},910:(ht,oe,V)=>{"use strict";var d=V(4650);let B=null;function U(){return B}const ue=new d.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(){return(0,d.LFG)(Y)}()},providedIn:"platform"}),n})();const K=new d.OlP("Location Initialized");let Y=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $e(){return new Y((0,d.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ut(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(et)},providedIn:"root"}),n})();const ve=new d.OlP("appBaseHref");let et=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ut(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+ut(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+ut(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(ve,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+ut(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+ut(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(ve,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=xe(Ye(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ut(r))}normalize(t){return n.stripTrailingSlash(function Me(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ut(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ut(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ut,n.joinWithSlash=Ne,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Se(){return new Re((0,d.LFG)(ge))}()},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}function Wo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let un=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class zo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new zo(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,u),os(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{os(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function os(n,e){n.context.$implicit=e.item}let Xn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new El,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class El{constructor(){this.$implicit=null,this.ngIf=null}}function lr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function ur(n,e){return new d.vHH(2100,!1)}class Lu{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class ch{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const li=new ch,dh=new Lu;let vo=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return li;if((0,d.F4k)(t))return dh;throw ur()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Na=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw ur();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),wo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Tr(n){return"server"===n}let Va=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ed((0,d.LFG)(ue),window)}),n})();class ed{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=mi(this.window.history)||mi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class us{}class fs extends class jl extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){B||(B=n)}(new fs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qa(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function ci(n){cr=cr||document.createElement("a"),cr.setAttribute("href",n);const e=cr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wo(document.cookie,e)}}let cr,qs=null;const An=new d.OlP("TRANSITION_ID"),$l=[{provide:d.ip1,useFactory:function Hl(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=U(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[An,ue,d.zs3],multi:!0}];let Gl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wa=new d.OlP("EventManagerPlugins");let Gu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wa),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=U().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vi=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ql),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ql))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ql(n){U().remove(n)}const To={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wl=/%COMP%/g;function Ka(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ka(n,i,t):(i=i.replace(Wl,n),t.push(i))}return t}function xi(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let So=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new xo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Wu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ka(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gu),d.LFG(vi),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class xo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(To[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(aa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=To[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=To[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xi(r)):this.eventManager.addEventListener(e,t,xi(r))}}function aa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qu extends xo{constructor(e,t,r,i){super(e),this.component=r;const a=Ka(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Zn(n){return"_ngcontent-%COMP%".replace(Wl,n)}(i+"-"+r.id),this.hostAttr=function Za(n){return"_nghost-%COMP%".replace(Wl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wu extends xo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ka(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const h=document.createElement("style");h.textContent=a[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const C=["alt","control","meta","shift"],I={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let G=(()=>{class n extends za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),u="code."),C.forEach(w=>{const A=r.indexOf(w);A>-1&&(r.splice(A,1),u+=w+".")}),u+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=u,_}static matchEventFullKeyCode(t,r){let i=I[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),C.forEach(u=>{u!==i&&(0,P[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Zu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function ps(){fs.makeCurrent()},multi:!0},{provide:ue,useFactory:function zl(){return(0,d.RDi)(document),document},deps:[]}]),Mo=new d.OlP(""),_h=[{provide:d.rWj,useClass:class $u{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const h=function(_){u=u||_,a--,0==a&&r(u)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Ro=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function gs(){return new d.qLn},deps:[]},{provide:Wa,useClass:er,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:Wa,useClass:G,multi:!0,deps:[ue]},{provide:So,useClass:So,deps:[Gu,vi,d.AFp]},{provide:d.FYo,useExisting:So},{provide:Ws,useExisting:vi},{provide:vi,useClass:vi,deps:[ue]},{provide:Gu,useClass:Gu,deps:[Wa,d.R0b]},{provide:us,useClass:Gl,deps:[]},[]];let td=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:An,useExisting:d.AFp},$l]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mo,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Ro,..._h],imports:[wo,d.hGG]}),n})(),Ks=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Qa(){return new Ks((0,d.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var mn=V(8996),Ar=V(9751);const{isArray:ip}=Array,{getPrototypeOf:Xu,prototype:Ri,keys:ms}=Object;function sd(n){if(1===n.length){const e=n[0];if(ip(e))return{args:e,keys:null};if(function rl(n){return n&&"object"==typeof n&&Xu(n)===Ri}(e)){const t=ms(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zi=V(8421),Ss=V(3269),dr=V(5403),_t=V(4004);const{isArray:ec}=Array;function Ql(n){return(0,_t.U)(e=>function da(n,e){return ec(e)?n(...e):n(e)}(n,e))}function wi(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Qs=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),xs=(()=>{class n extends Qs{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const bi=new d.OlP("NgValueAccessor"),Xl={provide:bi,useExisting:(0,d.Gpc)(()=>eu),multi:!0},vh=new d.OlP("CompositionEventMode");let eu=(()=>{class n extends Qs{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pm(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(vh,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([Xl]),d.qOj]}),n})();const Un=new d.OlP("NgValidators"),Ms=new d.OlP("NgAsyncValidators");function ad(n){return function Pi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function T(n){return null}function S(n){return null!=n}function k(n){return(0,d.QGY)(n)?(0,mn.D)(n):n}function $(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ne(n,e){return e.map(t=>t(n))}function Oe(n){return n.map(e=>function pe(n){return!n.validate}(e)?e:t=>e.validate(t))}function bt(n){return null!=n?function Je(n){if(!n)return null;const e=n.filter(S);return 0==e.length?null:function(t){return $(ne(t,e))}}(Oe(n)):null}function Bt(n){return null!=n?function Mt(n){if(!n)return null;const e=n.filter(S);return 0==e.length?null:function(t){return function Jl(...n){const e=(0,Ss.jO)(n),{args:t,keys:r}=sd(n),i=new Ar.y(a=>{const{length:u}=t;if(!u)return void a.complete();const h=new Array(u);let _=u,w=u;for(let A=0;A<u;A++){let x=!1;(0,Zi.Xf)(t[A]).subscribe((0,dr.x)(a,N=>{x||(x=!0,w--),h[A]=N},()=>_--,void 0,()=>{(!_||!x)&&(w||a.next(r?wi(r,h):h),a.complete())}))}});return e?i.pipe(Ql(e)):i}(ne(t,e).map(k)).pipe((0,_t.U)($))}}(Oe(n)):null}function Ct(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function No(n){return n?Array.isArray(n)?n:[n]:[]}function Xs(n,e){return Array.isArray(n)?n.includes(e):n===e}function Oo(n,e){const t=No(e);return No(n).forEach(i=>{Xs(t,i)||t.push(i)}),t}function fa(n,e){return No(e).filter(t=>!Xs(n,t))}class eo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class sr extends eo{get formDirective(){return null}get path(){return null}}class ki extends eo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Fo{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bh=(()=>{class n extends Fo{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ki,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Eh=(()=>{class n extends Fo{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(sr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const su="VALID",dd="INVALID",ou="PENDING",ic="DISABLED";function sc(n){return(fd(n)?n.validators:n)||null}function _m(n){return Array.isArray(n)?bt(n):n||null}function hd(n,e){return(fd(e)?e.asyncValidators:n)||null}function ym(n){return Array.isArray(n)?Bt(n):n||null}function fd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class oc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_m(this._rawValidators),this._composedAsyncValidatorFn=ym(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===su}get invalid(){return this.status===dd}get pending(){return this.status==ou}get disabled(){return this.status===ic}get enabled(){return this.status!==ic}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_m(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ym(e)}addValidators(e){this.setValidators(Oo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Oo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fa(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fa(e,this._rawAsyncValidators))}hasValidator(e){return Xs(this._rawValidators,e)}hasAsyncValidator(e){return Xs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ou,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ic,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=su,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===su||this.status===ou)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ic:su}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ou,this._hasOwnPendingAsyncValidator=!0;const t=k(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ic:this.errors?dd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ou)?ou:this._anyControlsHaveStatus(dd)?dd:su}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fd(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ih extends oc{constructor(e,t,r){super(sc(t),hd(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function to(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function vm(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function ac(n,e){pa(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ga(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&up(n,e)})}(n,e),function Th(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function au(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&up(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function eE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Dh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pa(n,e){const t=function Kn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ct(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Ur(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ct(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Dh(e._rawValidators,i),Dh(e._rawAsyncValidators,i)}function up(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const fp={provide:sr,useExisting:(0,d.Gpc)(()=>ma)},uc=(()=>Promise.resolve())();let ma=(()=>{class n extends sr{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Ih({},bt(t),Bt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uc.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ac(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uc.then(()=>{const r=this._findContainer(t.path),i=new Ih({});(function cp(n,e){pa(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){uc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function dp(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Un,10),d.Y36(Ms,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([fp]),d.qOj]}),n})();function xh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function cc(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const bm=class extends oc{constructor(e=null,t,r){super(sc(t),hd(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=cc(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){cc(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Jy={provide:ki,useExisting:(0,d.Gpc)(()=>Rh)},gd=(()=>Promise.resolve())();let Rh=(()=>{class n extends ki{constructor(t,r,i,a,u){super(),this._changeDetectorRef=u,this.control=new bm,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function hp(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===eu?t=a:function rE(n){return Object.getPrototypeOf(n.constructor)===xs}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function wm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ac(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){gd.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);gd.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function lp(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(sr,9),d.Y36(Un,10),d.Y36(Ms,10),d.Y36(bi,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Jy]),d.qOj,d.TTD]}),n})(),_a=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),mp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const _d=new d.OlP("NgModelWithFormControlWarning");let cu=(()=>{class n{constructor(){this._validator=T}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):T,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const sv={provide:Un,useExisting:(0,d.Gpc)(()=>p),multi:!0};let p=(()=>{class n extends cu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>ad}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([sv]),d.qOj]}),n})(),Uh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mp]}),n})(),ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Uh]}),n})(),vd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_d,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Uh]}),n})();function dt(...n){const e=(0,Ss.yG)(n);return(0,mn.D)(n,e)}var Vo=V(7579);class Uo extends Vo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const xm=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var pc=V(4671),Ip=V(9672);function uE(...n){const e=(0,Ss.yG)(n),t=(0,Ss.jO)(n),{args:r,keys:i}=sd(n);if(0===r.length)return(0,mn.D)([],e);const a=new Ar.y(function nA(n,e,t=pc.y){return r=>{cE(e,()=>{const{length:i}=n,a=new Array(i);let u=i,h=i;for(let _=0;_<i;_++)cE(e,()=>{const w=(0,mn.D)(n[_],e);let A=!1;w.subscribe((0,dr.x)(r,x=>{a[_]=x,A||(A=!0,h--),h||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>wi(i,u):pc.y));return t?a.pipe(Ql(t)):a}function cE(n,e,t){n?(0,Ip.f)(t,n,e):e()}var Bh=V(8189);function Mm(...n){return function rA(){return(0,Bh.J)(1)}()((0,mn.D)(n,(0,Ss.yG)(n)))}function dE(n){return new Ar.y(e=>{(0,Zi.Xf)(n()).subscribe(e)})}var iA=V(9635),Dp=V(576);function Tp(n,e){const t=(0,Dp.m)(n)?n:()=>n,r=i=>i.error(t());return new Ar.y(e?i=>e.schedule(r,0,i):r)}var wd=V(515),hE=V(727),Xr=V(4482);function cv(){return(0,Xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,dr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class fE extends Ar.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,dr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hE.w0.EMPTY)}return e}refCount(){return cv()(this)}}function _n(n,e){return(0,Xr.e)((t,r)=>{let i=null,a=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,dr.x)(r,_=>{i?.unsubscribe();let w=0;const A=a++;(0,Zi.Xf)(n(_,A)).subscribe(i=(0,dr.x)(r,x=>r.next(e?e(_,x,A,w++):x),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function du(n){return n<=0?()=>wd.E:(0,Xr.e)((e,t)=>{let r=0;e.subscribe((0,dr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ap(...n){const e=(0,Ss.yG)(n);return(0,Xr.e)((t,r)=>{(e?Mm(n,t,e):Mm(n,t)).subscribe(r)})}function ks(n,e){return(0,Xr.e)((t,r)=>{let i=0;t.subscribe((0,dr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var xn=V(5577);function gc(n){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,dr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dv(n=sA){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,dr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sA(){return new xm}function hu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ks((i,a)=>n(i,a,r)):pc.y,du(1),t?gc(e):dv(()=>new xm))}function fu(n,e){return(0,Dp.m)(e)?(0,xn.z)(n,e,1):(0,xn.z)(n,1)}var Ki=V(8505);function sl(n){return(0,Xr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,dr.x)(t,void 0,void 0,u=>{a=(0,Zi.Xf)(n(u,sl(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function oA(n,e,t,r,i){return(a,u)=>{let h=t,_=e,w=0;a.subscribe((0,dr.x)(u,A=>{const x=w++;_=h?n(_,A,x):(h=!0,A),r&&u.next(_)},i&&(()=>{h&&u.next(_),u.complete()})))}}function mc(n,e){return(0,Xr.e)(oA(n,e,arguments.length>=2,!0))}function hv(n){return n<=0?()=>wd.E:(0,Xr.e)((e,t)=>{let r=[];e.subscribe((0,dr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pE(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ks((i,a)=>n(i,a,r)):pc.y,hv(1),t?gc(e):dv(()=>new xm))}function gE(n){return(0,_t.U)(()=>n)}function fv(n){return(0,Xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",ro=Symbol("RouteTitle");class lA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jh(n){return new lA(n)}function I1(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],h=n[a];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ya(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!uA(n[i],e[i]))return!1;return!0}function uA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function va(n){return Array.prototype.concat.apply([],n)}function Rm(n){return n.length>0?n[n.length-1]:null}function Fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pu(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,mn.D)(Promise.resolve(n)):dt(n)}const cA={exact:function mv(n,e,t){if(!Cd(n.segments,e.segments)||!xp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!mv(n.children[r],e.children[r],t))return!1;return!0},subset:bd},_E={exact:function gv(n,e){return ya(n,e)},subset:function T1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uA(n[t],e[t]))},ignored:()=>!0};function Pm(n,e,t){return cA[t.paths](n.root,e.root,t.matrixParams)&&_E[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bd(n,e,t){return km(n,e,e.segments,t)}function km(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Cd(i,t)||e.hasChildren()||!xp(i,t,r))}if(n.segments.length===t.length){if(!Cd(n.segments,t)||!xp(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!bd(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Cd(n.segments,i)&&xp(n.segments,i,r)&&n.children[qt])&&km(n.children[qt],e,a,r)}}function xp(n,e,t){return e.every((r,i)=>_E[t](n[i].parameters,r.parameters))}class Ed{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jh(this.queryParams)),this._queryParamMap}toString(){return vE.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hh(this)}}class Mp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jh(this.parameters)),this._parameterMap}toString(){return yv(this)}}function Cd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let yE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new _v},providedIn:"root"}),n})();class _v{parse(e){const t=new vv(e);return new Ed(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$h(e.root,!0)}`,r=function pA(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Om(t)}=${Om(i)}`).join("&"):`${Om(t)}=${Om(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function fA(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vE=new _v;function Hh(n){return n.segments.map(e=>yv(e)).join("/")}function $h(n,e){if(!n.hasChildren())return Hh(n);if(e){const t=n.children[qt]?$h(n.children[qt],!1):"",r=[];return Fi(n.children,(i,a)=>{a!==qt&&r.push(`${a}:${$h(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hA(n,e){let t=[];return Fi(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),Fi(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[$h(n.children[qt],!1)]:[`${i}:${$h(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${Hh(n)}/${t[0]}`:`${Hh(n)}/(${t.join("//")})`}}function Nm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Om(n){return Nm(n).replace(/%3B/gi,";")}function Fm(n){return Nm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rp(n){return decodeURIComponent(n)}function _c(n){return Rp(n.replace(/\+/g,"%20"))}function yv(n){return`${Fm(n.path)}${function wE(n){return Object.keys(n).map(e=>`;${Fm(e)}=${Fm(n[e])}`).join("")}(n.parameters)}`}const A1=/^[^\/()?;=#]+/;function Id(n){const e=n.match(A1);return e?e[0]:""}const gA=/^[^=?&#]+/,EE=/^[^&#]+/;class vv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new tn(e,t)),r}parseSegment(){const e=Id(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Mp(Rp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Id(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Id(this.remaining);i&&(r=i,this.capture(r))}e[Rp(t)]=Rp(r)}parseQueryParam(e){const t=function bE(n){const e=n.match(gA);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function CE(n){const e=n.match(EE);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=_c(t),a=_c(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Id(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=qt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[qt]:new tn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Lm(n){return n.segments.length>0?new tn([],{[qt]:n}):n}function Dd(n){const e={};for(const r of Object.keys(n.children)){const a=Dd(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Vm(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}function yc(n){return n instanceof Ed}function _A(n,e,t,r,i){if(0===t.length)return qh(e.root,e.root,e.root,r,i);const a=function Ev(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Um(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Fi(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Um(t,e,r)}(t);return a.toRoot()?qh(e.root,e.root,new tn([],{}),r,i):function u(_){const w=function yA(n,e,t,r){if(n.isAbsolute)return new Op(e.root,!0,0);if(-1===r)return new Op(t,t===e.root,0);return function Cv(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Op(r,!1,i-a)}(t,r+(Gh(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),A=w.processChildren?_s(w.segmentGroup,w.index,a.commands):Iv(w.segmentGroup,w.index,a.commands);return qh(e.root,w.segmentGroup,A,r,i)}(n.snapshot?._lastPathIndex)}function Gh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Np(n){return"object"==typeof n&&null!=n&&n.outlets}function qh(n,e,t,r,i){let u,a={};r&&Fi(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(A=>`${A}`):`${_}`}),u=n===e?t:bv(n,e,t);const h=Lm(Dd(u));return new Ed(h,a,i)}function bv(n,e,t){const r={};return Fi(n.children,(i,a)=>{r[a]=i===e?t:bv(i,e,t)}),new tn(n.segments,r)}class Um{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gh(r[0]))throw new d.vHH(4003,!1);const i=r.find(Np);if(i&&i!==Rm(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Op{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Iv(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return _s(n,e,t);const r=function wA(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],h=t[r];if(Np(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!TE(_,w,u))return a;r+=2}else{if(!TE(_,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new tn(n.segments.slice(0,r.pathIndex),{});return a.children[qt]=new tn(n.segments.slice(r.pathIndex),n.children),_s(a,0,i)}return r.match&&0===i.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?Bm(n,e,t):r.match?_s(n,0,i):Bm(n,e,t)}function _s(n,e,t){if(0===t.length)return new tn(n.segments,{});{const r=function vA(n){return Np(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return Fi(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Iv(n.children[u],e,a))}),Fi(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new tn(n.segments,i)}}function Bm(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Np(a)){const _=bA(a.outlets);return new tn(r,_)}if(0===i&&Gh(t[0])){r.push(new Mp(n.segments[e].path,DE(t[0]))),i++;continue}const u=Np(a)?a.outlets[qt]:`${a}`,h=i<t.length-1?t[i+1]:null;u&&h&&Gh(h)?(r.push(new Mp(u,DE(h))),i+=2):(r.push(new Mp(u,{})),i++)}return new tn(r,{})}function bA(n){const e={};return Fi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Bm(new tn([],{}),0,t))}),e}function DE(n){const e={};return Fi(n,(t,r)=>e[r]=`${t}`),e}function TE(n,e,t){return n==t.path&&ya(e,t.parameters)}class gu{constructor(e,t){this.id=e,this.url=t}}class jm extends gu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Td extends gu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hm extends gu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AE extends gu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wt extends gu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SE extends gu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xE extends gu{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ME extends gu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EA extends gu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CA{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class RE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IA{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PE{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DA{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TA{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Dv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mu(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=mu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Tv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tv(e,this._root).map(t=>t.value)}}function mu(n,e){if(n===e.value)return e;for(const t of e.children){const r=mu(n,t);if(r)return r}return null}function Tv(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Tv(n,t);if(r.length)return r.unshift(e),r}return[]}class wa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NE extends Dv{constructor(e,t){super(e),this.snapshot=t,wc(this,e)}toString(){return this.snapshot.toString()}}function SA(n,e){const t=function S1(n,e){const u=new Av([],{},{},"",{},qt,e,null,n.root,-1,{});return new LE("",new wa(u,[]))}(n,e),r=new Uo([new Mp("",{})]),i=new Uo({}),a=new Uo({}),u=new Uo({}),h=new Uo(""),_=new Wh(r,i,u,h,a,qt,e,t.root);return _.snapshot=t.root,new NE(new wa(_,[]),t)}class Wh{constructor(e,t,r,i,a,u,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this.title=this.data?.pipe((0,_t.U)(w=>w[ro]))??dt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>jh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>jh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function FE(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Av{constructor(e,t,r,i,a,u,h,_,w,A,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this.title=this.data?.[ro],this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=A,this._correctedLastPathIndex=N??A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LE extends Dv{constructor(e,t){super(t),this.url=e,wc(this,t)}toString(){return VE(this._root)}}function wc(n,e){e.value._routerState=n,e.children.forEach(t=>wc(n,t))}function VE(n){const e=n.children.length>0?` { ${n.children.map(VE).join(", ")} } `:"";return`${n.value}${e}`}function $m(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ya(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ya(e.params,t.params)||n.params.next(t.params),function D1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ya(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ya(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zh(n,e){const t=ya(n.params,e.params)&&function dA(n,e){return Cd(n,e)&&n.every((t,r)=>ya(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zh(n.parent,e.parent))}function Zh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function MA(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zh(n,r,i);return Zh(n,r)})}(n,e,t);return new wa(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>Zh(n,h)),u}}const r=function RA(n){return new Wh(new Uo(n.url),new Uo(n.params),new Uo(n.queryParams),new Uo(n.fragment),new Uo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Zh(n,a));return new wa(r,i)}}const Sv="ngNavigationCancelingError";function UE(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=yc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BE(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function BE(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Sv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function xv(n){return jE(n)&&yc(n.url)}function jE(n){return n&&n[Sv]}class HE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Kh,this.attachRef=null}}let Kh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new HE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yh=!1;let $E=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Yh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Yh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Yh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Yh);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new Mv(t,h,i.injector);if(r&&function PA(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(u);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(u,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kh),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Mv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wh?this.route:e===Kh?this.childContexts:this.parent.get(e,t)}}let GE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[$E],encapsulation:2}),n})();function Ad(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Fp(n){const e=n.children&&n.children.map(Fp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=GE),t}function io(n){return n.outlet||qt}function qm(n,e){const t=n.filter(r=>io(r)===e);return t.push(...n.filter(r=>io(r)!==e)),t}function Wm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class x1{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$m(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=vc(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Fi(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=vc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=vc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=vc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new TA(a.value.snapshot))}),e.children.length&&this.forwardEvent(new PE(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if($m(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),$m(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=Wm(i.snapshot),_=h?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=_,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Lp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Sd{constructor(e,t){this.component=e,this.route=t}}function kv(n,e,t){const r=n._root;return zm(r,e?e._root:null,t,[r.value])}function bc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function zm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=vc(e);return n.children.forEach(u=>{(function FA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const _=function LA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Cd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Cd(n.url,e.url)||!ya(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zh(n,e)||!ya(n.queryParams,e.queryParams);default:return!zh(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Lp(r)):(a.data=u.data,a._resolvedData=u._resolvedData),zm(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Sd(h.outlet.component,u))}else u&&Vp(e,h,i),i.canActivateChecks.push(new Lp(r)),zm(n,null,a.component?h?h.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Fi(a,(u,h)=>Vp(u,t.getContext(h),i)),i}function Vp(n,e,t){const r=vc(n),i=n.value;Fi(r,(a,u)=>{Vp(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Sd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Up(n){return"function"==typeof n}function KE(n){return n instanceof xm||"EmptyError"===n?.name}const Fv=Symbol("INITIAL_VALUE");function Bp(){return _n(n=>uE(n.map(e=>e.pipe(du(1),Ap(Fv)))).pipe((0,_t.U)(e=>{for(const t of e)if(!0!==t){if(t===Fv)return Fv;if(!1===t||t instanceof Ed)return t}return!0}),ks(e=>e!==Fv),du(1)))}function YE(n){return(0,iA.z)((0,Ki.b)(e=>{if(yc(e))throw UE(0,e)}),(0,_t.U)(e=>!0===e))}const jp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vv(n,e,t,r,i){const a=Hp(n,e,t);return a.matched?function QE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?dt(i.map(u=>{const h=bc(u,n);return pu(function ZE(n){return n&&Up(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Bp(),YE()):dt(!0)}(r=Ad(e,r),e,t).pipe((0,_t.U)(u=>!0===u?a:{...jp})):dt(a)}function Hp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...jp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||I1)(t,n,e);if(!i)return{...jp};const a={};Fi(i.posParams,(h,_)=>{a[_]=h.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Zm(n,e,t,r,i="corrected"){if(t.length>0&&function UA(n,e,t){return t.some(r=>$p(n,e,r)&&io(r)!==qt)}(n,t,r)){const u=new tn(e,function JE(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&io(a)!==qt){const u=new tn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[io(a)]=u}return i}(n,e,r,new tn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function BA(n,e,t){return t.some(r=>$p(n,e,r))}(n,t,r)){const u=new tn(n.segments,function Cc(n,e,t,r,i,a){const u={};for(const h of r)if($p(n,t,h)&&!i[io(h)]){const _=new tn([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[io(h)]=_}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new tn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function $p(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function XE(n,e,t,r){return!!(io(n)===r||r!==qt&&$p(e,t,n))&&("**"===n.path||Hp(e,n,t).matched)}function eC(n,e,t){return 0===e.length&&!n.children[t]}const xd=!1;class yu{constructor(e){this.segmentGroup=e||null}}class Km{constructor(e){this.urlTree=e}}function al(n){return Tp(new yu(n))}function Ym(n){return Tp(new Km(n))}class Uv{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Zm(this.urlTree.root,[],[],this.config).segmentGroup,t=new tn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,_t.U)(a=>this.createUrlTree(Dd(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sl(a=>{if(a instanceof Km)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof yu?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,_t.U)(i=>this.createUrlTree(Dd(i),e.queryParams,e.fragment))).pipe(sl(i=>{throw i instanceof yu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,xd)}createUrlTree(e,t,r){const i=Lm(e);return new Ed(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(a=>new tn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,mn.D)(i).pipe(fu(a=>{const u=r.children[a],h=qm(t,a);return this.expandSegmentGroup(e,h,u,a).pipe((0,_t.U)(_=>({segment:_,outlet:a})))}),mc((a,u)=>(a[u.outlet]=u.segment,a),{}),pE())}expandSegment(e,t,r,i,a,u){return(0,mn.D)(r).pipe(fu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,u).pipe(sl(w=>{if(w instanceof yu)return dt(null);throw w}))),hu(h=>!!h),sl((h,_)=>{if(KE(h))return eC(t,i,a)?dt(new tn([],{})):al(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,u,h){return XE(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):al(t):al(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ym(a):this.lineralizeSegments(r,a).pipe((0,xn.z)(u=>{const h=new tn(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:A}=Hp(t,i,a);if(!h)return al(t);const x=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?Ym(x):this.lineralizeSegments(i,x).pipe((0,xn.z)(N=>this.expandSegment(e,t,r,N.concat(w),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Ad(r,e),r.loadChildren?(r._loadedRoutes?dt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,_t.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new tn(i,{})))):dt(new tn(i,{}))):Vv(t,r,i,e).pipe(_n(({matched:u,consumedSegments:h,remainingSegments:_})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,xn.z)(A=>{const x=A.injector??e,N=A.routes,{segmentGroup:H,slicedSegments:q}=Zm(t,h,_,N),fe=new tn(H.segments,H.children);if(0===q.length&&fe.hasChildren())return this.expandChildren(x,N,fe).pipe((0,_t.U)(pt=>new tn(h,pt)));if(0===N.length&&0===q.length)return dt(new tn(h,{}));const Ie=io(r)===a;return this.expandSegment(x,fe,N,q,Ie?qt:a,!0).pipe((0,_t.U)(ct=>new tn(h.concat(ct.segments),ct.children)))})):al(t)))}getChildConfig(e,t,r){return t.children?dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Lv(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?dt(!0):dt(i.map(u=>{const h=bc(u,n);return pu(function M1(n){return n&&Up(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Bp(),YE())}(e,t,r).pipe((0,xn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ki.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function tC(n){return Tp(BE(xd,3))}())):dt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[qt])return Tp(new d.vHH(4e3,xd));i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ed(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Fi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Fi(t.children,(h,_)=>{u[_]=this.createSegmentGroup(e,h,r,i)}),new tn(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,xd);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class jv{}class HA{constructor(e,t,r,i,a,u,h,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h,this.urlSerializer=_}recognize(){const e=Zm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,_t.U)(t=>{if(null===t)return null;const r=new Av([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new wa(r,t),a=new LE(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=OE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,mn.D)(Object.keys(r.children)).pipe(fu(i=>{const a=r.children[i],u=qm(t,i);return this.processSegmentGroup(e,u,a,i)}),mc((i,a)=>i&&a?(i.push(...a),i):null),function aA(n,e=!1){return(0,Xr.e)((t,r)=>{let i=0;t.subscribe((0,dr.x)(r,a=>{const u=n(a,i++);(u||e)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),gc(null),pE(),(0,_t.U)(i=>{if(null===i)return null;const a=Hv(i);return function rC(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,mn.D)(t).pipe(fu(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),hu(u=>!!u),sl(u=>{if(KE(u))return eC(r,i,a)?dt([]):dt(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!XE(t,r,i,a))return dt(null);let u;if("**"===t.path){const h=i.length>0?Rm(i).parameters:{},_=$v(r)+i.length;u=dt({snapshot:new Av(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qA(t),io(t),t.component??t._loadedComponent??null,t,Ns(r),_,oC(t),_),consumedSegments:[],remainingSegments:[]})}else u=Vv(r,t,i,e).pipe((0,_t.U)(({matched:h,consumedSegments:_,remainingSegments:w,parameters:A})=>{if(!h)return null;const x=$v(r)+_.length;return{snapshot:new Av(_,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qA(t),io(t),t.component??t._loadedComponent??null,t,Ns(r),x,oC(t),x),consumedSegments:_,remainingSegments:w}}));return u.pipe(_n(h=>{if(null===h)return dt(null);const{snapshot:_,consumedSegments:w,remainingSegments:A}=h;e=t._injector??e;const x=t._loadedInjector??e,N=function $A(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:q}=Zm(r,w,A,N.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution);if(0===q.length&&H.hasChildren())return this.processChildren(x,N,H).pipe((0,_t.U)(Ie=>null===Ie?null:[new wa(_,Ie)]));if(0===N.length&&0===q.length)return dt([new wa(_,[])]);const fe=io(t)===a;return this.processSegment(x,N,H,q,fe?qt:a).pipe((0,_t.U)(Ie=>null===Ie?null:[new wa(_,Ie)]))}))}}function iC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Hv(n){const e=[],t=new Set;for(const r of n){if(!iC(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Hv(r.children);e.push(new wa(r.value,i))}return e.filter(r=>!t.has(r))}function Ns(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $v(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function qA(n){return n.data||{}}function oC(n){return n.resolve||{}}function uC(n){return"string"==typeof n.title||null===n.title}function Jm(n){return _n(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,_t.U)(()=>e)):dt(e)})}let cC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[ro]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(dC)},providedIn:"root"}),n})(),dC=(()=>{class n extends cC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ks))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hC{}class ll extends class YA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Xm=new d.OlP("",{providedIn:"root",factory:()=>({})}),pC=new d.OlP("ROUTES");let e_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=pu(t.loadComponent()).pipe((0,Ki.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),fv(()=>{this.componentLoaders.delete(t)})),i=new fE(r,()=>new Vo.x).pipe(cv());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,A=!1;Array.isArray(h)?w=h:(_=h.create(t).injector,w=va(_.get(pC,[],d.XFs.Self|d.XFs.Optional)));return{routes:w.map(Fp),injector:_}}),fv(()=>{this.childrenLoaders.delete(r)})),u=new fE(a,()=>new Vo.x).pipe(cv());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return pu(t()).pipe((0,xn.z)(r=>r instanceof d.YKP||Array.isArray(r)?dt(r):(0,mn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QA{}class JA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Wv(n){throw n}function XA(n,e,t){return e.parse("/")}const eS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function qp(){const n=(0,d.f3M)(yE),e=(0,d.f3M)(Kh),t=(0,d.f3M)(Re),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(pC,{optional:!0})??[],u=(0,d.f3M)(Xm,{optional:!0})??{},h=(0,d.f3M)(dC),_=(0,d.f3M)(cC,{optional:!0}),w=(0,d.f3M)(QA,{optional:!0}),A=(0,d.f3M)(hC,{optional:!0}),x=new Yi(null,n,e,t,r,i,va(a));return w&&(x.urlHandlingStrategy=w),A&&(x.routeReuseStrategy=A),x.titleStrategy=_??h,function zv(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,x),x}let Yi=(()=>{class n{constructor(t,r,i,a,u,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Vo.x,this.errorHandler=Wv,this.malformedUriErrorHandler=XA,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>dt(void 0),this.urlHandlingStrategy=new JA,this.routeReuseStrategy=new ll,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(e_),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new RE(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new CA(N)),this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const x=u.get(d.R0b);this.isNgZoneEnabled=x instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function Sp(){return new Ed(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=SA(this.currentUrlTree,this.rootComponentType),this.transitions=new Uo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ks(i=>0!==i.id),(0,_t.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),_n(i=>{let a=!1,u=!1;return dt(i).pipe((0,Ki.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_n(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return tS(h.source)&&(this.browserUrlTree=h.extractedUrl),dt(h).pipe(_n(x=>{const N=this.transitions.getValue();return r.next(new jm(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),N!==this.transitions.getValue()?wd.E:Promise.resolve(x)}),function Bv(n,e,t,r){return _n(i=>function nC(n,e,t,r,i){return new Uv(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ki.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function Gv(n,e,t,r,i,a){return(0,xn.z)(u=>function B1(n,e,t,r,i,a,u="emptyOnly",h="legacy"){return new HA(n,e,t,r,i,u,h,a).recognize().pipe(_n(_=>null===_?function jA(n){return new Ar.y(e=>e.error(n))}(new jv):dt(_)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,a).pipe((0,_t.U)(h=>({...u,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ki.b)(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(H,x)}this.browserUrlTree=x.urlAfterRedirects}const N=new Wt(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(N)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:H,source:q,restoredState:fe,extras:Ie}=h,Xe=new jm(N,this.serializeUrl(H),q,fe);r.next(Xe);const ct=SA(H,this.rootComponentType).snapshot;return dt(i={...h,targetSnapshot:ct,urlAfterRedirects:H,extras:{...Ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),wd.E}),(0,Ki.b)(h=>{const _=new SE(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,_t.U)(h=>i={...h,guards:kv(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function k1(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?dt({...t,guardsResult:!0}):function N1(n,e,t,r){return(0,mn.D)(n).pipe((0,xn.z)(i=>function Ec(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(h=>{const _=Wm(e)??i,w=bc(h,_);return pu(function zE(n){return n&&Up(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(hu())})).pipe(Bp()):dt(!0)}(i.component,i.route,t,e,r)),hu(i=>!0!==i,!0))}(u,r,i,n).pipe((0,xn.z)(h=>h&&function WE(n){return"boolean"==typeof n}(h)?function O1(n,e,t,r){return(0,mn.D)(e).pipe(fu(i=>Mm(function L1(n,e){return null!==n&&e&&e(new IA(n)),dt(!0)}(i.route.parent,r),function F1(n,e){return null!==n&&e&&e(new DA(n)),dt(!0)}(i.route,r),function U1(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function Nv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>dE(()=>dt(u.guards.map(_=>{const w=Wm(u.node)??t,A=bc(_,w);return pu(function R1(n){return n&&Up(n.canActivateChild)}(A)?A.canActivateChild(r,n):w.runInContext(()=>A(r,n))).pipe(hu())})).pipe(Bp())));return dt(a).pipe(Bp())}(n,i.path,t),function V1(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>dE(()=>{const u=Wm(e)??t,h=bc(a,u);return pu(function VA(n){return n&&Up(n.canActivate)}(h)?h.canActivate(e,n):u.runInContext(()=>h(e,n))).pipe(hu())}));return dt(i).pipe(Bp())}(n,i.route,t))),hu(i=>!0!==i,!0))}(r,a,n,e):dt(h)),(0,_t.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Ki.b)(h=>{if(i.guardsResult=h.guardsResult,yc(h.guardsResult))throw UE(0,h.guardsResult);const _=new xE(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),ks(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Jm(h=>{if(h.guards.canActivateChecks.length)return dt(h).pipe((0,Ki.b)(_=>{const w=new ME(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),_n(_=>{let w=!1;return dt(_).pipe(function aC(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,mn.D)(i).pipe(fu(u=>function WA(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!uC(i)&&(a[ro]=i.title),function zA(n,e,t,r){const i=function ZA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return dt({});const a={};return(0,mn.D)(i).pipe((0,xn.z)(u=>function lC(n,e,t,r){const i=Wm(e)??r,a=bc(n,i);return pu(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(hu(),(0,Ki.b)(h=>{a[u]=h}))),hv(1),gE(a),sl(u=>KE(u)?wd.E:Tp(u)))}(a,n,e,r).pipe((0,_t.U)(u=>(n._resolvedData=u,n.data=OE(n,t).resolve,i&&uC(i)&&(n.data[ro]=i.title),null)))}(u.route,r,n,e)),(0,Ki.b)(()=>a++),hv(1),(0,xn.z)(u=>a===i.length?dt(t):wd.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ki.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Ki.b)(_=>{const w=new EA(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),Jm(h=>{const _=w=>{const A=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Ki.b)(x=>{w.component=x}),(0,_t.U)(()=>{})));for(const x of w.children)A.push(..._(x));return A};return uE(_(h.targetSnapshot.root)).pipe(gc(),du(1))}),Jm(()=>this.afterPreactivation()),(0,_t.U)(h=>{const _=function xA(n,e,t){const r=Zh(n,e._root,t?t._root:void 0);return new NE(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:_}}),(0,Ki.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new x1(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Ki.b)({next(){a=!0},complete(){a=!0}}),fv(()=>{a||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),sl(h=>{if(u=!0,jE(h)){xv(h)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Hm(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(_),xv(h)){const w=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tS(i.source)};this.scheduleNavigation(w,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new AE(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return wd.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Fp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,A=_?this.currentUrlTree.fragment:u;let x=null;switch(h){case"merge":x={...this.currentUrlTree.queryParams,...a};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),_A(w,this.currentUrlTree,t,x,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=yc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zv(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...eS}:!1===r?{...n_}:r,yc(t))return Pm(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Pm(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Td(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let h,_,w;u?(h=u.resolve,_=u.reject,w=u.promise):w=new Promise((N,H)=>{h=N,_=H});const A=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:A,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Hm(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return qp()},providedIn:"root"}),n})();function tS(n){return"imperative"!==n}let r_=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Vo.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yi),d.Y36(Wh),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),Wp=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Vo.x,this.subscription=t.events.subscribe(a=>{a instanceof Td&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){return!!(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yi),d.Y36(Wh),d.Y36(ge))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),Kv=(()=>{class n{constructor(t,r,i,a,u,h){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=u,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof Td&&this.update()})}ngAfterContentInit(){dt(this.links.changes,this.linksWithHrefs.changes,dt(null)).pipe((0,Bh.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,mn.D)(t).pipe((0,Bh.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function gC(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yi),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(r_,8),d.Y36(Wp,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,r_,5),d.Suo(i,Wp,5)),2&t){let a;d.iGM(a=d.CRH())&&(r.links=a),d.iGM(a=d.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class i_{}let s_=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(ks(t=>t instanceof Td),fu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,h=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,mn.D)(i).pipe((0,Bh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):dt(null);const a=i.pipe((0,xn.z)(u=>null===u?dt(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,mn.D)([a,u]).pipe((0,Bh.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yi),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(i_),d.LFG(e_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Md=new d.OlP("");let mC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Td&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof AA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new AA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Jh(n,e){return{\u0275kind:n,\u0275providers:e}}function Rd(n){return[{provide:pC,multi:!0,useValue:n}]}function rS(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Yi),i=n.get(yC);1===n.get(vC)&&r.initialNavigation(),n.get(Qv,null,d.XFs.Optional)?.setUpPreloading(),n.get(Md,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const yC=new d.OlP("",{factory:()=>new Vo.x}),vC=new d.OlP("",{providedIn:"root",factory:()=>1});const Qv=new d.OlP("");function Jv(n){return Jh(0,[{provide:Qv,useExisting:s_},{provide:i_,useExisting:n}])}const wC=new d.OlP("ROUTER_FORROOT_GUARD"),aS=[Re,{provide:yE,useClass:_v},{provide:Yi,useFactory:qp},Kh,{provide:Wh,useFactory:function _C(n){return n.routerState.root},deps:[Yi]},e_];function lS(){return new d.PXZ("Router",Yi)}let bC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[aS,[],Rd(t),{provide:wC,useFactory:G1,deps:[[Yi,new d.FiY,new d.tp0]]},{provide:Xm,useValue:r||{}},r?.useHash?{provide:ge,useClass:qe}:{provide:ge,useClass:et},{provide:Md,useFactory:()=>{const n=(0,d.f3M)(Yi),e=(0,d.f3M)(Va),t=(0,d.f3M)(Xm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new mC(n,e,t)}},r?.preloadingStrategy?Jv(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:lS},r?.initialNavigation?zp(r):[],[{provide:EC,useFactory:rS},{provide:d.tb,multi:!0,useExisting:EC}]]}}static forChild(t){return{ngModule:n,providers:[Rd(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wC,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[GE]}),n})();function G1(n){return"guarded"}function zp(n){return["disabled"===n.initialNavigation?Jh(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Yi);return()=>{e.setUpLocationChangeListener()}}},{provide:vC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jh(2,[{provide:vC,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const u=e.get(Yi),h=e.get(yC);(function i(a){e.get(Yi).events.pipe(ks(h=>h instanceof Td||h instanceof Hm||h instanceof AE),(0,_t.U)(h=>h instanceof Td||h instanceof Hm&&(0===h.code||1===h.code)&&null),ks(h=>null!==h),du(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),u.afterPreactivation=()=>(a(!0),r||h.closed?dt(void 0):h),u.initialNavigation()}))}}]).\u0275providers:[]]}const EC=new d.OlP("");let a_=(()=>{class n{constructor(){localStorage.getItem("actores")||localStorage.setItem("actores",JSON.stringify([{nombre:"Emilia",apellido:"Clarke",edad:35,pais:{flags:{svg:"https://flagcdn.com/gb.svg"},capital:"London",population:67215293,translations:{spa:{common:"Reino Unido"}}}},{nombre:"Javier",apellido:"Bardem",edad:53,pais:{flags:{svg:"https://flagcdn.com/es.svg"},capital:"Madrid",population:47351567,translations:{spa:{common:"Espa\xf1a"}}}},{nombre:"Ricardo",apellido:"Dar\xedn",edad:65,pais:{flags:{svg:"https://flagcdn.com/ar.svg"},capital:"Buenos Aires",population:45376763,translations:{spa:{common:"Argentina"}}}},{nombre:"Johnny",apellido:"Depp",edad:59,pais:{flags:{svg:"https://flagcdn.com/us.svg"},capital:"Washington, D.C.",population:329484123,translations:{spa:{common:"Estados Unidos"}}}},{nombre:"Arnold",apellido:"Schwarzenegger",edad:59,pais:{flags:{svg:"https://flagcdn.com/us.svg"},capital:"Washington, D.C.",population:329484123,translations:{spa:{common:"Estados Unidos"}}}},{nombre:"Marlon",apellido:"Brando",edad:59,pais:{flags:{svg:"https://flagcdn.com/us.svg"},capital:"Washington, D.C.",population:329484123,translations:{spa:{common:"Estados Unidos"}}}},{nombre:"Sigourney",apellido:"Weaver",edad:59,pais:{flags:{svg:"https://flagcdn.com/us.svg"},capital:"Washington, D.C.",population:329484123,translations:{spa:{common:"Estados Unidos"}}}},{nombre:"Tom",apellido:"Hulce",edad:59,pais:{flags:{svg:"https://flagcdn.com/us.svg"},capital:"Washington, D.C.",population:329484123,translations:{spa:{common:"Estados Unidos"}}}}])),this.arrayActores=JSON.parse(localStorage.getItem("actores"))}get ListadoDeActores(){return this.arrayActores}guardarActorEnListado(t){this.arrayActores?.push(t),localStorage.setItem("actores",JSON.stringify(this.arrayActores))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ul(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr",3),d.NdJ("click",function(){const i=d.CHM(t),a=i.$implicit,u=i.index,h=d.oxw();return d.KtG(h.mostrarClickeado(a,u+1))}),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._UZ(6,"img",4),d._uU(7),d.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.Q6J("ngClass",i.currentRowNumber!==r+1?"":"table-success"),d.xp6(2),d.AsE(" ",t.nombre," ",t.apellido," "),d.xp6(2),d.hij(" ",t.edad," "),d.xp6(2),d.s9C("src",t.pais.flags.svg,d.LSH),d.xp6(1),d.hij(" ",t.pais.translations.spa.common," ")}}let ef=(()=>{class n{constructor(){this.seleccioneUnActor=new d.vpe,this.selectedRow="",this.currentRowNumber=0}ngOnInit(){}seleccionarActor(t){this.seleccioneUnActor.emit(t)}guardarActorEnListado(){this.arrayActores?.push(this.actorRecibido),localStorage.setItem("actores",JSON.stringify(this.arrayActores))}listadoActores(){}mostrarClickeado(t,r){this.currentRowNumber=r,this.seleccionarActor(t),console.log(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-listado"]],inputs:{actorRecibido:"actorRecibido",arrayActores:"arrayActores"},outputs:{seleccioneUnActor:"seleccioneUnActor"},decls:11,vars:1,consts:[[1,"table","table-bordered","table-hover"],["id","actores"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[2,"width","26px","height","20px",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),d._uU(4,"Nombre"),d.qZA(),d.TgZ(5,"th"),d._uU(6,"Edad"),d.qZA(),d.TgZ(7,"th"),d._uU(8,"Pais"),d.qZA()()(),d.TgZ(9,"tbody",1),d.YNc(10,ul,8,6,"tr",2),d.qZA()()),2&t&&(d.xp6(10),d.Q6J("ngForOf",r.arrayActores))},dependencies:[un,ai]}),n})();var ei=V(4986),Dc=V(5032);function so(n,e){return e?t=>Mm(e.pipe(du(1),function l_(){return(0,Xr.e)((n,e)=>{n.subscribe((0,dr.x)(e,Dc.Z))})}()),t.pipe(so(n))):(0,xn.z)((t,r)=>n(t,r).pipe(du(1),gE(t)))}var Xv=V(3532);class kd{}class Nd{}class Os{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Os?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Os;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Os?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===a.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class sf{encodeKey(e){return ew(e)}encodeValue(e){return ew(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const IC=/%(\d[a-f0-9])/gi,DC={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ew(n){return encodeURIComponent(n).replace(IC,(e,t)=>DC[t]??e)}function Kp(n){return`${n}`}class vu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function af(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[u,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(u)||[];_.push(h),t.set(u,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Kp):[Kp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new vu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Kp(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Kp(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class TC{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function tw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function SC(n){return typeof Blob<"u"&&n instanceof Blob}function xC(n){return typeof FormData<"u"&&n instanceof FormData}class Yp{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function AC(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Os),this.context||(this.context=new TC),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new vu,this.urlWithParams=t}serializeBody(){return null===this.body?null:tw(this.body)||SC(this.body)||xC(this.body)||function MC(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xC(this.body)?null:SC(this.body)?this.body.type||null:tw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,w=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((x,N)=>x.set(N,e.setHeaders[N]),_)),e.setParams&&(w=Object.keys(e.setParams).reduce((x,N)=>x.set(N,e.setParams[N]),w)),new Yp(t,r,a,{params:w,headers:_,context:A,reportProgress:h,responseType:i,withCredentials:u})}}var Hr=(()=>((Hr=Hr||{})[Hr.Sent=0]="Sent",Hr[Hr.UploadProgress=1]="UploadProgress",Hr[Hr.ResponseHeader=2]="ResponseHeader",Hr[Hr.DownloadProgress=3]="DownloadProgress",Hr[Hr.Response=4]="Response",Hr[Hr.User=5]="User",Hr))();class Qp{constructor(e,t=200,r="OK"){this.headers=e.headers||new Os,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Jp extends Qp{constructor(e={}){super(e),this.type=Hr.ResponseHeader}clone(e={}){return new Jp({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class u_ extends Qp{constructor(e={}){super(e),this.type=Hr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new u_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xp extends Qp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function lf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let uf=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Yp)a=t;else{let _,w;_=i.headers instanceof Os?i.headers:new Os(i.headers),i.params&&(w=i.params instanceof vu?i.params:new vu({fromObject:i.params})),a=new Yp(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=dt(a).pipe(fu(_=>this.handler.handle(_)));if(t instanceof Yp||"events"===i.observe)return u;const h=u.pipe(ks(_=>_ instanceof u_));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,_t.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,_t.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new vu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,lf(i,r))}post(t,r,i={}){return this.request("POST",t,lf(i,r))}put(t,r,i={}){return this.request("PUT",t,lf(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kd))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class RC{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const c_=new d.OlP("HTTP_INTERCEPTORS");let nw=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const NC=/^\)\]\}',?\n/;let rw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ar.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((H,q)=>i.setRequestHeader(H,q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const H=t.detectContentTypeHeader();null!==H&&i.setRequestHeader("Content-Type",H)}if(t.responseType){const H=t.responseType.toLowerCase();i.responseType="json"!==H?H:"text"}const a=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const H=i.statusText||"OK",q=new Os(i.getAllResponseHeaders()),fe=function OC(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new Jp({headers:q,status:i.status,statusText:H,url:fe}),u},_=()=>{let{headers:H,status:q,statusText:fe,url:Ie}=h(),Xe=null;204!==q&&(Xe=typeof i.response>"u"?i.responseText:i.response),0===q&&(q=Xe?200:0);let ct=q>=200&&q<300;if("json"===t.responseType&&"string"==typeof Xe){const pt=Xe;Xe=Xe.replace(NC,"");try{Xe=""!==Xe?JSON.parse(Xe):null}catch(gt){Xe=pt,ct&&(ct=!1,Xe={error:gt,text:Xe})}}ct?(r.next(new u_({body:Xe,headers:H,status:q,statusText:fe,url:Ie||void 0})),r.complete()):r.error(new Xp({error:Xe,headers:H,status:q,statusText:fe,url:Ie||void 0}))},w=H=>{const{url:q}=h(),fe=new Xp({error:H,status:i.status||0,statusText:i.statusText||"Unknown Error",url:q||void 0});r.error(fe)};let A=!1;const x=H=>{A||(r.next(h()),A=!0);let q={type:Hr.DownloadProgress,loaded:H.loaded};H.lengthComputable&&(q.total=H.total),"text"===t.responseType&&!!i.responseText&&(q.partialText=i.responseText),r.next(q)},N=H=>{let q={type:Hr.UploadProgress,loaded:H.loaded};H.lengthComputable&&(q.total=H.total),r.next(q)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",x),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:Hr.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",x),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(us))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const iw=new d.OlP("XSRF_COOKIE_NAME"),sw=new d.OlP("XSRF_HEADER_NAME");class FC{}let ow=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Wo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(d.Lbi),d.LFG(iw))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),eg=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(FC),d.LFG(sw))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),LC=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(c_,[]);this.chain=r.reduceRight((i,a)=>new RC(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nd),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),VC=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:eg,useClass:nw}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:iw,useValue:t.cookieName}:[],t.headerName?{provide:sw,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eg,{provide:c_,useExisting:eg,multi:!0},{provide:FC,useClass:ow},{provide:iw,useValue:"XSRF-TOKEN"},{provide:sw,useValue:"X-XSRF-TOKEN"}]}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uf,{provide:kd,useClass:LC},rw,{provide:Nd,useExisting:rw}],imports:[VC.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),BC=(()=>{class n{constructor(t){this.http=t,this.url="https://restcountries.com/v3.1/alpha?codes="}traerPaises(t){return this.http.get(this.url+t)}traerUnPais(t){this.http.get(this.url+t).subscribe(r=>(this.elemento=r,function rf(n,e=ei.z){const t=function nf(n=0,e,t=ei.P){let r=-1;return null!=e&&((0,Xv.K)(e)?t=e:r=e),new Ar.y(i=>{let a=function tf(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e);so(()=>t)}(1e3),console.log(this.elemento),this.elemento))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function W1(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr",3),d.NdJ("click",function(){const i=d.CHM(t),a=i.$implicit,u=i.index,h=d.oxw();return d.KtG(h.mostrarClickeado(a,u+1))}),d.TgZ(1,"td"),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.Q6J("ngClass",i.currentRowNumber!==r+1?"":"table-success"),d.xp6(2),d.AsE(" ",t.flag," - ",t.translations.spa.common," ")}}let ES=(()=>{class n{constructor(t){this.paisesServ=t,this.enviarPais=new d.vpe,this.selectedRow="",this.codPaises="ar,mx,us,es,gb,au,it",this.currentRowNumber=0,this.paises=this.paisesServ.traerPaises(this.codPaises)}ngOnInit(){}mostrarClickeado(t,r){this.currentRowNumber=r,this.enviarPais.emit(t),console.log(t.translations.spa.common)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(BC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-paises"]],outputs:{enviarPais:"enviarPais"},decls:4,vars:3,consts:[[1,"table","table-bordered","table-hover"],["id","paises"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"tbody",1),d.YNc(2,W1,3,3,"tr",2),d.ALo(3,"async"),d.qZA()()),2&t&&(d.xp6(2),d.Q6J("ngForOf",d.lcZ(3,1,r.paises)))},dependencies:[un,ai,vo]}),n})(),CS=(()=>{class n{constructor(t){this.servicioActores=t,this.enviarActor=new d.vpe,this.nuevoActor={},this.nombre="",this.apellido="",this.nombrePais="Pais"}ngOnInit(){}actualizarPais(t){this.paisSeleccionado=t,this.nombrePais=t.translations.spa.common}guardarActor(){this.nuevoActor={},this.nuevoActor.nombre=this.nombre,this.nuevoActor.apellido=this.apellido,this.nuevoActor.edad=this.edad,this.nuevoActor.pais=this.paisSeleccionado,console.log(this.nuevoActor),this.servicioActores.guardarActorEnListado(this.nuevoActor)}spacesValidator(t){return t.value.includes(" ")?{containsSpaces:!0}:null}listadoDeActores(){return this.servicioActores.ListadoDeActores}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(a_))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-alta"]],inputs:{paisRecibido:"paisRecibido"},outputs:{enviarActor:"enviarActor"},decls:26,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],[3,"arrayActores"],[1,"row","block"],[1,"col"],[1,"form-group","col"],["type","text","name","nombre","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","apellido","placeholder","Apellido",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","edad","placeholder","Edad",1,"form-control",3,"ngModel","ngModelChange"],["type","text","disabled","",1,"form-control",3,"placeholder"],[3,"enviarPais"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"p")(2,"p"),d.TgZ(3,"div",1)(4,"div",2),d._UZ(5,"app-actor-listado",3),d.qZA(),d.TgZ(6,"div",2)(7,"form")(8,"div",4)(9,"div",5)(10,"div",6)(11,"input",7),d.NdJ("ngModelChange",function(a){return r.nombre=a}),d.qZA()(),d._UZ(12,"p"),d.TgZ(13,"div",6)(14,"input",8),d.NdJ("ngModelChange",function(a){return r.apellido=a}),d.qZA()(),d._UZ(15,"p"),d.TgZ(16,"div",6)(17,"input",9),d.NdJ("ngModelChange",function(a){return r.edad=a}),d.qZA()(),d._UZ(18,"p"),d.TgZ(19,"div",6),d._UZ(20,"input",10),d.qZA()(),d.TgZ(21,"div",5)(22,"app-tabla-paises",11),d.NdJ("enviarPais",function(a){return r.actualizarPais(a)}),d.qZA()()(),d.TgZ(23,"div",12)(24,"button",13),d.NdJ("click",function(){return r.guardarActor()}),d._uU(25,"Guardar"),d.qZA()()()()()()),2&t&&(d.xp6(5),d.Q6J("arrayActores",r.listadoDeActores()),d.xp6(6),d.Q6J("ngModel",r.nombre),d.xp6(3),d.Q6J("ngModel",r.apellido),d.xp6(3),d.Q6J("ngModel",r.edad),d.xp6(3),d.s9C("placeholder",r.nombrePais))},dependencies:[_a,eu,bh,Eh,Rh,ma,ef,ES]}),n})(),jC=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"Bienvenido works!"),d.qZA())}}),n})(),tg=(()=>{class n{constructor(t){this.httpClient=t,this.listadoPeliculasPorDefecto=[{id:"340",nombre:"El Padrino",tipo:"Drama",estreno:1972,cantPublico:1500,actor:"Marlon Brando",foto:"https://thumbsnap.com/i/mebTtmC5.jpg"},{id:"342",nombre:"Terminator",tipo:"Ciencia Ficci\xf3n",estreno:1984,cantPublico:1500,actor:"Arnold Schwarzenegger",foto:"https://thumbsnap.com/i/C8rwpedw.jpg"},{id:"741",nombre:"Alien",tipo:"Terror",estreno:1979,cantPublico:1500,actor:"Sigourney Weaver",foto:"https://thumbsnap.com/i/LAL7ZV8H.jpg"},{id:"741",nombre:"Charly y la Fabrica de Chocolates",tipo:"Musical",estreno:1979,cantPublico:1500,actor:"Johnny Depp",foto:"https://thumbsnap.com/i/LAL7ZV8H.jpg"},{id:"693",nombre:"El J\xf3ven Manos de Tijeras",tipo:"Terror",estreno:1979,cantPublico:1500,actor:"Johnny Depp",foto:"https://thumbsnap.com/i/LAL7ZV8H.jpg"},{id:"287",nombre:"Piratas del Caribe",tipo:"Aventura",estreno:1979,cantPublico:1500,actor:"Johnny Depp",foto:"https://thumbsnap.com/i/LAL7ZV8H.jpg"},{id:"578",nombre:"9 Reinas",tipo:"Drama",estreno:1979,cantPublico:1500,actor:"Ricardo Dar\xedn",foto:"https://thumbsnap.com/i/LAL7ZV8H.jpg"},{id:"578",nombre:"El Secreto de sus Ojos",tipo:"Terror",estreno:1979,cantPublico:1500,actor:"Ricardo Dar\xedn",foto:"https://thumbsnap.com/i/LAL7ZV8H.jpg"},{id:"999",nombre:"Amadeus",tipo:"Musical",estreno:1984,cantPublico:1500,actor:"Tom Hulce",foto:"https://thumbsnap.com/i/hk6zkQro.jpg"}],localStorage.getItem("peliculas")||localStorage.setItem("peliculas",JSON.stringify(this.listadoPeliculasPorDefecto)),this.listadoPeliculas=JSON.parse(localStorage.getItem("peliculas"))}get ListadoDePeliculas(){return this.listadoPeliculas}ListadoDePeliculasFirebase(){}guardarActorEnListado(t){this.listadoPeliculas?.push(t),localStorage.setItem("peliculas",JSON.stringify(this.listadoPeliculas))}fileExists(t){return this.httpClient.get(t).pipe((0,_t.U)(()=>!0),sl(()=>dt(!1)))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Lt=V(5813);function d_(){return(0,Xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,dr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function HC(n,e=pc.y){return n=n??IS,(0,Xr.e)((t,r)=>{let i,a=!0;t.subscribe((0,dr.x)(r,u=>{const h=e(u);(a||!n(i,h))&&(a=!1,i=h,r.next(u))}))})}function IS(n,e){return n===e}var It,ti=V(2011),h_=(V(3704),V(3942)),Te=V(5861),ni=V(9681),ba=V(4859),Ea=V(1877),L=V(2090),DS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cl={},f_=f_||{},jt=DS||self;function oo(){}function p_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ng(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ao="closure_uid_"+(1e9*Math.random()>>>0),Ca=0;function $C(n,e,t){return n.call.apply(n.bind,arguments)}function GC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Qi(n,e,t){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$C:GC).apply(null,arguments)}function g_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Li(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Tc(){this.s=this.s,this.o=this.o}var rg={};Tc.prototype.s=!1,Tc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function dl(n){return Object.prototype.hasOwnProperty.call(n,ao)&&n[ao]||(n[ao]=++Ca)}(this);delete rg[n]}},Tc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function m_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function WC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(p_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Vi.prototype.h=function(){this.defaultPrevented=!0};var zC=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",oo,e),jt.removeEventListener("test",oo,e)}catch{}return n}();function Od(n){return/^[\s\xa0]*$/.test(n)}var ZC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function __(n,e){return n<e?-1:n>e?1:0}function ig(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function Bo(n){return-1!=ig().indexOf(n)}function cf(n){return cf[" "](n),n}cf[" "]=oo;var w_,n,KC=Bo("Opera"),Fd=Bo("Trident")||Bo("MSIE"),y_=Bo("Edge"),v_=y_||Fd,uw=Bo("Gecko")&&!(-1!=ig().toLowerCase().indexOf("webkit")&&!Bo("Edge"))&&!(Bo("Trident")||Bo("MSIE"))&&!Bo("Edge"),YC=-1!=ig().toLowerCase().indexOf("webkit")&&!Bo("Edge");function cw(){var n=jt.document;return n?n.documentMode:void 0}e:{var dw="",hw=(n=ig(),uw?/rv:([^\);]+)(\)|;)/.exec(n):y_?/Edge\/([\d\.]+)/.exec(n):Fd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YC?/WebKit\/(\S+)/.exec(n):KC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(hw&&(dw=hw?hw[1]:""),Fd){var fw=cw();if(null!=fw&&fw>parseFloat(dw)){w_=String(fw);break e}}w_=dw}var TS={};var SS=jt.document&&Fd&&(cw()||parseInt(w_,10))||void 0;function sg(n,e){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uw){e:{try{cf(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sg.X.h.call(this)}}Li(sg,Vi);var xS={2:"touch",3:"pen",4:"mouse"};sg.prototype.h=function(){sg.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var og="closure_listenable_"+(1e6*Math.random()|0),MS=0;function RS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++MS,this.ba=this.ea=!1}function b_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function gw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function JC(n){const e={};for(const t in n)e[t]=n[t];return e}const XC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<XC.length;a++)t=XC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ag(n){this.src=n,this.g={},this.h=0}function E_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=qC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(b_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function C_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}ag.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=C_(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new RS(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var I_="closure_lm_"+(1e6*Math.random()|0),D_={};function _w(n,e,t,r,i){if(r&&r.once)return vw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)_w(n,e[a],t,r,i);return null}return t=lg(t),n&&n[og]?n.N(e,t,ng(r)?!!r.capture:!!r,i):yw(n,e,t,!1,r,i)}function yw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=ng(i)?!!i.capture:!!i,h=Ac(n);if(h||(n[I_]=h=new ag(n)),(t=h.add(e,t,r,u,a)).proxy)return t;if(r=function eI(){const e=PS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zC||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(tI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)vw(n,e[a],t,r,i);return null}return t=lg(t),n&&n[og]?n.O(e,t,ng(r)?!!r.capture:!!r,i):yw(n,e,t,!0,r,i)}function ww(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)ww(n,e[a],t,r,i);else r=ng(r)?!!r.capture:!!r,t=lg(t),n&&n[og]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=C_(a=n.g[e],t,r,i))&&(b_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ac(n))&&(e=n.g[e.toString()],n=-1,e&&(n=C_(e,t,r,i)),(t=-1<n?e[n]:null)&&wu(t))}function wu(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[og])E_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ac(e))?(E_(t,n),0==t.h&&(t.src=null,e[I_]=null)):b_(n)}}}function tI(n){return n in D_?D_[n]:D_[n]="on"+n}function PS(n,e){if(n.ba)n=!0;else{e=new sg(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&wu(n),n=t.call(r,e)}return n}function Ac(n){return(n=n[I_])instanceof ag?n:null}var nI="__closure_events_fn_"+(1e9*Math.random()>>>0);function lg(n){return"function"==typeof n?n:(n[nI]||(n[nI]=function(e){return n.handleEvent(e)}),n[nI])}function Ui(){Tc.call(this),this.i=new ag(this),this.P=this,this.I=null}function Ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Vi(e,n);else if(e instanceof Vi)e.target=e.target||n;else{var i=e;mw(e=new Vi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=ug(u,r,!0,e)&&i}if(i=ug(u=e.g=n,r,!0,e)&&i,i=ug(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ug(u=e.g=t[a],r,!1,e)&&i}function ug(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ba&&u.capture==t){var h=u.listener,_=u.ha||u.src;u.ea&&E_(n.i,u),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Li(Ui,Tc),Ui.prototype[og]=!0,Ui.prototype.removeEventListener=function(n,e,t,r){ww(this,n,e,t,r)},Ui.prototype.M=function(){if(Ui.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)b_(t[r]);delete n.g[e],n.h--}}this.I=null},Ui.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rI=jt.JSON.stringify;function kt(){var n=OS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hf,iI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new NS,n=>n.reset());class NS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function df(n){jt.setTimeout(()=>{throw n},0)}function sI(n,e){hf||function T_(){var n=jt.Promise.resolve(void 0);hf=function(){n.then(oI)}}(),hr||(hf(),hr=!0),OS.add(n,e)}var hr=!1,OS=new class kS{constructor(){this.h=this.g=null}add(e,t){const r=iI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function oI(){for(var n;n=kt();){try{n.h.call(n.g)}catch(t){df(t)}var e=iI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hr=!1}function cg(n,e){Ui.call(this),this.h=n||1,this.g=e||jt,this.j=Qi(this.kb,this),this.l=Date.now()}function bw(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function A_(n,e,t){if("function"==typeof n)t&&(n=Qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function Ew(n){n.g=A_(()=>{n.g=null,n.i&&(n.i=!1,Ew(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Li(cg,Ui),(It=cg.prototype).ca=!1,It.R=null,It.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ei(this,"tick"),this.ca&&(bw(this),this.start()))}},It.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){cg.X.M.call(this),bw(this),delete this.g};class aI extends Tc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ew(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ff(n){Tc.call(this),this.h=n,this.g={}}Li(ff,Tc);var lI=[];function uI(n,e,t,r){Array.isArray(t)||(t&&(lI[0]=t.toString()),t=lI);for(var i=0;i<t.length;i++){var a=_w(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function cI(n){gw(n.g,function(e,t){this.g.hasOwnProperty(t)&&wu(e)},n),n.g={}}function Sc(){this.g=!0}function pf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return rI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ff.prototype.M=function(){ff.X.M.call(this),cI(this)},ff.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sc.prototype.Aa=function(){this.g=!1},Sc.prototype.info=function(){};var xc={},Cw=null;function x_(){return Cw=Cw||new Ui}function gf(n){Vi.call(this,xc.Oa,n)}function bu(n){const e=x_();Ei(e,new gf(e,n))}function hI(n,e){Vi.call(this,xc.STAT_EVENT,n),this.stat=e}function ys(n){const e=x_();Ei(e,new hI(e,n))}function fI(n,e){Vi.call(this,xc.Pa,n),this.size=e}function mf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}xc.Oa="serverreachability",Li(gf,Vi),xc.STAT_EVENT="statevent",Li(hI,Vi),xc.Pa="timingevent",Li(fI,Vi);var dg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},Iw={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dw(){}function pI(){}Dw.prototype.h=null;var _I,hg={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function gI(){Vi.call(this,"d")}function mI(){Vi.call(this,"c")}function Aw(){}function _f(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ff(this),this.O=VS,this.T=new cg(n=v_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new fg}function fg(){this.i=null,this.g="",this.h=!1}Li(gI,Vi),Li(mI,Vi),Li(Aw,Dw),Aw.prototype.g=function(){return new XMLHttpRequest},Aw.prototype.i=function(){return{}},_I=new Aw;var VS=45e3,Sw={},pg={};function Ld(n,e,t){n.K=1,n.v=P_(Da(e)),n.s=t,n.P=!0,yI(n,null)}function yI(n,e){n.F=Date.now(),gg(n),n.A=Da(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Nw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new fg,n.g=Qw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new aI(Qi(n.Ka,n,n.g),n.N)),uI(n.S,n.g,"readystatechange",n.hb),e=n.H?JC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),bu(1),function FS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var A=w[0];w=w[1];var x=A.split("_");u=2<=x.length&&"type"==x[1]?u+(A+"=")+w+"&":u+(A+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function vI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function wI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=US(n,t),i==pg){4==e&&(n.o=4,ys(14),r=!1),pf(n.j,n.m,null,"[Incomplete Response]");break}if(i==Sw){n.o=4,ys(15),pf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}pf(n.j,n.m,i,null),Mw(n,i)}vI(n)&&i!=pg&&i!=Sw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ys(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zw(e),e.K=!0,ys(11))):(pf(n.j,n.m,t,"[Invalid Chunked Response]"),Ia(n),mg(n))}function US(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?pg:(t=Number(e.substring(t,r)),isNaN(t)?Sw:(r+=1)+t>e.length?pg:(e=e.substr(r,t),n.C=r+t,e))}function gg(n){n.V=Date.now()+n.O,xw(n,n.O)}function xw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=mf(Qi(n.fb,n),e)}function M_(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function mg(n){0==n.l.G||n.I||UI(n.l,n)}function Ia(n){M_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bw(n.T),cI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Mw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wg(t.h,n)))if(!n.J&&wg(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;F_(t),Ww(t)}zw(t),ys(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=mf(Qi(t.bb,t),6e3));if(1>=AI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ta(t,11)}else if((n.J||t.g==n)&&F_(t),!Od(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const A=w[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const x=w[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.J=r=1.5*N,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const q=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.h;a.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(bg(a,a.h),a.h=null))}if(r.D){const fe=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.za=fe,fr(r.F,r.D,fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=Yw(r,r.H?r.ka:null,r.V),u.J){Fw(r.h,u);var h=u,_=r.J;_&&h.setTimeout(_),h.B&&(M_(h),gg(h)),r.g=u}else LI(r);0<t.i.length&&O_(t)}else"stop"!=w[0]&&"close"!=w[0]||Ta(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ta(t,7):qw(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}bu(4)}catch{}}function Rw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(p_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function BS(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(p_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function bI(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(p_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(It=_f.prototype).setTimeout=function(n){this.O=n},It.hb=function(n){n=n.target;const e=this.L;e&&3==Eu(n)?e.l():this.Ka(n)},It.Ka=function(n){try{if(n==this.g)e:{const A=Eu(this.g);var e=this.g.Ea();const x=this.g.aa();if(!(3>A)&&(3!=A||v_||this.g&&(this.h.h||this.g.fa()||PI(this.g)))){this.I||4!=A||7==e||bu(8==e||0>=x?3:2),M_(this);var t=this.g.aa();this.Y=t;t:if(vI(this)){var r=PI(this.g);n="";var i=r.length,a=4==Eu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ia(this),mg(this);var u="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function LS(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Od(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ys(12),Ia(this),mg(this);break e}pf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mw(this,t)}this.P?(wI(this,A,u),v_&&this.i&&3==A&&(uI(this.S,this.T,"tick",this.gb),this.T.start())):(pf(this.j,this.m,u,null),Mw(this,u)),4==A&&Ia(this),this.i&&!this.I&&(4==A?UI(this.l,this):(this.i=!1,gg(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ys(12)):(this.o=0,ys(13)),Ia(this),mg(this)}}}catch{}},It.gb=function(){if(this.g){var n=Eu(this.g),e=this.g.fa();this.C<e.length&&(M_(this),wI(this,n,e),this.i&&4!=n&&gg(this))}},It.cancel=function(){this.I=!0,Ia(this)},It.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function S_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(bu(3),ys(17)),Ia(this),this.o=2,mg(this)):xw(this,this.V-n)};var EI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vd(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Vd){this.h=void 0!==e?e:n.h,R_(this,n.j),this.s=n.s,this.g=n.g,_g(this,n.m),this.l=n.l,e=n.i;var t=new vg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Pw(this,t),this.o=n.o}else n&&(t=String(n).match(EI))?(this.h=!!e,R_(this,t[1]||"",!0),this.s=yg(t[2]||""),this.g=yg(t[3]||"",!0),_g(this,t[4]),this.l=yg(t[5]||"",!0),Pw(this,t[6]||"",!0),this.o=yg(t[7]||"")):(this.h=!!e,this.i=new vg(null,this.h))}function Da(n){return new Vd(n)}function R_(n,e,t){n.j=t?yg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _g(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Pw(n,e,t){e instanceof vg?(n.i=e,function WS(n,e){e&&!n.j&&(Mc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(II(this,r),Nw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ud(e,GS)),n.i=new vg(e,n.h))}function fr(n,e,t){n.i.set(e,t)}function P_(n){return fr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ud(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ud(e,kw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ud(e,kw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ud(t,"/"==t.charAt(0)?$S:HS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ud(t,qS)),n.join("")};var kw=/[#\/\?@]/g,HS=/[#\?:]/g,$S=/[#\?]/g,GS=/[#\?@]/g,qS=/#/g;function vg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Mc(n){n.g||(n.g=new Map,n.h=0,n.i&&function CI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function II(n,e){Mc(n),e=Bd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function DI(n,e){return Mc(n),e=Bd(n,e),n.g.has(e)}function Nw(n,e,t){II(n,e),0<t.length&&(n.i=null,n.g.set(Bd(n,e),m_(t)),n.h+=t.length)}function Bd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ow(n){this.l=n||ZS,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ga&&jt.g.Ga()&&jt.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=vg.prototype).add=function(n,e){Mc(this),this.i=null,n=Bd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){Mc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},It.oa=function(){Mc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},It.W=function(n){Mc(this);let e=[];if("string"==typeof n)DI(this,n)&&(e=e.concat(this.g.get(Bd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},It.set=function(n,e){return Mc(this),this.i=null,DI(this,n=Bd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var ZS=10;function TI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function AI(n){return n.h?1:n.g?n.g.size:0}function wg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bg(n,e){n.g?n.g.add(e):n.h=e}function Fw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function k_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return m_(n.i)}function Lw(){}function KS(){this.g=new Lw}function Vw(n,e,t){const r=t||"";try{Rw(n,function(i,a){let u=i;ng(i)&&(u=rI(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Eg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function hl(n){this.l=n.$b||null,this.j=n.ib||!1}function Cg(n,e){Ui.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Uw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ow.prototype.cancel=function(){if(this.i=k_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Lw.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},Lw.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},Li(hl,Dw),hl.prototype.g=function(){return new Cg(this.l,this.j)},hl.prototype.i=function(n){return function(){return n}}({}),Li(Cg,Ui);var Uw=0;function QS(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function yf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jd(n)}function jd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=Cg.prototype).open=function(n,e){if(this.readyState!=Uw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jd(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yf(this)),this.readyState=Uw},It.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jd(this)),this.g&&(this.readyState=3,jd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QS(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},It.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yf(this):jd(this),3==this.readyState&&QS(this)}},It.Ua=function(n){this.g&&(this.response=this.responseText=n,yf(this))},It.Ta=function(n){this.g&&(this.response=n,yf(this))},It.ga=function(){this.g&&yf(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JS=jt.JSON.parse;function Sr(n){Ui.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=SI,this.K=this.L=!1}Li(Sr,Ui);var SI="",xI=/^https?$/i,Bw=["POST","PUT"];function jw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Hw(n),N_(n)}function Hw(n){n.D||(n.D=!0,Ei(n,"complete"),Ei(n,"error"))}function $w(n){if(n.h&&typeof f_<"u"&&(!n.C[1]||4!=Eu(n)||2!=n.aa()))if(n.v&&4==Eu(n))A_(n.Ha,0,n);else if(Ei(n,"readystatechange"),4==Eu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(EI)[1]||null;if(!i&&jt.self&&jt.self.location){var a=jt.self.location.protocol;i=a.substr(0,a.length-1)}r=!xI.test(i?i.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var u=2<Eu(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",Hw(n)}}finally{N_(n)}}}function N_(n,e){if(n.g){RI(n);const t=n.g,r=n.C[0]?oo:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function RI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Eu(n){return n.g?n.g.readyState:0}function PI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case SI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Gw(n){let e="";return gw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function kI(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Gw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fr(n,e,t))}function vf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NI(n){this.Ca=0,this.i=[],this.j=new Sc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=vf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=vf("baseRetryDelayMs",5e3,n),this.ab=vf("retryDelaySeedMs",1e4,n),this.Za=vf("forwardChannelMaxRetries",2,n),this.ta=vf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Ow(n&&n.concurrentRequestLimit),this.Fa=new KS,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function qw(n){if(XS(n),3==n.G){var e=n.U++,t=Da(n.F);fr(t,"SID",n.I),fr(t,"RID",e),fr(t,"TYPE","terminate"),Ig(n,t),(e=new _f(n,n.j,e,void 0)).K=2,e.v=P_(Da(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Qw(e.l,null),e.g.da(e.v)),e.F=Date.now(),gg(e)}Kw(n)}function Ww(n){n.g&&(Zw(n),n.g.cancel(),n.g=null)}function XS(n){Ww(n),n.u&&(jt.clearTimeout(n.u),n.u=null),F_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function O_(n){TI(n.h)||n.m||(n.m=!0,sI(n.Ja,n),n.C=0)}function OI(n,e){var t;t=e?e.m:n.U++;const r=Da(n.F);fr(r,"SID",n.I),fr(r,"RID",t),fr(r,"AID",n.T),Ig(n,r),n.o&&n.s&&kI(r,n.o,n.s),t=new _f(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=FI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),bg(n.h,t),Ld(t,r,e)}function Ig(n,e){n.ia&&gw(n.ia,function(t,r){fr(e,r,t)}),n.l&&Rw({},function(t,r){fr(e,r,t)})}function FI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Qi(n.l.Qa,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const A=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{Vw(A,u,"req"+w+"_")}catch{r&&r(A)}}if(h){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function LI(n){n.g||n.u||(n.Z=1,sI(n.Ia,n),n.A=0)}function zw(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=mf(Qi(n.Ia,n),BI(n,n.A)),n.A++,0))}function Zw(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function VI(n){n.g=new _f(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Da(n.sa);fr(e,"RID","rpc"),fr(e,"SID",n.I),fr(e,"CI",n.L?"0":"1"),fr(e,"AID",n.T),fr(e,"TYPE","xmlhttp"),Ig(n,e),n.o&&n.s&&kI(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=P_(Da(e)),t.s=null,t.P=!0,yI(t,n)}function F_(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function UI(n,e){var t=null;if(n.g==e){F_(n),Zw(n),n.g=null;var r=2}else{if(!wg(n.h,e))return;t=e.D,Fw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ei(r=x_(),new fI(r,t,e,i)),O_(n)}else LI(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function ex(n,e){return!(AI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=mf(Qi(n.Ja,n,e),BI(n,n.C)),n.C++,0)))}(n,e)||2==r&&zw(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ta(n,5);break;case 4:Ta(n,10);break;case 3:Ta(n,6);break;default:Ta(n,2)}}function BI(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Ta(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Qi(n.jb,n);t||(t=new Vd("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||R_(t,"https"),P_(t)),function YS(n,e){const t=new Sc;if(jt.Image){const r=new Image;r.onload=g_(Eg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=g_(Eg,t,r,"TestLoadImage: error",!1,e),r.onabort=g_(Eg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=g_(Eg,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ys(2);n.G=0,n.l&&n.l.va(e),Kw(n),XS(n)}function Kw(n){if(n.G=0,n.la=[],n.l){const e=k_(n.h);(0!=e.length||0!=n.i.length)&&(WC(n.la,e),WC(n.la,n.i),n.h.i.length=0,m_(n.i),n.i.length=0),n.l.ua()}}function Yw(n,e,t){var r=t instanceof Vd?Da(t):new Vd(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),_g(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Vd(null,void 0);r&&R_(a,r),e&&(a.g=e),i&&_g(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&fr(r,t,e),fr(r,"VER",n.ma),Ig(n,r),r}function Qw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&n.Da&&!n.ra?new hl({ib:!0}):n.ra)).L=n.H,e}function Jw(){}function Dg(){if(Fd&&!(10<=Number(SS)))throw Error("Environmental error: no available transport.")}function Fs(n,e){Ui.call(this),this.g=new NI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Od(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Od(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Hd(this)}function jI(n){gI.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tx(){mI.call(this),this.status=1}function Hd(n){this.g=n}(It=Sr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_I.g(),this.C=function Tw(n){return n.h||(n.h=n.i())}(this.u?this.u:_I),this.g.onreadystatechange=Qi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void jw(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=qC(Bw,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{RI(this),0<this.B&&((this.K=function MI(n){return Fd&&function AS(){return function lw(n){var e=TS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ZC(String(w_)).split("."),t=ZC("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=__(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||__(0==i[2].length,0==a[2].length)||__(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.qa,this)):this.A=A_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){jw(this,a)}},It.qa=function(){typeof f_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),N_(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),N_(this,!0)),Sr.X.M.call(this)},It.Ha=function(){this.s||(this.F||this.v||this.l?$w(this):this.eb())},It.eb=function(){$w(this)},It.aa=function(){try{return 2<Eu(this)?this.g.status:-1}catch{return-1}},It.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},It.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JS(e)}},It.Ea=function(){return this.m},It.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=NI.prototype).ma=8,It.G=1,It.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new _f(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=JC(a),mw(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=FI(this,i,e),fr(t=Da(this.F),"RID",n),fr(t,"CVER",22),this.D&&fr(t,"X-HTTP-Session-Id",this.D),Ig(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Gw(a)))+"&"+e:this.o&&kI(t,this.o,a)),bg(this.h,i),this.Xa&&fr(t,"TYPE","init"),this.O?(fr(t,"$req",e),fr(t,"SID","null"),i.Z=!0,Ld(i,t,null)):Ld(i,t,e),this.G=2}}else 3==this.G&&(n?OI(this,n):0==this.i.length||TI(this.h)||OI(this))},It.Ia=function(){if(this.u=null,VI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=mf(Qi(this.cb,this),n)}},It.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ys(10),Ww(this),VI(this))},It.bb=function(){null!=this.v&&(this.v=null,Ww(this),zw(this),ys(19))},It.jb=function(n){n?(this.j.info("Successfully pinged google.com"),ys(2)):(this.j.info("Failed to ping google.com"),ys(1))},(It=Jw.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Qa=function(){},Dg.prototype.g=function(n,e){return new Fs(n,e)},Li(Fs,Ui),Fs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ys(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Yw(n,null,n.V),O_(n)},Fs.prototype.close=function(){qw(this.g)},Fs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=rI(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&O_(e)},Fs.prototype.M=function(){this.g.l=null,delete this.j,qw(this.g),delete this.g,Fs.X.M.call(this)},Li(jI,gI),Li(tx,mI),Li(Hd,Jw),Hd.prototype.xa=function(){Ei(this.g,"a")},Hd.prototype.wa=function(n){Ei(this.g,new jI(n))},Hd.prototype.va=function(n){Ei(this.g,new tx(n))},Hd.prototype.ua=function(){Ei(this.g,"b")},Dg.prototype.createWebChannel=Dg.prototype.g,Fs.prototype.send=Fs.prototype.u,Fs.prototype.open=Fs.prototype.m,Fs.prototype.close=Fs.prototype.close,dg.NO_ERROR=0,dg.TIMEOUT=8,dg.HTTP_ERROR=6,Iw.COMPLETE="complete",pI.EventType=hg,hg.OPEN="a",hg.CLOSE="b",hg.ERROR="c",hg.MESSAGE="d",Ui.prototype.listen=Ui.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.Na,Sr.prototype.getLastErrorCode=Sr.prototype.Ea,Sr.prototype.getStatus=Sr.prototype.aa,Sr.prototype.getResponseJson=Sr.prototype.Ra,Sr.prototype.getResponseText=Sr.prototype.fa,Sr.prototype.send=Sr.prototype.da;var nx=cl.createWebChannelTransport=function(){return new Dg},rx=cl.getStatEventTarget=function(){return x_()},Xw=cl.ErrorCode=dg,ix=cl.EventType=Iw,Tg=cl.Event=xc,HI=cl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},e0=cl.FetchXmlHttpFactory=hl,lo=cl.WebChannel=pI,sx=cl.XhrIo=Sr;const L_="@firebase/firestore";class xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let wf="9.11.0";const Rc=new Ea.Yd("@firebase/firestore");function t0(){return Rc.logLevel}function je(n,...e){if(Rc.logLevel<=Ea.in.DEBUG){const t=e.map(U_);Rc.debug(`Firestore (${wf}): ${n}`,...t)}}function $r(n,...e){if(Rc.logLevel<=Ea.in.ERROR){const t=e.map(U_);Rc.error(`Firestore (${wf}): ${n}`,...t)}}function $d(n,...e){if(Rc.logLevel<=Ea.in.WARN){const t=e.map(U_);Rc.warn(`Firestore (${wf}): ${n}`,...t)}}function U_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${wf}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function Nt(n,e){n||ft()}function rt(n,e){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class B_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xr.UNAUTHENTICATED))}shutdown(){}}class n0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class r0{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let u=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=u;e.enqueueRetryable((0,Te.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt("string"==typeof r.accessToken),new B_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nt(null===e||"string"==typeof e),new xr(e)}}class ox{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Nt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ax{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new ox(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lx{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.A;return this.A=a.token,je("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt("string"==typeof t.token),this.A=t.token,new qI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function s0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class o0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=s0(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Gd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function a0(n){return n+"\0"}class pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new pr(0,0))}static max(){return new Ot(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bf{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends bf{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const WI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends bf{construct(e,t,r){return new Mr(e,t,r)}static isValidIdentifier(e){return WI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ve(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ve(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ve(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new Ve(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(En.fromString(e))}static fromName(e){return new We(En.fromString(e).popFirst(5))}static empty(){return new We(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new En(e.slice()))}}class Cu{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function l0(n){return n.fields.find(e=>2===e.kind)}function qd(n){return n.fields.filter(e=>2!==e.kind)}Cu.UNKNOWN_ID=-1;class u0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ef{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ef(0,vs.min())}}function Cf(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new pr(t+1,0):new pr(t,r));return new vs(i,We.empty(),e)}function ZI(n){return new vs(n.readTime,n.key,-1)}class vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new vs(Ot.min(),We.empty(),-1)}static max(){return new vs(Ot.max(),We.empty(),-1)}}function c0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const d0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pc(n){return h0.apply(this,arguments)}function h0(){return h0=(0,Te.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==d0)throw n;je("LocalStore","Unexpectedly lost primary lease")}),h0.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&t()},_=>r(_))}),u=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,u=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(A=>{u[w]=A,++h,h===a&&r(u)},A=>i(A))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Ag{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Gr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Wd(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=kc(r.target.error);this.P.reject(new Wd(e,i))}}static open(e,t,r,i){try{return new Ag(t,e.transaction(i,r))}catch(a){throw new Wd(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YI(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===jo.D((0,L.z$)())&&$r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Zd(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(jo.N())return!0;const e=(0,L.z$)(),t=jo.D(e),r=0<t&&t<10,i=jo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Te.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new Wd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Ve(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ve(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Wd(e,h))},a.onupgradeneeded=u=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Te.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const _=Ag.open(a.db,e,u?"readonly":"readwrite",r),w=i(_).next(A=>(_.V(),A)).catch(A=>(_.abort(A),he.reject(A))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,A="FirebaseError"!==w.name&&h<3;if(je("SimpleDb","Transaction failed with error:",w.message,"Retrying:",A),a.close(),!A)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class j_{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Zd(this.U.delete())}}class Wd extends Ve{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zd(n){return"IndexedDbTransactionError"===n.name}class YI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zd(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Zd(this.store.add(e))}get(e){return Zd(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Zd(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Zd(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(u,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const u=kc(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}H(e,t){const r=[];return new he((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const _=new j_(h),w=t(h.primaryKey,h.value,_);if(w instanceof he){const A=w.catch(x=>(_.done(),he.reject(x)));r.push(A)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zd(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=kc(r.target.error);t(i)}})}let f0=!1;function kc(n){const e=jo.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return f0||(f0=!0,setTimeout(()=>{throw r},0)),r}}return n}class cx{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){zd(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Pc(r)}yield t.nt(6e4)}))}}class QI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return je("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(h=>{i-=h,r.add(u)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,a)).next(h=>(je("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=ZI(a);c0(u,r)>0&&(r=u)}),new vs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function dx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ji.at=-1;class Rr{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new H_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new H_(this.root,e,this.comparator,!1)}getReverseIterator(){return new H_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new H_(this.root,e,this.comparator,!0)}}class H_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Bi.RED,this.left=i??Bi.EMPTY,this.right=a??Bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Bi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1,Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function If(n){return n.hasNext()?n.getNext():void 0}class Ls{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new Ls([])}unionWith(e){let t=new Bn(Mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new di(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}di.EMPTY_BYTE_STRING=new di("");const fx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iu(n){if(Nt(!!n),"string"==typeof n){let e=0;const t=fx.exec(n);if(Nt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Nc(n){return"string"==typeof n?di.fromBase64String(n):di.fromUint8Array(n)}function $_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function g0(n){const e=n.mapValue.fields.__previous_value__;return $_(e)?g0(e):e}function Df(n){const e=Iu(n.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}class px{constructor(e,t,r,i,a,u,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Oc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oc&&e.projectId===this.projectId&&e.database===this.database}}function G_(n){return null==n}function Tf(n){return 0===n&&1/n==-1/0}function gx(n){return"number"==typeof n&&Number.isInteger(n)&&!Tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},m0={nullValue:"NULL_VALUE"};function Af(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$_(n)?4:eD(n)?9007199254740991:10:ft()}function Du(n,e){if(n===e)return!0;const t=Af(n);if(t!==Af(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Df(n).isEqual(Df(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Iu(r.timestampValue),u=Iu(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Nc(n.bytesValue).isEqual(Nc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pr(r.geoPointValue.latitude)===Pr(i.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pr(r.integerValue)===Pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Pr(r.doubleValue),u=Pr(i.doubleValue);return a===u?Tf(a)===Tf(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Gd(n.arrayValue.values||[],e.arrayValue.values||[],Du);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(dx(a)!==dx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!Du(a[h],u[h])))return!1;return!0}(n,e);default:return ft()}var i}function q_(n,e){return void 0!==(n.values||[]).find(t=>Du(t,e))}function Qd(n,e){if(n===e)return 0;const t=Af(n),r=Af(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Pr(i.integerValue||i.doubleValue),h=Pr(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return mx(n.timestampValue,e.timestampValue);case 4:return mx(Df(n),Df(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Nc(i),h=Nc(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),h=a.split("/");for(let _=0;_<u.length&&_<h.length;_++){const w=Gt(u[_],h[_]);if(0!==w)return w}return Gt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Gt(Pr(i.latitude),Pr(a.latitude));return 0!==u?u:Gt(Pr(i.longitude),Pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],h=a.values||[];for(let _=0;_<u.length&&_<h.length;++_){const w=Qd(u[_],h[_]);if(w)return w}return Gt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Yd.mapValue&&a===Yd.mapValue)return 0;if(i===Yd.mapValue)return 1;if(a===Yd.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let A=0;A<h.length&&A<w.length;++A){const x=Gt(h[A],w[A]);if(0!==x)return x;const N=Qd(u[h[A]],_[w[A]]);if(0!==N)return N}return Gt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ft()}}function mx(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Iu(n),r=Iu(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Tu(n){return XI(n)}function XI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Iu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Nc(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=XI(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${XI(r.fields[h])}`;return a+"}"}(n.mapValue):ft();var e}function Fc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sf(n){return!!n&&"integerValue"in n}function xf(n){return!!n&&"arrayValue"in n}function _0(n){return!!n&&"nullValue"in n}function _x(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mf(n){return!!n&&"mapValue"in n}function Rf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tD(n){return"nullValue"in n?m0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fc(Oc.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function K1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fc(Oc.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yd:ft()}function yx(n,e){const t=Qd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nD(n,e){const t=Qd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ji{constructor(e){this.value=e}static empty(){return new ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rf(t)}setAll(e){let t=Mr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=Rf(u):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Kd(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ji(Rf(this.value))}}function Sg(n){const e=[];return Kd(n.fields,(t,r)=>{const i=new Mr([t]);if(Mf(r)){const a=Sg(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Ls(e)}class tr{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new tr(e,0,Ot.min(),Ot.min(),ji.empty(),0)}static newFoundDocument(e,t,r){return new tr(e,1,t,Ot.min(),r,0)}static newNoDocument(e,t){return new tr(e,2,t,Ot.min(),ji.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Ot.min(),ji.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Y1{constructor(e,t=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.ht=null}}function vx(n,e=null,t=[],r=[],i=null,a=null,u=null){return new Y1(n,e,t,r,i,a,u)}function Pf(n){const e=rt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Tu(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),G_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tu(r)).join(",")),e.ht=t}return e.ht}function xg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!b0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Du(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!C0(n.startAt,e.startAt)&&C0(n.endAt,e.endAt)}function W_(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function y0(n,e){return n.filters.filter(t=>t instanceof Ci&&t.field.isEqual(e))}function rD(n,e,t){let r=m0,i=!0;for(const a of y0(n,e)){let u=m0,h=!0;switch(a.op){case"<":case"<=":u=tD(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,h=!1;break;case"!=":case"not-in":u=m0}yx({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];yx({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function v0(n,e,t){let r=Yd,i=!0;for(const a of y0(n,e)){let u=Yd,h=!0;switch(a.op){case">=":case">":u=K1(a.value),h=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,h=!1;break;case"!=":case"not-in":u=Yd}nD({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];nD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Q1(e,t,r):"array-contains"===t?new Ex(e,r):"in"===t?new Ho(e,r):"not-in"===t?new Cx(e,r):"array-contains-any"===t?new w0(e,r):new Ci(e,t,r)}static lt(e,t,r){return"in"===t?new Aa(e,r):new bx(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Qd(t,this.value)):null!==t&&Af(this.value)===Af(t)&&this.ft(Qd(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Q1 extends Ci{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.ft(t)}}class Aa extends Ci{constructor(e,t){super(e,"in",t),this.keys=z_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bx extends Ci{constructor(e,t){super(e,"not-in",t),this.keys=z_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function z_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class Ex extends Ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xf(t)&&q_(t.arrayValue,this.value)}}class Ho extends Ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&q_(this.value.arrayValue,t)}}class Cx extends Ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(q_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!q_(this.value.arrayValue,t)}}class w0 extends Ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>q_(this.value.arrayValue,r))}}class Lc{constructor(e,t){this.position=e,this.inclusive=t}}class kf{constructor(e,t="asc"){this.field=e,this.dir=t}}function b0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function E0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(u.referenceValue),t.key):Qd(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function C0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Du(n.position[t],e.position[t]))return!1;return!0}class Au{constructor(e,t=null,r=[],i=[],a=null,u="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=_,this._t=null,this.wt=null}}function I0(n,e,t,r,i,a,u,h){return new Au(n,e,t,r,i,a,u,h)}function Jd(n){return new Au(n)}function iD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Z_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function D0(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Mg(n){return null!==n.collectionGroup}function uo(n){const e=rt(n);if(null===e._t){e._t=[];const t=D0(e),r=Z_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new kf(t)),e._t.push(new kf(Mr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new kf(Mr.keyField(),a))}}}return e._t}function Xi(n){const e=rt(n);if(!e.wt)if("F"===e.limitType)e.wt=vx(e.path,e.collectionGroup,uo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of uo(e))t.push(new kf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Lc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Lc(e.startAt.position,e.startAt.inclusive):null;e.wt=vx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Nf(n,e,t){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function co(n,e){return xg(Xi(n),Xi(e))&&n.limitType===e.limitType}function sD(n){return`${Pf(Xi(n))}|lt:${n.limitType}`}function oD(n){return`Query(target=${function wx(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Tu(r.value)}`;var r}).join(", ")}]`),G_(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Tu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Tu(t)).join(",")),`Target(${e})`}(Xi(n))}; limitType=${n.limitType})`}function T0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const h=E0(i,a,u);return i.inclusive?h<=0:h<0}(t.startAt,uo(t),r)||t.endAt&&!function(i,a,u){const h=E0(i,a,u);return i.inclusive?h>=0:h>0}(t.endAt,uo(t),r)));var t,r}function aD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lD(n){return(e,t)=>{let r=!1;for(const i of uo(n)){const a=Ix(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Ix(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,u){const h=a.data.field(i),_=u.data.field(i);return null!==h&&null!==_?Qd(h,_):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function A0(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tf(e)?"-0":e}}function Dx(n){return{integerValue:""+n}}function S0(n,e){return gx(e)?Dx(e):A0(n,e)}class K_{constructor(){this._=void 0}}function uD(n,e,t){return n instanceof Xd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Vc?x0(n,e):n instanceof Uc?M0(n,e):function(r,i){const a=Y_(r,i),u=Rg(a)+Rg(r.yt);return Sf(a)&&Sf(r.yt)?Dx(u):A0(r.It,u)}(n,e)}function J1(n,e,t){return n instanceof Vc?x0(n,e):n instanceof Uc?M0(n,e):t}function Y_(n,e){return n instanceof Su?Sf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xd extends K_{}class Vc extends K_{constructor(e){super(),this.elements=e}}function x0(n,e){const t=R0(e);for(const r of n.elements)t.some(i=>Du(i,r))||t.push(r);return{arrayValue:{values:t}}}class Uc extends K_{constructor(e){super(),this.elements=e}}function M0(n,e){let t=R0(e);for(const r of n.elements)t=t.filter(i=>!Du(i,r));return{arrayValue:{values:t}}}class Su extends K_{constructor(e,t){super(),this.It=e,this.yt=t}}function Rg(n){return Pr(n.integerValue||n.doubleValue)}function R0(n){return xf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Pg{constructor(e,t){this.field=e,this.transform=t}}class dD{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Q_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class P0{}function Tx(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Of(n.key,gr.none()):new Ng(n.key,n.data,gr.none());{const t=n.data,r=ji.empty();let i=new Bn(Mr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new Bc(n.key,r,new Ls(i.toArray()),gr.none())}}function hD(n,e,t){n instanceof Ng?function(r,i,a){const u=r.value.clone(),h=xx(r.fieldTransforms,i,a.transformResults);u.setAll(h),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Bc?function(r,i,a){if(!Q_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=xx(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Sx(r)),h.setAll(u),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function kg(n,e,t,r){return n instanceof Ng?function(i,a,u,h){if(!Q_(i.precondition,a))return u;const _=i.value.clone(),w=Mx(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bc?function(i,a,u,h){if(!Q_(i.precondition,a))return u;const _=Mx(i.fieldTransforms,h,a),w=a.data;return w.setAll(Sx(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(A=>A.field))}(n,e,t,r):(u=t,Q_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function Ax(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Y_(r.transform,i||null);null!=a&&(null===t&&(t=ji.empty()),t.set(r.field,a))}return t||null}function fD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gd(t,r,(i,a)=>function cD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vc&&r instanceof Vc||t instanceof Uc&&r instanceof Uc?Gd(t.elements,r.elements,Du):t instanceof Su&&r instanceof Su?Du(t.yt,r.yt):t instanceof Xd&&r instanceof Xd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ng extends P0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bc extends P0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Sx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xx(n,e,t){const r=new Map;Nt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,J1(u,h,t[i]))}return r}function Mx(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,uD(a,u,e))}return r}class Of extends P0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ff extends P0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rx{constructor(e){this.count=e}}var ri,yn;function jc(n){switch(n){default:return ft();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function k0(n){if(void 0===n)return $r("GRPC error has no .code"),be.UNKNOWN;switch(n){case ri.OK:return be.OK;case ri.CANCELLED:return be.CANCELLED;case ri.UNKNOWN:return be.UNKNOWN;case ri.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case ri.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case ri.INTERNAL:return be.INTERNAL;case ri.UNAVAILABLE:return be.UNAVAILABLE;case ri.UNAUTHENTICATED:return be.UNAUTHENTICATED;case ri.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case ri.NOT_FOUND:return be.NOT_FOUND;case ri.ALREADY_EXISTS:return be.ALREADY_EXISTS;case ri.PERMISSION_DENIED:return be.PERMISSION_DENIED;case ri.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case ri.ABORTED:return be.ABORTED;case ri.OUT_OF_RANGE:return be.OUT_OF_RANGE;case ri.UNIMPLEMENTED:return be.UNIMPLEMENTED;case ri.DATA_LOSS:return be.DATA_LOSS;default:return ft()}}(yn=ri||(ri={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kd(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return hx(this.inner)}size(){return this.innerSize}}const N0=new Rr(We.comparator);function Vs(){return N0}const J_=new Rr(We.comparator);function eh(...n){let e=J_;for(const t of n)e=e.insert(t.key,t);return e}function Og(n){let e=J_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xu(){return X_()}function Px(){return X_()}function X_(){return new fl(n=>n.toString(),(n,e)=>n.isEqual(e))}const X1=new Rr(We.comparator),pD=new Bn(We.comparator);function Qt(...n){let e=pD;for(const t of n)e=e.add(t);return e}const kx=new Bn(Gt);function ey(){return kx}class Fg{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Lf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Fg(Ot.min(),r,ey(),Vs(),Qt())}}class Lf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Lf(di.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class Lg{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class O0{constructor(e,t){this.targetId=e,this.At=t}}class gD{constructor(e,t,r=di.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class mD{constructor(){this.Rt=0,this.bt=Nx(),this.Pt=di.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Qt(),t=Qt(),r=Qt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new Lf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Nx()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class _D{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Vs(),this.qt=ty(),this.Kt=new Bn(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(W_(a))if(0===r){const u=new We(a.path);this.jt(t,u,tr.newNoDocument(u,Ot.min()))}else Nt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,u)=>{const h=this.Xt(u);if(h){if(a.current&&W_(h.target)){const _=new We(h.target.path);null!==this.Ut.get(_)||this.ee(u,_)||this.jt(u,_,tr.newNoDocument(_,e))}a.Dt&&(t.set(u,a.xt()),a.Nt())}});let r=Qt();this.qt.forEach((a,u)=>{let h=!0;u.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,u)=>u.setReadTime(e));const i=new Fg(e,t,this.Kt,this.Ut,r);return this.Ut=Vs(),this.qt=ty(),this.Kt=new Bn(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new mD,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Bn(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new mD),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function ty(){return new Rr(We.comparator)}function Nx(){return new Rr(We.comparator)}const yD={asc:"ASCENDING",desc:"DESCENDING"},F0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ox{constructor(e,t){this.databaseId=e,this.gt=t}}function Vg(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fx(n,e){return n.gt?e.toBase64():e.toUint8Array()}function ek(n,e){return Vg(n,e.toTimestamp())}function Ii(n){return Nt(!!n),Ot.fromTimestamp(function(e){const t=Iu(e);return new pr(t.seconds,t.nanos)}(n))}function L0(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vD(n){const e=En.fromString(n);return Nt(ie(e)),e}function ny(n,e){return L0(n.databaseId,e.path)}function Mu(n,e){const t=vD(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(bD(t))}function wD(n,e){return L0(n.databaseId,e)}function Lx(n){const e=vD(n);return 4===e.length?En.emptyPath():bD(e)}function ry(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bD(n){return Nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Vx(n,e,t){return{name:ny(n,e),fields:t.value.mapValue.fields}}function Ux(n,e,t){const r=Mu(n,e.name),i=Ii(e.updateTime),a=new ji({mapValue:{fields:e.fields}}),u=tr.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function iy(n,e){let t;if(e instanceof Ng)t={update:Vx(n,e.key,e.value)};else if(e instanceof Of)t={delete:ny(n,e.key)};else if(e instanceof Bc)t={update:Vx(n,e.key,e.data),updateMask:Q(e.fieldMask)};else{if(!(e instanceof Ff))return ft();t={verify:ny(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof Xd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Su)return{fieldPath:a.field.canonicalString(),increment:u.yt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ek(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function ED(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?gr.updateTime(Ii(i.updateTime)):void 0!==i.exists?gr.exists(i.exists):gr.none():gr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let h=null;"setToServerValue"in u?(Nt("REQUEST_TIME"===u.setToServerValue),h=new Xd):"appendMissingElements"in u?h=new Vc(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Uc(u.removeAllFromArray.values||[]):"increment"in u?h=new Su(a,u.increment):ft();const _=Mr.fromServerFormat(u.fieldPath);return new Pg(_,h)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),a=new ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ls((e.updateMask.fieldPaths||[]).map(w=>Mr.fromServerFormat(w)));return new Bc(i,a,u,t,r)}return new Ng(i,a,t,r)}if(e.delete){const i=Mu(n,e.delete);return new Of(i,t)}if(e.verify){const i=Mu(n,e.verify);return new Ff(i,t)}return ft()}function o(n,e){return{documents:[wD(n,e.path)]}}function l(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(A=>function(x){if("=="===x.op){if(_x(x.value))return{unaryFilter:{field:D(x.field),op:"IS_NAN"}};if(_0(x.value))return{unaryFilter:{field:D(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(_x(x.value))return{unaryFilter:{field:D(x.field),op:"IS_NOT_NAN"}};if(_0(x.value))return{unaryFilter:{field:D(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:D(x.field),op:E(x.op),value:x.value}}}(A));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:D((A=w).field),direction:v(A.dir)};var A})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(w=e.limit,n.gt||G_(w)?w:{value:w});var w,h,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function c(n){let e=Lx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Nt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let a=[];t.where&&(a=g(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(A=>{return new kf(M((x=A).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;t.limit&&(h=function(A){let x;return x="object"==typeof A?A.value:A,G_(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new Lc((A=t.startAt).values||[],!!A.before));let w=null;return t.endAt&&(w=function(A){return new Lc(A.values||[],!A.before)}(t.endAt)),I0(e,i,u,a,h,"F",_,w)}function g(n){return n?void 0!==n.unaryFilter?[j(n)]:void 0!==n.fieldFilter?[O(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>g(e)).reduce((e,t)=>e.concat(t)):ft():[]}function v(n){return yD[n]}function E(n){return F0[n]}function D(n){return{fieldPath:n.canonicalString()}}function M(n){return Mr.fromServerFormat(n.fieldPath)}function O(n){return Ci.create(M(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function j(n){switch(n.unaryFilter.op){case"IS_NAN":const e=M(n.unaryFilter.field);return Ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=M(n.unaryFilter.field);return Ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=M(n.unaryFilter.field);return Ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=M(n.unaryFilter.field);return Ci.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function Q(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ie(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ce(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tt(e)),e=ze(n.get(t),e);return tt(e)}function ze(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function tt(n){return n+"\x01\x01"}function it(n){const e=n.length;if(Nt(e>=2),2===e)return Nt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&ft(),n.charAt(u+1)){case"\x01":const h=n.substring(a,u);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:ft()}a=u+2}return new En(r)}const St=["userId","batchId"];function Le(n,e){return[n,Ce(e)]}function Ft(n,e,t){return[n,Ce(e),t]}const Mn={},mr=["prefixPath","collectionGroup","readTime","documentId"],th=["prefixPath","collectionGroup","documentId"],V0=["collectionGroup","readTime","prefixPath","documentId"],U0=["canonicalId","targetId"],B0=["targetId","path"],j0=["path","targetId"],H0=["collectionId","parent"],$0=["indexId","uid"],G0=["uid","sequenceNumber"],q0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W0=["indexId","uid","orderedDocumentKey"],q2=["userId","collectionPath","documentId"],W2=["userId","collectionPath","largestBatchId"],z2=["userId","collectionGroup","largestBatchId"],rk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z2=[...rk,"documentOverlays"],ik=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sk=ik,K2=[...sk,"indexConfiguration","indexState","indexEntries"];class Bx extends KI{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function es(n,e){const t=rt(n);return jo.M(t.ie,e)}class jx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&hD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Px();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(i.key)?null:h;const _=Tx(u,h);null!==_&&r.set(i.key,_),u.isValidDocument()||u.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Gd(this.mutations,e.mutations,(t,r)=>fD(t,r))&&Gd(this.baseMutations,e.baseMutations,(t,r)=>fD(t,r))}}class Hx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Nt(e.mutations.length===r.length);let i=X1;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Hx(e,t,r,i)}}class $x{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vf{constructor(e,t,r,i,a=Ot.min(),u=Ot.min(),h=di.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Vf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ok{constructor(e){this.re=e}}function ak(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:CD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ny(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Vg(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ug(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:Ug(e.version)}}var i,a;return r}function CD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ug(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bg(n){const e=new pr(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function jg(n,e){const t=(e.baseMutations||[]).map(a=>ED(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>ED(n.re,a)),i=pr.fromMillis(e.localWriteTimeMs);return new jx(e.batchId,i,t,r)}function z0(n){const e=Bg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Bg(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(Nt(1===(i=n.query).documents.length),r=Xi(Jd(Lx(i.documents[0])))):r=Xi(c(n.query)),new Vf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,di.fromBase64String(n.resumeToken))}function lk(n,e){const t=Ug(e.snapshotVersion),r=Ug(e.lastLimboFreeSnapshotVersion);let i;i=W_(e.target)?o(n.re,e.target):l(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pf(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Gx(n){const e=c({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Nf(e,e.limit,"L"):e}function qx(n,e){return new $x(e.largestBatchId,ED(n.re,e.overlayMutation))}function uk(n,e){const t=e.path.lastSegment();return[n,Ce(e.path.popLast()),t]}function ck(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ug(r.readTime),documentKey:Ce(r.documentKey.path),largestBatchId:r.largestBatchId}}class Q2{getBundleMetadata(e,t){return dk(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Bg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return dk(e).put({bundleId:(r=t).id,createTime:Ug(Ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return hk(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Gx(i.bundledQuery),readTime:Bg(i.readTime)};var i})}saveNamedQuery(e,t){return hk(e).put({name:(r=t).name,readTime:Ug(Ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function dk(n){return es(n,"bundles")}function hk(n){return es(n,"namedQueries")}class ID{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ID(e,t.uid||"")}getOverlay(e,t){return Z0(e).get(uk(this.userId,t)).next(r=>r?qx(this.It,r):null)}getOverlays(e,t){const r=xu();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const h=new $x(t,u);i.push(this.ue(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ce(u.getCollectionPath())));const a=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Z0(e).Y("collectionPathOverlayIndex",h))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=xu(),a=Ce(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Z0(e).W("collectionPathOverlayIndex",u).next(h=>{for(const _ of h){const w=qx(this.It,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=xu();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Z0(e).Z({index:"collectionGroupOverlayIndex",range:h},(_,w,A)=>{const x=qx(this.It,w);a.size()<i||x.largestBatchId===u?(a.set(x.getKey(),x),u=x.largestBatchId):A.done()}).next(()=>a)}ue(e,t){return Z0(e).put(function(r,i,a){const[u,h,_]=uk(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:iy(r.re,a.mutation)}}(this.It,this.userId,t))}}function Z0(n){return es(n,"documentOverlays")}class Hg{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Tf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Nc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?eD(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ft()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),We.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function J2(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function fk(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=J2(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Hg.Te=new Hg;class X2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=fk(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=fk(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eV{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class tV{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class K0{constructor(){this.Be=new X2,this.Le=new eV(this.Be),this.Ue=new tV(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class $g{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $g(this.indexId,this.documentKey,this.arrayValue,r)}}function Gg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pk(n.arrayValue,e.arrayValue),0!==t?t:(t=pk(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function pk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=l0(e);if(void 0!==t&&!this.ze(t))return!1;const r=qd(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rV{constructor(){this.Ye=new Wx}addToCollectionParentIndex(e,t){return this.Ye.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(vs.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Wx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(En.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(En.comparator)).toArray()}}const DD=new Uint8Array(0);class iV{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Wx,this.Ze=new fl(r=>Pf(r),(r,i)=>xg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Ce(i)};return gk(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[a0(t),""],!1,!0);return gk(e).W(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(it(u.parent))}return r})}addFieldIndex(e,t){const r=TD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=Q0(e);return a.next(h=>{u.put(ck(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=TD(e),i=Q0(e),a=Y0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Y0(e);let i=!0;const a=new Map;return he.forEach(this.tn(t),u=>this.en(e,u).next(h=>{i&&(i=!!h),a.set(u,h)})).next(()=>{if(i){let u=Qt();const h=[];return he.forEach(a,(_,w)=>{var A;je("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${Pf(t)}`);const x=function(pt,gt){const Vt=l0(gt);if(void 0===Vt)return null;for(const Zt of y0(pt,Vt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(w,_),N=function(pt,gt){const Vt=new Map;for(const Zt of qd(gt))for(const Wr of y0(pt,Zt.fieldPath))switch(Wr.op){case"==":case"in":Vt.set(Zt.fieldPath.canonicalString(),Wr.value);break;case"not-in":case"!=":return Vt.set(Zt.fieldPath.canonicalString(),Wr.value),Array.from(Vt.values())}return null}(w,_),H=function(pt,gt){const Vt=[];let Zt=!0;for(const Wr of qd(gt)){const Fu=0===Wr.kind?rD(pt,Wr.fieldPath,pt.startAt):v0(pt,Wr.fieldPath,pt.startAt);Vt.push(Fu.value),Zt&&(Zt=Fu.inclusive)}return new Lc(Vt,Zt)}(w,_),q=function(pt,gt){const Vt=[];let Zt=!0;for(const Wr of qd(gt)){const Fu=0===Wr.kind?v0(pt,Wr.fieldPath,pt.endAt):rD(pt,Wr.fieldPath,pt.endAt);Vt.push(Fu.value),Zt&&(Zt=Fu.inclusive)}return new Lc(Vt,Zt)}(w,_),fe=this.nn(_,w,H),Ie=this.nn(_,w,q),Xe=this.sn(_,w,N),ct=this.rn(_.indexId,x,fe,H.inclusive,Ie,q.inclusive,Xe);return he.forEach(ct,pt=>r.J(pt,t.limit).next(gt=>{gt.forEach(Vt=>{const Zt=We.fromSegments(Vt.documentKey);u.has(Zt)||(u=u.add(Zt),h.push(Zt))})}))}).next(()=>h)}return he.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,u,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),A=[];for(let x=0;x<_;++x){const N=t?this.on(t[x/w]):DD,H=this.un(e,N,r[x%w],i),q=this.cn(e,N,a[x%w],u),fe=h.map(Ie=>this.un(e,N,Ie,!0));A.push(...this.createRange(H,q,fe))}return A}un(e,t,r,i){const a=new $g(e,We.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new $g(e,We.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new nV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const h of a)r.We(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return he.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let h=new Bn(Mr.comparator),_=!1;for(const w of u.filters){const A=w;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?_=!0:h=h.add(A.field))}for(const w of u.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new K0;for(const i of qd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.qe(i.kind);Hg.Te.ce(a,u)}return r.$e()}on(e){const t=new K0;return Hg.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new K0;return Hg.Te.ce(Fc(this.databaseId,t),r.qe(function(i){const a=qd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new K0);let a=0;for(const u of qd(e)){const h=r[a++];for(const _ of i)if(this.ln(t,u.fieldPath)&&xf(h))i=this.fn(i,u,h);else{const w=_.qe(u.kind);Hg.Te.ce(h,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const h of i){const _=new K0;_.seed(h.$e()),Hg.Te.ce(u,_.qe(t.kind)),a.push(_)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Ci&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TD(e),i=Q0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const u=[];return he.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{u.push(function(w,A){const x=A?new Ef(A.sequenceNumber,new vs(Bg(A.readTime),new We(it(A.documentKey)),A.largestBatchId)):Ef.empty(),N=w.fields.map(([H,q])=>new u0(Mr.fromServerFormat(H),q));return new Cu(w.indexId,w.collectionGroup,N,x)}(h,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=TD(e),a=Q0(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,_=>a.put(ck(_.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?he.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,_=>this.wn(e,i,_).next(w=>{const A=this.mn(a,_);return w.isEqual(A)?he.resolve():this.gn(e,a,_,w,A)}))))})}yn(e,t,r,i){return Y0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Y0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Y0(e);let a=new Bn(Gg);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,h)=>{a=a.add(new $g(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new Bn(Gg);const i=this.an(t,e);if(null==i)return r;const a=l0(t);if(null!=a){const u=e.data.field(a.fieldPath);if(xf(u))for(const h of u.arrayValue.values||[])r=r.add(new $g(t.indexId,e.key,this.on(h),i))}else r=r.add(new $g(t.indexId,e.key,DD,i));return r}gn(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,_,w,A,x){const N=h.getIterator(),H=_.getIterator();let q=If(N),fe=If(H);for(;q||fe;){let Ie=!1,Xe=!1;if(q&&fe){const ct=w(q,fe);ct<0?Xe=!0:ct>0&&(Ie=!0)}else null!=q?Xe=!0:Ie=!0;Ie?(A(fe),fe=If(H)):Xe?(x(q),q=If(N)):(q=If(N),fe=If(H))}}(i,a,Gg,h=>{u.push(this.yn(e,t,r,h))},h=>{u.push(this.pn(e,t,r,h))}),he.waitFor(u)}_n(e){let t=1;return Q0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Gg(u,h)).filter((u,h,_)=>!h||0!==Gg(u,_[h-1]));const i=[];i.push(e);for(const u of r){const h=Gg(u,e),_=Gg(u,t);if(0===h)i[0]=e.Ke();else if(h>0&&_<0)i.push(u),i.push(u.Ke());else if(_>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,DD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,DD,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mk)}getMinOffset(e,t){return he.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ft())).next(mk)}}function gk(n){return es(n,"collectionParents")}function Y0(n){return es(n,"indexEntries")}function TD(n){return es(n,"indexConfiguration")}function Q0(n){return es(n,"indexState")}function mk(n){Nt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;c0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}const _k={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $o{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $o(e,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yk(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const _=r.Z({range:u},(A,x,N)=>(h++,N.delete()));a.push(_.next(()=>{Nt(1===h)}));const w=[];for(const A of t.mutations){const x=Ft(e,A.key.path,t.batchId);a.push(i.delete(x)),w.push(A.key)}return he.waitFor(a).next(()=>w)}function AD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}$o.DEFAULT_COLLECTION_PERCENTILE=10,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$o.DEFAULT=new $o(41943040,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$o.DISABLED=new $o(-1,0,0);class SD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Nt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new SD(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uf(e).Z({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=sy(e),u=Uf(e);return u.add({}).next(h=>{Nt("number"==typeof h);const _=new jx(h,t,r,i),w=function(N,H,q){const fe=q.baseMutations.map(Xe=>iy(N.re,Xe)),Ie=q.mutations.map(Xe=>iy(N.re,Xe));return{userId:H,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:fe,mutations:Ie}}(this.It,this.userId,_),A=[];let x=new Bn((N,H)=>Gt(N.canonicalString(),H.canonicalString()));for(const N of i){const H=Ft(this.userId,N.key.path,h);x=x.add(N.key.path.popLast()),A.push(u.put(w)),A.push(a.put(H,Mn))}return x.forEach(N=>{A.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.In[h]=_.keys()}),he.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Uf(e).get(t).next(r=>r?(Nt(r.userId===this.userId),jg(this.It,r)):null)}Tn(e,t){return this.In[t]?he.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Uf(e).Z({index:"userMutationsIndex",range:i},(u,h,_)=>{h.userId===this.userId&&(Nt(h.batchId>=r),a=jg(this.It,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uf(e).W("userMutationsIndex",t).next(r=>r.map(i=>jg(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Le(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return sy(e).Z({range:i},(u,h,_)=>{const[w,A,x]=u,N=it(A);if(w===this.userId&&t.path.isEqual(N))return Uf(e).get(x).next(H=>{if(!H)throw ft();Nt(H.userId===this.userId),a.push(jg(this.It,H))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Gt);const i=[];return t.forEach(a=>{const u=Le(this.userId,a.path),h=IDBKeyRange.lowerBound(u),_=sy(e).Z({range:h},(w,A,x)=>{const[N,H,q]=w,fe=it(H);N===this.userId&&a.path.isEqual(fe)?r=r.add(q):x.done()});i.push(_)}),he.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Le(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new Bn(Gt);return sy(e).Z({range:u},(_,w,A)=>{const[x,N,H]=_,q=it(N);x===this.userId&&r.isPrefixOf(q)?q.length===i&&(h=h.add(H)):A.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Uf(e).get(a).next(u=>{if(null===u)throw ft();Nt(u.userId===this.userId),r.push(jg(this.It,u))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yk(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sy(e).Z({range:r},(a,u,h)=>{if(a[0]===this.userId){const _=it(a[1]);i.push(_)}else h.done()}).next(()=>{Nt(0===i.length)})})}containsKey(e,t){return vk(e,this.userId,t)}Rn(e){return wk(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vk(n,e,t){const r=Le(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return sy(n).Z({range:a,X:!0},(h,_,w)=>{const[A,x,N]=h;A===e&&x===i&&(u=!0),w.done()}).next(()=>u)}function Uf(n){return es(n,"mutations")}function sy(n){return es(n,"documentMutations")}function wk(n){return es(n,"mutationQueues")}class qg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new qg(0)}static vn(){return new qg(-1)}}class sV{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new qg(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ot.fromTimestamp(new pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Nt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return oy(e).Z((u,h)=>{const _=z0(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return oy(e).Z((r,i)=>{const a=z0(i);t(a)})}Vn(e){return bk(e).get("targetGlobalKey").next(t=>(Nt(null!==t),t))}Sn(e,t){return bk(e).put("targetGlobalKey",t)}Dn(e,t){return oy(e).put(lk(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Pf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return oy(e).Z({range:i,index:"queryTargetsIndex"},(u,h,_)=>{const w=z0(h);xg(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Bf(e);return t.forEach(u=>{const h=Ce(u.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bf(e);return he.forEach(t,a=>{const u=Ce(a.path);return he.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Bf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bf(e);let a=Qt();return i.Z({range:r,X:!0},(u,h,_)=>{const w=it(u[1]),A=new We(w);a=a.add(A)}).next(()=>a)}containsKey(e,t){const r=Ce(t.path),i=IDBKeyRange.bound([r],[a0(r)],!1,!0);let a=0;return Bf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,h],_,w)=>{0!==u&&(a++,w.done())}).next(()=>a>0)}se(e,t){return oy(e).get(t).next(r=>r?z0(r):null)}}function oy(n){return es(n,"targets")}function bk(n){return es(n,"targetGlobal")}function Bf(n){return es(n,"targetDocuments")}function Ek([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class oV{constructor(e){this.xn=e,this.buffer=new Bn(Ek),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ek(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){zd(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Pc(r)}yield t.Fn(3e5)}))}}class lV{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Ji.at);const r=new oV(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(_k)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_k):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,u,h,_,w;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,u=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),t0()<=Ea.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-A}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${x} documents in `+(w-_)+`ms\nTotal Duration: ${w-A}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class uV{constructor(e,t){this.db=e,this.garbageCollector=new lV(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return xD(e,r)}removeReference(e,t,r){return xD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xD(e,t)}Gn(e,t){return function(r,i){let a=!1;return wk(r).tt(u=>vk(r,u,i).next(h=>(h&&(a=!0),he.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(u,h)=>{if(h<=t){const _=this.Gn(e,u).next(w=>{if(!w)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ot.min()),Bf(e).delete([0,Ce(u.path)])))});i.push(_)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xD(e,t)}Kn(e,t){const r=Bf(e);let i,a=Ji.at;return r.Z({index:"documentTargetsIndex"},([u,h],{path:_,sequenceNumber:w})=>{0===u?(a!==Ji.at&&t(new We(it(i)),a),a=w,i=_):a=Ji.at}).next(()=>{a!==Ji.at&&t(new We(it(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xD(n,e){return Bf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ce(e.path),sequenceNumber:r}));var r}class Ck{constructor(){this.changes=new fl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cV{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wg(e).put(r)}removeEntry(e,t,r){return Wg(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],CD(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return Wg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(J0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return Wg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(J0(t))},(i,a)=>{r={document:this.jn(t,a),size:AD(a)}}).next(()=>r)}getEntries(e,t){let r=Vs();return this.zn(e,t,(i,a)=>{const u=this.jn(i,a);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=Vs(),i=new Rr(We.comparator);return this.zn(e,t,(a,u)=>{const h=this.jn(a,u);r=r.insert(a,h),i=i.insert(a,AD(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Bn(Ak);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(J0(i.first()),J0(i.last())),u=i.getIterator();let h=u.getNext();return Wg(e).Z({index:"documentKeyIndex",range:a},(_,w,A)=>{const x=We.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&Ak(h,x)<0;)r(h,null),h=u.getNext();h&&h.isEqual(x)&&(r(h,w),h=u.hasNext()?u.getNext():null),h?A.j(J0(h)):A.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),CD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wg(e).W(IDBKeyRange.bound(i,a,!0)).next(u=>{let h=Vs();for(const _ of u){const w=this.jn(We.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Vs();const u=Tk(t,r),h=Tk(t,vs.max());return Wg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(_,w,A)=>{const x=this.jn(We.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(x.key,x),a.size===i&&A.done()}).next(()=>a)}newChangeBuffer(e){return new dV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Dk(e).get("remoteDocumentGlobalKey").next(t=>(Nt(!!t),t))}Qn(e,t){return Dk(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Y2(n,e){let t;if(e.document)t=Ux(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=Bg(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=We.fromSegments(e.unknownDocument.path),i=Bg(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new pr(r[0],r[1]);return Ot.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return tr.newInvalidDocument(e)}}function Ik(n){return new cV(n)}class dV extends Ck{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new fl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Bn((a,u)=>Gt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),u.isValidDocument()){const _=ak(this.Yn.It,u);i=i.add(a.path.popLast()),r+=AD(_)-h.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=ak(this.Yn.It,u.convertToNoDocument(Ot.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,u)=>{this.Xn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function Dk(n){return es(n,"remoteDocumentGlobal")}function Wg(n){return es(n,"remoteDocumentsV14")}function J0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tk(n,e){const t=e.documentKey.path.toArray();return[n,CD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ak(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class hV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&kg(r.mutation,i,Ls.empty(),pr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=xu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=eh();return a.forEach((h,_)=>{u=u.insert(h,_.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=xu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let a=Vs();const u=X_(),h=X_();return t.forEach((_,w)=>{const A=r.get(w.key);i.has(w.key)&&(void 0===A||A.mutation instanceof Bc)?a=a.insert(w.key,w):void 0!==A&&(u.set(w.key,A.mutation.getFieldMask()),kg(A.mutation,w,A.mutation.getFieldMask(),pr.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,A)=>u.set(w,A)),t.forEach((w,A)=>{var x;return h.set(w,new hV(A,null!==(x=u.get(w))&&void 0!==x?x:null))}),h))}recalculateAndSaveOverlays(e,t){const r=X_();let i=new Rr((u,h)=>u-h),a=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let A=r.get(_)||Ls.empty();A=h.applyToLocalView(w,A),r.set(_,A);const x=(i.get(h.batchId)||Qt()).add(_);i=i.insert(h.batchId,x)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,A=_.value,x=Px();A.forEach(N=>{if(!a.has(N)){const H=Tx(t.get(N),r.get(N));null!==H&&x.set(N,H),a=a.add(N)}}),u.push(this.documentOverlayCache.saveOverlays(e,w,x))}return he.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(xu());let h=-1,_=a;return u.next(w=>he.forEach(w,(A,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(A)?he.resolve():this.getBaseDocument(e,A,x).next(N=>{_=_.insert(A,N)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Qt())).next(A=>({batchId:h,changes:Og(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=eh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=eh();return this.indexManager.getCollectionParents(e,i).next(u=>he.forEach(u,h=>{const _=(w=t,A=h.child(i),new Au(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,A;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((A,x)=>{a=a.insert(A,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,tr.newInvalidDocument(w)))});let u=eh();return i.forEach((h,_)=>{const w=a.get(h);void 0!==w&&kg(w.mutation,_,Ls.empty(),pr.now()),T0(t,_)&&(u=u.insert(h,_))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(tr.newInvalidDocument(t))}}class fV{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return he.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ii(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Gx(r.bundledQuery),readTime:Ii(r.readTime)}),he.resolve();var r}}class pV{constructor(){this.overlays=new Rr(We.comparator),this.es=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xu();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=xu(),a=t.length+1,u=new We(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Rr((w,A)=>w-A);const u=this.overlays.getIterator();for(;u.hasNext();){const w=u.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let A=a.get(w.largestBatchId);null===A&&(A=xu(),a=a.insert(w.largestBatchId,A)),A.set(w.getKey(),w)}}const h=xu(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,A)=>h.set(w,A)),!(h.size()>=i)););return he.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new $x(t,r));let a=this.es.get(t);void 0===a&&(a=Qt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class zx{constructor(){this.ns=new Bn(ts.ss),this.rs=new Bn(ts.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ts(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ts(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new We(new En([])),r=new ts(t,e),i=new ts(t,e+1),a=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),a.push(u.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new We(new En([])),r=new ts(t,e),i=new ts(t,e+1);let a=Qt();return this.rs.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new ts(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ts{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return We.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||We.comparator(e.key,t.key)}}class gV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Bn(ts.ss)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new jx(a,t,r,i);this.mutationQueue.push(u);for(const h of i)this.gs=this.gs.add(new ts(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(u)}lookupMutationBatch(e,t){return he.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ts(t,0),i=new ts(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],u=>{const h=this.ys(u._s);a.push(h)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Gt);return t.forEach(i=>{const a=new ts(i,0),u=new ts(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,u],h=>{r=r.add(h._s)})}),he.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const u=new ts(new We(a),0);let h=new Bn(Gt);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_._s)),!0)},u),he.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Nt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return he.forEach(t.mutations,i=>{const a=new ts(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ts(t,0),i=this.gs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mV{constructor(e){this.Es=e,this.docs=new Rr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=Vs();const a=new We(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:_}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||c0(ZI(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}As(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _V(this)}getSize(e){return he.resolve(this.size)}}class _V extends Ck{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class yV{constructor(e){this.persistence=e,this.Rs=new fl(t=>Pf(t),xg),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.bs=0,this.Ps=new zx,this.targetCount=0,this.vs=qg.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),he.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new qg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Dn(t),he.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Ps.containsKey(t))}}class xk{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ji(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new yV(this),this.indexManager=new rV,this.remoteDocumentCache=new mV(r=>this.referenceDelegate.xs(r)),this.It=new ok(t),this.Ns=new fV(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new gV(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new vV(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return he.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class vV extends KI{constructor(e){super(),this.currentSequenceNumber=e}}class MD{constructor(e){this.persistence=e,this.Fs=new zx,this.$s=null}static Bs(e){return new MD(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),he.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,r=>{const i=We.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Ot.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return he.or([()=>he.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class wV{constructor(e){this.It=e}$(e,t,r,i){const a=new Ag("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",St,{unique:!0}),h.createObjectStore("documentMutations"),Mk(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Mk(e)),u=u.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",St,{unique:!0});const A=_.store("mutations"),x=w.map(N=>A.put(N));return he.waitFor(x)})}(e,a))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(a))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(a))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(a))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:q2});_.createIndex("collectionPathOverlayIndex",W2,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",z2,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:mr});_.createIndex("documentKeyIndex",th),_.createIndex("collectionGroupIndex",V0)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:$0}).createIndex("sequenceNumberIndex",G0,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:q0}).createIndex("documentKeyIndex",W0,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=AD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>he.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(h=>he.forEach(h,_=>{Nt(_.userId===a.userId);const w=jg(this.It,_);return yk(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((u,h)=>{const _=new En(u),w=[0,Ce(_)];a.push(t.get(w).next(A=>A?he.resolve():t.put({targetId:0,path:Ce(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:H0});const r=t.store("collectionParents"),i=new Wx,a=u=>{if(i.add(u)){const h=u.lastSegment(),_=u.popLast();return r.put({collectionId:h,parent:Ce(_)})}};return t.store("remoteDocuments").Z({X:!0},(u,h)=>{const _=new En(u);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,h,_],w)=>{const A=it(h);return a(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=z0(i),u=lk(this.It,a);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,u)=>{const h=t.store("remoteDocumentsV14"),_=(w=u,w.document?new We(En.fromString(w.document.name).popFirst(5)):w.noDocument?We.fromSegments(w.noDocument.path):w.unknownDocument?We.fromSegments(w.unknownDocument.path):ft()).path.toArray();var w;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(A))}).next(()=>he.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Ik(this.It),a=new xk(MD.Bs,this.It.re);return r.W().next(u=>{const h=new Map;return u.forEach(_=>{var w;let A=null!==(w=h.get(_.userId))&&void 0!==w?w:Qt();jg(this.It,_).keys().forEach(x=>A=A.add(x)),h.set(_.userId,A)}),he.forEach(h,(_,w)=>{const A=new xr(w),x=ID.oe(this.It,A),N=a.getIndexManager(A),H=SD.oe(A,this.It,N,a.referenceDelegate);return new Sk(i,H,x,N).recalculateAndSaveOverlaysForDocumentKeys(new Bx(t,Ji.at),_).next()})})}}function Mk(n){n.createObjectStore("targetDocuments",{keyPath:B0}).createIndex("documentTargetsIndex",j0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",U0,{unique:!0}),n.createObjectStore("targetGlobal")}const Zx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kx{constructor(e,t,r,i,a,u,h,_,w,A,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=u,this.document=h,this.Js=w,this.Ys=A,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!Kx.C())throw new Ve(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uV(this,i),this.ii=t+"main",this.It=new ok(_),this.ri=new jo(this.ii,this.Xs,new wV(this.It)),this.Cs=new sV(this.referenceDelegate,this.It),this.remoteDocumentCache=Ik(this.It),this.Ns=new Q2,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&$r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(be.FAILED_PRECONDITION,Zx);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ji(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>RD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zd(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return X0(e).get("owner").next(t=>he.resolve(this.mi(t)))}gi(e){return RD(e).delete(this.clientId)}yi(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=es(r,"clientMetadata");return i.W().next(a=>{const u=e.Ii(a,18e5),h=a.filter(_=>-1===u.indexOf(_));return he.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?he.resolve(!0):X0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ve(be.FAILED_PRECONDITION,Zx);return!1}}return!(!this.networkEnabled||!this.inForeground)||RD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Bx(t,Ji.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>RD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return SD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iV(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ID.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Xs)?K2:14===u?sk:13===u?ik:12===u?Z2:11===u?rk:void ft();var u;let h;return this.ri.runTransaction(e,i,a,_=>(h=new Bx(_,this.Ss?this.Ss.next():Ji.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw $r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ve(be.FAILED_PRECONDITION,d0);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Vi(e){return X0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(be.FAILED_PRECONDITION,Zx)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return X0(e).put("owner",t)}static C(){return jo.C()}_i(e){const t=X0(e);return t.get("owner").next(r=>this.mi(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&($r(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){$r("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function X0(n){return es(n,"owner")}function RD(n){return es(n,"clientMetadata")}function Yx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Qx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Qt(),i=Qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Qx(e,t.fromCache,r,i)}}class Rk{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(iD(t))return he.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Nf(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Qt(...a);return this.Ni.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,h);return this.$i(t,w,u,_.readTime)?this.ki(e,Nf(t,null,"F")):this.Bi(e,w,t,_)}))})))}Oi(e,t,r,i){return iD(t)||i.isEqual(Ot.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const u=this.Fi(t,a);return this.$i(t,u,r,i)?this.Mi(e,t):(t0()<=Ea.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oD(t)),this.Bi(e,u,t,Cf(i,-1)))})}Fi(e,t){let r=new Bn(lD(e));return t.forEach((i,a)=>{T0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return t0()<=Ea.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",oD(t)),this.Ni.getDocumentsMatchingQuery(e,t,vs.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class bV{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Rr(Gt),this.qi=new fl(a=>Pf(a),xg),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sk(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Pk(n,e,t,r){return new bV(n,e,t,r)}function kk(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Te.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let _=Qt();for(const w of i){u.push(w.batchId);for(const A of w.mutations)_=_.add(A.key)}for(const w of a){h.push(w.batchId);for(const A of w.mutations)_=_.add(A.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:u,addedBatchIds:h}))})})}),Jx.apply(this,arguments)}function EV(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,h,_,w){const A=_.batch,x=A.keys();let N=he.resolve();return x.forEach(H=>{N=N.next(()=>w.getEntry(h,H)).next(q=>{const fe=_.docVersions.get(H);Nt(null!==fe),q.version.compareTo(fe)<0&&(A.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),w.addEntry(q)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(h,A))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Qt();for(let _=0;_<u.mutationResults.length;++_)u.mutationResults[_].transformResults.length>0&&(h=h.add(u.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Nk(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function CV(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((A,x)=>{const N=i.get(x);if(!N)return;h.push(t.Cs.removeMatchingKeys(a,A.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(a,A.addedDocuments,x)));let H=N.withSequenceNumber(a.currentSequenceNumber);var q,fe,Ie;e.targetMismatches.has(x)?H=H.withResumeToken(di.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,r)),i=i.insert(x,H),fe=H,Ie=A,(0===(q=N).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,H))});let _=Vs(),w=Qt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,A))}),h.push(Ok(a,u,e.documentUpdates).next(A=>{_=A.Wi,w=A.zi})),!r.isEqual(Ot.min())){const A=t.Cs.getLastRemoteSnapshotVersion(a).next(x=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(A)}return he.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ui=i,a))}function Ok(n,e,t){let r=Qt(),i=Qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=Vs();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(Ot.min())?(e.removeEntry(h,_.readTime),u=u.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),u=u.insert(h,_)):je("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Wi:u,zi:i}})}function IV(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ay(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new Vf(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ly(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,Te.Z)(function*(n,e,t){const r=rt(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!zd(u))throw u;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Xx.apply(this,arguments)}function PD(n,e,t){const r=rt(n);let i=Ot.min(),a=Qt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,_,w){const A=rt(h),x=A.qi.get(w);return void 0!==x?he.resolve(A.Ui.get(x)):A.Cs.getTargetData(_,w)}(r,u,Xi(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,h.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Ot.min(),t?a:Qt())).next(h=>(Vk(r,aD(e),h),{documents:h,Hi:a})))}function Fk(n,e){const t=rt(n),r=rt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(u=>u?u.target:null))}function Lk(n,e){const t=rt(n),r=t.Ki.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Cf(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Vk(t,e,i),i))}function Vk(n,e,t){let r=n.Ki.get(e)||Ot.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function eM(){return eM=(0,Te.Z)(function*(n,e,t,r){const i=rt(n);let a=Qt(),u=Vs();for(const w of t){const A=e.Ji(w.metadata.name);w.document&&(a=a.add(A));const x=e.Yi(w);x.setReadTime(e.Xi(w.metadata.readTime)),u=u.insert(A,x)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield ay(i,(w=r,Xi(Jd(En.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>Ok(w,h,u).next(A=>(h.apply(w),A)).next(A=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,A.Wi,A.zi)).next(()=>A.Wi)))}),eM.apply(this,arguments)}function TV(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,Te.Z)(function*(n,e,t=Qt()){const r=yield ay(n,Xi(Gx(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Ii(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(di.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),tM.apply(this,arguments)}function Uk(n,e){return`firestore_clients_${n}_${e}`}function Bk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function nM(n,e){return`firestore_targets_${n}_${e}`}class kD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Ve(i.error.code,i.error.message))),u?new kD(e,t,i.state,a):($r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ve(r.error.code,r.error.message))),a?new eb(e,r.state,i):($r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ND{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ey();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=gx(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new ND(e,a):($r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rM{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rM(t.clientId,t.onlineState):($r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iM{constructor(){this.activeTargetIds=ey()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sM{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Rr(Gt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Uk(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new iM),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(Uk(e.persistenceKey,i));if(a){const u=ND.Zi(i,a);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(nM(this.persistenceKey,e));if(r){const i=eb.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void $r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let u=Ji.at;if(null!=a)try{const h=JSON.parse(a);Nt("number"==typeof h),u=h}catch(h){$r("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==Ji.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new kD(this.currentUser,e,t,r),a=Bk(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Bk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=nM(this.persistenceKey,e),a=new eb(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ND.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return kD.Zi(new xr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return eb.Zi(i,t)}yr(e){return rM.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),u=[],h=[];return a.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Br(u,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=ey();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class jk{constructor(){this.Lr=new iM,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new iM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class AV{qr(e){}shutdown(){}}class Hk{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const SV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xV{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class MV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const u=this.ho(e,t);je("RestConnection","Sending: ",u,r);const h={};return this.lo(h,i,a),this.fo(e,u,h,r).then(_=>(je("RestConnection","Received: ",_),_),_=>{throw $d("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}_o(e,t,r,i,a,u){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${SV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,u)=>{const h=new sx;h.listenOnce(ix.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Xw.NO_ERROR:const w=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Xw.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),u(new Ve(be.DEADLINE_EXCEEDED,"Request time out"));break;case Xw.HTTP_ERROR:const A=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',A,"response text:",h.getResponseText()),A>0){const x=h.getResponseJson().error;if(x&&x.status&&x.message){const N=function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(q)>=0?q:be.UNKNOWN}(x.status);u(new Ve(N,x.message))}else u(new Ve(be.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Ve(be.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=nx(),u=rx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new e0({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const _=i.join("");je("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let A=!1,x=!1;const N=new xV({Hr:q=>{x?je("Connection","Not sending because WebChannel is closed:",q):(A||(je("Connection","Opening WebChannel transport."),w.open(),A=!0),je("Connection","WebChannel sending:",q),w.send(q))},Jr:()=>w.close()}),H=(q,fe,Ie)=>{q.listen(fe,Xe=>{try{Ie(Xe)}catch(ct){setTimeout(()=>{throw ct},0)}})};return H(w,lo.EventType.OPEN,()=>{x||je("Connection","WebChannel transport opened.")}),H(w,lo.EventType.CLOSE,()=>{x||(x=!0,je("Connection","WebChannel transport closed"),N.io())}),H(w,lo.EventType.ERROR,q=>{x||(x=!0,$d("Connection","WebChannel transport errored:",q),N.io(new Ve(be.UNAVAILABLE,"The operation could not be completed")))}),H(w,lo.EventType.MESSAGE,q=>{var fe;if(!x){const Ie=q.data[0];Nt(!!Ie);const Xe=Ie,ct=Xe.error||(null===(fe=Xe[0])||void 0===fe?void 0:fe.error);if(ct){je("Connection","WebChannel received error:",ct);const pt=ct.status;let gt=function(Zt){const Wr=ri[Zt];if(void 0!==Wr)return k0(Wr)}(pt),Vt=ct.message;void 0===gt&&(gt=be.INTERNAL,Vt="Unknown error status: "+pt+" with message "+ct.message),x=!0,N.io(new Ve(gt,Vt)),w.close()}else je("Connection","WebChannel received:",Ie),N.ro(Ie)}}),H(u,Tg.STAT_EVENT,q=>{q.stat===HI.PROXY?je("Connection","Detected buffering proxy"):q.stat===HI.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function $k(){return typeof window<"u"?window:null}function OD(){return typeof document<"u"?document:null}function tb(n){return new Ox(n,!0)}class oM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Gk{constructor(e,t,r,i,a,u,h,_){this.Hs=e,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new oM(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Te.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Te.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===be.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Ve(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,Te.Z)(function*(){e.state=0,e.start()}))}jo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RV extends Gk{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function nk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ft(),i=e.targetChange.targetIds||[],a=function(_,w){return _.gt?(Nt(void 0===w||"string"==typeof w),di.fromBase64String(w||"")):(Nt(void 0===w||w instanceof Uint8Array),di.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(_){const w=void 0===_.code?be.UNKNOWN:k0(_.code);return new Ve(w,_.message||"")}(u);t=new gD(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),a=Ii(r.document.updateTime),u=new ji({mapValue:{fields:r.document.fields}}),h=tr.newFoundDocument(i,a,u);t=new Lg(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),a=r.readTime?Ii(r.readTime):Ot.min(),u=tr.newNoDocument(i,a);t=new Lg([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new Lg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new Rx(r.count||0);t=new O0(r.targetId,a)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?Ii(a.readTime):Ot.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=ry(this.It),t.addTarget=function(i,a){let u;const h=a.target;return u=W_(h)?{documents:o(i,h)}:{query:l(i,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=Fx(i,a.resumeToken):a.snapshotVersion.compareTo(Ot.min())>0&&(u.readTime=Vg(i,a.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function f(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=ry(this.It),t.removeTarget=e,this.Lo(t)}}class PV extends Gk{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function s(n,e){return n&&n.length>0?(Nt(void 0!==e),n.map(t=>function(r,i){let a=Ii(r.updateTime?r.updateTime:i);return a.isEqual(Ot.min())&&(a=Ii(i)),new dD(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.tu(r,t)}return Nt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=ry(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>iy(this.It,r))};this.Lo(t)}}class kV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Ve(be.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(be.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.So._o(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(be.UNKNOWN,a.toString())})}terminate(){this.su=!0}}class OV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?($r(t),this.uu=!1):je("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class FV{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.qr(h=>{r.enqueueAndForget((0,Te.Z)(function*(){var _;nh(u)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Te.Z)(function*(w){const A=rt(w);A.wu.add(4),yield uy(A),A.yu.set("Unknown"),A.wu.delete(4),yield nb(A)}),function(w){return _.apply(this,arguments)})(u))}))}),this.yu=new OV(r,i)}}function nb(n){return lM.apply(this,arguments)}function lM(){return lM=(0,Te.Z)(function*(n){if(nh(n))for(const e of n.mu)yield e(!0)}),lM.apply(this,arguments)}function uy(n){return uM.apply(this,arguments)}function uM(){return uM=(0,Te.Z)(function*(n){for(const e of n.mu)yield e(!1)}),uM.apply(this,arguments)}function FD(n,e){const t=rt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),hM(t)?dM(t):dy(t).Oo()&&cM(t,e))}function rb(n,e){const t=rt(n),r=dy(t);t._u.delete(e),r.Oo()&&qk(t,e),0===t._u.size&&(r.Oo()?r.$o():nh(t)&&t.yu.set("Unknown"))}function cM(n,e){n.pu.Mt(e.targetId),dy(n).Ho(e)}function qk(n,e){n.pu.Mt(e),dy(n).Jo(e)}function dM(n){n.pu=new _D({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),dy(n).start(),n.yu.cu()}function hM(n){return nh(n)&&!dy(n).ko()&&n._u.size>0}function nh(n){return 0===rt(n).wu.size}function Wk(n){n.pu=void 0}function LV(n){return fM.apply(this,arguments)}function fM(){return fM=(0,Te.Z)(function*(n){n._u.forEach((e,t)=>{cM(n,e)})}),fM.apply(this,arguments)}function VV(n,e){return pM.apply(this,arguments)}function pM(){return pM=(0,Te.Z)(function*(n,e){Wk(n),hM(n)?(n.yu.lu(e),dM(n)):n.yu.set("Unknown")}),pM.apply(this,arguments)}function UV(n,e,t){return gM.apply(this,arguments)}function gM(){return gM=(0,Te.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof gD&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,a){const u=a.cause;for(const h of a.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i._u.delete(h),i.pu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield LD(n,r)}else if(e instanceof Lg?n.pu.Gt(e):e instanceof O0?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Ot.min()))try{const r=yield Nk(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.pu.te(a);return u.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i._u.get(_);w&&i._u.set(_,w.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const _=i._u.get(h);if(!_)return;i._u.set(h,_.withResumeToken(di.EMPTY_BYTE_STRING,_.snapshotVersion)),qk(i,h);const w=new Vf(_.target,h,1,_.sequenceNumber);cM(i,w)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield LD(n,r)}var r}),gM.apply(this,arguments)}function LD(n,e,t){return mM.apply(this,arguments)}function mM(){return mM=(0,Te.Z)(function*(n,e,t){if(!zd(e))throw e;n.wu.add(1),yield uy(n),n.yu.set("Offline"),t||(t=()=>Nk(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield nb(n)}))}),mM.apply(this,arguments)}function zk(n,e){return e().catch(t=>LD(n,t,e))}function cy(n){return _M.apply(this,arguments)}function _M(){return _M=(0,Te.Z)(function*(n){const e=rt(n),t=jf(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;BV(e);)try{const i=yield IV(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,jV(e,i)}catch(i){yield LD(e,i)}Zk(e)&&Kk(e)}),_M.apply(this,arguments)}function BV(n){return nh(n)&&n.du.length<10}function jV(n,e){n.du.push(e);const t=jf(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function Zk(n){return nh(n)&&!jf(n).ko()&&n.du.length>0}function Kk(n){jf(n).start()}function HV(n){return yM.apply(this,arguments)}function yM(){return yM=(0,Te.Z)(function*(n){jf(n).nu()}),yM.apply(this,arguments)}function $V(n){return vM.apply(this,arguments)}function vM(){return vM=(0,Te.Z)(function*(n){const e=jf(n);for(const t of n.du)e.Zo(t.mutations)}),vM.apply(this,arguments)}function GV(n,e,t){return wM.apply(this,arguments)}function wM(){return wM=(0,Te.Z)(function*(n,e,t){const r=n.du.shift(),i=Hx.from(r,e,t);yield zk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cy(n)}),wM.apply(this,arguments)}function qV(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,Te.Z)(function*(n,e){var t;e&&jf(n).Xo&&(yield(t=(0,Te.Z)(function*(r,i){if(jc(a=i.code)&&a!==be.ABORTED){const u=r.du.shift();jf(r).Fo(),yield zk(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield cy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Zk(n)&&Kk(n)}),bM.apply(this,arguments)}function Yk(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,Te.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=nh(t);t.wu.add(3),yield uy(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield nb(t)}),EM.apply(this,arguments)}function CM(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,Te.Z)(function*(n,e){const t=rt(n);e?(t.wu.delete(2),yield nb(t)):e||(t.wu.add(2),yield uy(t),t.yu.set("Unknown"))}),IM.apply(this,arguments)}function dy(n){return n.Iu||(n.Iu=function(e,t,r){const i=rt(e);return i.iu(),new RV(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:LV.bind(null,n),Zr:VV.bind(null,n),zo:UV.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Iu.Fo(),hM(n)?dM(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Wk(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function jf(n){return n.Tu||(n.Tu=function(e,t,r){const i=rt(e);return i.iu(),new PV(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:HV.bind(null,n),Zr:qV.bind(null,n),eu:$V.bind(null,n),tu:GV.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Tu.Fo(),yield cy(n)):(yield n.Tu.stop(),n.du.length>0&&(je("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class DM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,h=new DM(e,t,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(n,e){if($r("AsyncQueue",`${e}: ${n}`),zd(n))return new Ve(be.UNAVAILABLE,`${e}: ${n}`);throw n}class fy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=eh(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new fy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Qk{constructor(){this.Eu=new Rr(We.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ft():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class py{constructor(e,t,r,i,a,u,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new py(e,t,fy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&co(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class WV{constructor(){this.Ru=void 0,this.listeners=[]}}class zV{constructor(){this.queries=new fl(e=>sD(e),co),this.onlineState="Unknown",this.bu=new Set}}function TM(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,Te.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new WV),i)try{a.Ru=yield t.onListen(r)}catch(u){const h=hy(u,`Initialization of query '${oD(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.vu(a.Ru)&&MM(t)}),AM.apply(this,arguments)}function SM(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,Te.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),xM.apply(this,arguments)}function ZV(n,e){const t=rt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.vu(i)&&(r=!0);u.Ru=i}}r&&MM(t)}function KV(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function MM(n){n.bu.forEach(e=>{e.next()})}class RM{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.Vu.next(e)}}class YV{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class Jk{constructor(e){this.It=e}Ji(e){return Mu(this.It,e)}Yi(e){return e.metadata.exists?Ux(this.It,e.document,!1):tr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ii(e)}}class QV{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Xk(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=En.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Jk(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Qt()).add(a);t.set(u,h)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function DV(n,e,t,r){return eM.apply(this,arguments)}(e.localStore,new Jk(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield TV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Xk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class nN{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=lD(e),this.Qu=new fy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Qk,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const N=i.get(A),H=T0(this.query,x)?x:null,q=!!N&&this.mutatedKeys.has(N.key),fe=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Ie=!1;N&&H?N.data.isEqual(H.data)?q!==fe&&(r.track({type:3,doc:H}),Ie=!0):this.Hu(N,H)||(r.track({type:2,doc:H}),Ie=!0,(_&&this.Gu(H,_)>0||w&&this.Gu(H,w)<0)&&(h=!0)):!N&&H?(r.track({type:0,doc:H}),Ie=!0):N&&!H&&(r.track({type:1,doc:N}),Ie=!0,(_||w)&&(h=!0)),Ie&&(H?(u=u.add(H),a=fe?a.add(A):a.delete(A)):(u=u.delete(A),a=a.delete(A)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const A="F"===this.query.limitType?u.last():u.first();u=u.delete(A.key),a=a.delete(A.key),r.track({type:1,doc:A})}return{Qu:u,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((w,A)=>function(x,N){const H=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return H(x)-H(N)}(w.type,A.type)||this.Gu(w.doc,A.doc)),this.Ju(r);const u=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==a.length||_?{snapshot:new py(this.query,e.Qu,i,a,e.mutatedKeys,0===h,_,!1),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Qk,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new tN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new eN(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return py.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class JV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XV{constructor(e){this.key=e,this.nc=!1}}class eU{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new fl(h=>sD(h),co),this.rc=new Map,this.oc=new Set,this.uc=new Rr(We.comparator),this.cc=new Map,this.ac=new zx,this.hc={},this.lc=new Map,this.fc=qg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function tU(n,e){return PM.apply(this,arguments)}function PM(){return PM=(0,Te.Z)(function*(n,e){const t=tR(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const u=yield ay(t.localStore,Xi(e));t.isPrimaryClient&&FD(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield kM(t,e,r,"current"===h)}return i}),PM.apply(this,arguments)}function kM(n,e,t,r){return NM.apply(this,arguments)}function NM(){return NM=(0,Te.Z)(function*(n,e,t,r){n._c=(A,x,N)=>{return(H=(0,Te.Z)(function*(q,fe,Ie,Xe){let ct=fe.view.Wu(Ie);ct.$i&&(ct=yield PD(q.localStore,fe.query,!1).then(({documents:Vt})=>fe.view.Wu(Vt,ct)));const pt=Xe&&Xe.targetChanges.get(fe.targetId),gt=fe.view.applyChanges(ct,q.isPrimaryClient,pt);return GM(q,fe.targetId,gt.Xu),gt.snapshot}),function(q,fe,Ie,Xe){return H.apply(this,arguments)})(n,A,x,N);var H};const i=yield PD(n.localStore,e,!0),a=new nN(e,i.Hi),u=a.Wu(i.documents),h=Lf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(u,n.isPrimaryClient,h);GM(n,t,_.Xu);const w=new JV(e,t,a);return n.ic.set(e,w),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),_.snapshot}),NM.apply(this,arguments)}function nU(n,e){return OM.apply(this,arguments)}function OM(){return OM=(0,Te.Z)(function*(n,e){const t=rt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!co(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rb(t.remoteStore,r.targetId),gy(t,r.targetId)}).catch(Pc))):(gy(t,r.targetId),yield ly(t.localStore,r.targetId,!0))}),OM.apply(this,arguments)}function FM(){return FM=(0,Te.Z)(function*(n,e,t){const r=nR(n);try{const i=yield function(a,u){const h=rt(a),_=pr.now(),w=u.reduce((N,H)=>N.add(H.key),Qt());let A,x;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let H=Vs(),q=Qt();return h.Gi.getEntries(N,w).next(fe=>{H=fe,H.forEach((Ie,Xe)=>{Xe.isValidDocument()||(q=q.add(Ie))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,H)).next(fe=>{A=fe;const Ie=[];for(const Xe of u){const ct=Ax(Xe,A.get(Xe.key).overlayedDocument);null!=ct&&Ie.push(new Bc(Xe.key,ct,Sg(ct.value.mapValue),gr.exists(!0)))}return h.mutationQueue.addMutationBatch(N,_,Ie,u)}).next(fe=>{x=fe;const Ie=fe.applyToLocalDocumentSet(A,q);return h.documentOverlayCache.saveOverlays(N,fe.batchId,Ie)})}).then(()=>({batchId:x.batchId,changes:Og(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let _=a.hc[a.currentUser.toKey()];_||(_=new Rr(Gt)),_=_.insert(u,h),a.hc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield rh(r,i.changes),yield cy(r.remoteStore)}catch(i){const a=hy(i,"Failed to persist write");t.reject(a)}}),FM.apply(this,arguments)}function rN(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,Te.Z)(function*(n,e){const t=rt(n);try{const r=yield CV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.cc.get(a);u&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Nt(u.nc):i.removedDocuments.size>0&&(Nt(u.nc),u.nc=!1))}),yield rh(t,r,e)}catch(r){yield Pc(r)}}),LM.apply(this,arguments)}function iN(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,u)=>{const h=u.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(a,u){const h=rt(a);h.onlineState=u;let _=!1;h.queries.forEach((w,A)=>{for(const x of A.listeners)x.Pu(u)&&(_=!0)}),_&&MM(h)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iU(n,e,t){return VM.apply(this,arguments)}function VM(){return VM=(0,Te.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let u=new Rr(We.comparator);u=u.insert(a,tr.newNoDocument(a,Ot.min()));const h=Qt().add(a),_=new Fg(Ot.min(),new Map,new Bn(Gt),u,h);yield rN(r,_),r.uc=r.uc.remove(a),r.cc.delete(e),qM(r)}else yield ly(r.localStore,e,!1).then(()=>gy(r,e,t)).catch(Pc)}),VM.apply(this,arguments)}function sU(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,Te.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield EV(t.localStore,e);$M(t,r,null),HM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rh(t,i)}catch(i){yield Pc(i)}}),UM.apply(this,arguments)}function oU(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,Te.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,u){const h=rt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,u).next(A=>(Nt(null!==A),w=A.keys(),h.mutationQueue.removeMutationBatch(_,A))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);$M(r,e,t),HM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rh(r,i)}catch(i){yield Pc(i)}}),BM.apply(this,arguments)}function jM(){return jM=(0,Te.Z)(function*(n,e){const t=rt(n);nh(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=rt(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=hy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),jM.apply(this,arguments)}function HM(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function $M(n,e,t){const r=rt(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||sN(n,r)})}function sN(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(rb(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),qM(n))}function GM(n,e,t){for(const r of t)r instanceof eN?(n.ac.addReference(r.key,e),lU(n,r)):r instanceof tN?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||sN(n,r.key)):ft()}function lU(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.oc.add(r),qM(n))}function qM(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new We(En.fromString(e)),r=n.fc.next();n.cc.set(r,new XV(t)),n.uc=n.uc.insert(t,r),FD(n.remoteStore,new Vf(Xi(Jd(t.path)),r,2,Ji.at))}}function rh(n,e,t){return WM.apply(this,arguments)}function WM(){return WM=(0,Te.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],u=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,_)=>{u.push(r._c(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const A=Qx.Ci(_.targetId,w);a.push(A)}}))}),yield Promise.all(u),r.sc.zo(i),yield(h=(0,Te.Z)(function*(_,w){const A=rt(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>he.forEach(w,N=>he.forEach(N.Si,H=>A.persistence.referenceDelegate.addReference(x,N.targetId,H)).next(()=>he.forEach(N.Di,H=>A.persistence.referenceDelegate.removeReference(x,N.targetId,H)))))}catch(x){if(!zd(x))throw x;je("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const N=x.targetId;if(!x.fromCache){const H=A.Ui.get(N),fe=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);A.Ui=A.Ui.insert(N,fe)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),WM.apply(this,arguments)}function uU(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,Te.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield kk(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(h=>{h.reject(new Ve(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rh(t,r.ji)}var i}),zM.apply(this,arguments)}function cU(n,e){const t=rt(n),r=t.cc.get(e);if(r&&r.nc)return Qt().add(r.key);{let i=Qt();const a=t.rc.get(e);if(!a)return i;for(const u of a){const h=t.ic.get(u);i=i.unionWith(h.view.ju)}return i}}function dU(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Te.Z)(function*(n,e){const t=rt(n),r=yield PD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&GM(t,e.targetId,i.Xu),i}),ZM.apply(this,arguments)}function hU(n,e){return KM.apply(this,arguments)}function KM(){return KM=(0,Te.Z)(function*(n,e){const t=rt(n);return Lk(t.localStore,e).then(r=>rh(t,r))}),KM.apply(this,arguments)}function fU(n,e,t,r){return YM.apply(this,arguments)}function YM(){return YM=(0,Te.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(u,h){const _=rt(u),w=rt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>w.Tn(A,h).next(x=>x?_.localDocuments.getDocuments(A,x):he.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield cy(i.remoteStore):"acknowledged"===t||"rejected"===t?($M(i,e,r||null),HM(i,e),h=e,rt(rt(i.localStore).mutationQueue).An(h)):ft(),yield rh(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),YM.apply(this,arguments)}function QM(){return QM=(0,Te.Z)(function*(n,e){const t=rt(n);if(tR(t),nR(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield oN(t,r.toArray());t.dc=!0,yield CM(t.remoteStore,!0);for(const a of i)FD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(gy(t,u),ly(t.localStore,u,!0))),rb(t.remoteStore,u)}),yield i,yield oN(t,r),function(a){const u=rt(a);u.cc.forEach((h,_)=>{rb(u.remoteStore,_)}),u.ac.fs(),u.cc=new Map,u.uc=new Rr(We.comparator)}(t),t.dc=!1,yield CM(t.remoteStore,!1)}}),QM.apply(this,arguments)}function oN(n,e,t){return JM.apply(this,arguments)}function JM(){return JM=(0,Te.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const u of e){let h;const _=r.rc.get(u);if(_&&0!==_.length){h=yield ay(r.localStore,Xi(_[0]));for(const w of _){const A=r.ic.get(w),x=yield dU(r,A);x.snapshot&&a.push(x.snapshot)}}else{const w=yield Fk(r.localStore,u);h=yield ay(r.localStore,w),yield kM(r,aN(w),u,!1)}i.push(h)}return r.sc.zo(a),i}),JM.apply(this,arguments)}function aN(n){return I0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gU(n){const e=rt(n);return rt(rt(e.localStore).persistence).vi()}function mU(n,e,t,r){return XM.apply(this,arguments)}function XM(){return XM=(0,Te.Z)(function*(n,e,t,r){const i=rt(n);if(i.dc)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield Lk(i.localStore,aD(a[0])),h=Fg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield rh(i,u,h);break}case"rejected":yield ly(i.localStore,e,!0),gy(i,e,r);break;default:ft()}}),XM.apply(this,arguments)}function _U(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,Te.Z)(function*(n,e,t){const r=tR(n);if(r.dc){for(const i of e){if(r.rc.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield Fk(r.localStore,i),u=yield ay(r.localStore,a);yield kM(r,aN(a),u.targetId,!1),FD(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield ly(r.localStore,i,!1).then(()=>{rb(r.remoteStore,i),gy(r,i)}).catch(Pc))}}),eR.apply(this,arguments)}function tR(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iU.bind(null,e),e.sc.zo=ZV.bind(null,e.eventManager),e.sc.wc=KV.bind(null,e.eventManager),e}function nR(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oU.bind(null,e),e}class lN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.It=tb(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Pk(this.persistence,new Rk,e.initialUser,this.It)}yc(e){return new xk(MD.Bs,this.It)}gc(e){return new jk}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uN extends lN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield nR(r.Ac.syncEngine),yield cy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Pk(this.persistence,new Rk,e.initialUser,this.It)}Tc(e,t){return new aV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new QI(t,this.persistence);return new cx(e.asyncQueue,r)}yc(e){const t=Yx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$o.withCacheSize(this.cacheSizeBytes):$o.DEFAULT;return new Kx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$k(),OD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new jk}}class vU extends uN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof sM&&(r.sharedClientState.syncEngine={Fr:fU.bind(null,i),$r:mU.bind(null,i),Br:_U.bind(null,i),vi:gU.bind(null,i),Mr:hU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Te.Z)(function*(u){yield function pU(n,e){return QM.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}gc(e){const t=$k();if(!sM.C(t))throw new Ve(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Yx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rR{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=uU.bind(null,r.syncEngine),yield CM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zV}createDatastore(e){const t=tb(e.databaseInfo.databaseId),r=new MV(e.databaseInfo);return new kV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>iN(this.syncEngine,h,0),u=Hk.C()?new Hk:new AV,new FV(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,h,_,w){const A=new eU(r,i,a,u,h,_);return w&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=rt(t);je("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield uy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function iR(n,e,t){if(!t)throw new Ve(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cN(n,e,t,r){if(!0===e&&!0===r)throw new Ve(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dN(n){if(!We.isDocumentKey(n))throw new Ve(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hN(n){if(We.isDocumentKey(n))throw new Ve(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=VD(n);throw new Ve(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fN(n,e){if(e<=0)throw new Ve(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const pN=new Map;class gN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ib{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GI;switch(t.type){case"gapi":return new ax(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ve(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pN.get(e);t&&(je("ComponentProvider","Removing Datastore"),pN.delete(e),t.terminate())}(this),Promise.resolve()}}class Er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}}class Us{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class Hc extends Us{constructor(e,t,r){super(e,t,Jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new We(e))}withConverter(e){return new Hc(this.firestore,e,this._path)}}function _N(n,e,...t){if(n=(0,L.m9)(n),iR("collection","path",e),n instanceof ib){const r=En.fromString(e,...t);return hN(r),new Hc(n,null,r)}{if(!(n instanceof Er||n instanceof Hc))throw new Ve(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return hN(r),new Hc(n.firestore,null,r)}}function UD(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=o0.R()),iR("doc","path",e),n instanceof ib){const r=En.fromString(e,...t);return dN(r),new Er(n,null,new We(r))}{if(!(n instanceof Er||n instanceof Hc))throw new Ve(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return dN(r),new Er(n.firestore,n instanceof Hc?n.converter:null,new We(r))}}function yN(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof Er||n instanceof Hc)&&(e instanceof Er||e instanceof Hc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sR(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Us&&e instanceof Us&&n.firestore===e.firestore&&co(n._query,e._query)&&n.converter===e.converter}function vN(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class BD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class bU{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new YV(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Te.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ve(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(a,u){const h=rt(a),_=ry(h.It)+"/documents",w={documents:u.map(H=>ny(h.It,H))},A=yield h._o("BatchGetDocuments",_,w,u.length),x=new Map;A.forEach(H=>{const q=function tk(n,e){return"found"in e?function(t,r){Nt(!!r.found);const i=Mu(t,r.found.name),a=Ii(r.found.updateTime),u=new ji({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Nt(!!r.missing),Nt(!!r.readTime);const i=Mu(t,r.missing),a=Ii(r.readTime);return tr.newNoDocument(i,a)}(n,e):ft()}(h.It,H);x.set(q.key.toString(),q)});const N=[];return u.forEach(H=>{const q=x.get(H.toString());Nt(!!q),N.push(q)}),N}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Of(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new Ff(a,e.precondition(a)))}),yield(r=(0,Te.Z)(function*(i,a){const u=rt(i),h=ry(u.It)+"/documents",_={writes:a.map(w=>iy(u.It,w))};yield u.ao("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?gr.exists(!1):gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new Ve(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DU{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new oM(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,Te.Z)(function*(){const t=new IU(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!G_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!jc(t)}return!1}}class TU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xr.UNAUTHENTICATED,this.clientId=o0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Te.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(je("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=hy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wN(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(a){r.isEqual(a)||(yield kk(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),oR.apply(this,arguments)}function bN(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lR(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Yk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Yk(e.remoteStore,a)),n.onlineComponents=e}),aR.apply(this,arguments)}function lR(n){return uR.apply(this,arguments)}function uR(){return uR=(0,Te.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield wN(n,new lN)),n.offlineComponents}),uR.apply(this,arguments)}function jD(n){return cR.apply(this,arguments)}function cR(){return cR=(0,Te.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield bN(n,new rR)),n.onlineComponents}),cR.apply(this,arguments)}function EN(n){return lR(n).then(e=>e.persistence)}function HD(n){return lR(n).then(e=>e.localStore)}function dR(n){return jD(n).then(e=>e.remoteStore)}function hR(n){return jD(n).then(e=>e.syncEngine)}function my(n){return fR.apply(this,arguments)}function fR(){return fR=(0,Te.Z)(function*(n){const e=yield jD(n),t=e.eventManager;return t.onListen=tU.bind(null,e.syncEngine),t.onUnlisten=nU.bind(null,e.syncEngine),t}),fR.apply(this,arguments)}function IN(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,a,u,h,_){const w=new BD({next:x=>{a.enqueueAndForget(()=>SM(i,A));const N=x.docs.has(u);!N&&x.fromCache?_.reject(new Ve(be.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&x.fromCache&&h&&"server"===h.source?_.reject(new Ve(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new RM(Jd(u.path),w,{includeMetadataChanges:!0,ku:!0});return TM(i,A)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}function DN(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,a,u,h,_){const w=new BD({next:x=>{a.enqueueAndForget(()=>SM(i,A)),x.fromCache&&"server"===h.source?_.reject(new Ve(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new RM(u,w,{includeMetadataChanges:!0,ku:!0});return TM(i,A)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}class NU{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new oM(this,"async_queue_retry"),this.Wc=()=>{const t=OD();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=OD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=OD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Gr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Te.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!zd(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,$r("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=DM.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ft()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function pR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class OU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cr extends ib{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new NU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||TN(this),this._firestoreClient.terminate()}}function hi(n){return n._firestoreClient||TN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new px(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new TU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function AN(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield wN(n,t),yield bN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===be.FAILED_PRECONDITION||u.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;$d("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function SN(n){if(n._initialized||n._terminated)throw new Ve(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $c{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $c(di.fromBase64String(e))}catch(t){throw new Ve(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $c(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ih{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zg{constructor(e){this._methodName=e}}class $D{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const qU=/^__.*__$/;class WU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ng(e,this.data,t,this.fieldTransforms)}}class xN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class GD{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new GD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return zD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(MN(this.sa)&&qU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class zU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||tb(e)}da(e,t,r,i=!1){return new GD({sa:e,methodName:t,fa:r,path:Mr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Zg(n){const e=n._freezeSettings(),t=tb(n._databaseId);return new zU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qD(n,e,t,r,i,a={}){const u=n.da(a.merge||a.mergeFields?2:0,e,t,i);yR("Data must be an object, but it was:",u,r);const h=kN(r,u);let _,w;if(a.merge)_=new Ls(u.fieldMask),w=u.fieldTransforms;else if(a.mergeFields){const A=[];for(const x of a.mergeFields){const N=vR(e,x,t);if(!u.contains(N))throw new Ve(be.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);ON(A,N)||A.push(N)}_=new Ls(A),w=u.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,w=u.fieldTransforms;return new WU(new ji(h),_,w)}class sb extends zg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sb}}function RN(n,e,t){return new GD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class gR extends zg{_toFieldTransform(e){return new Pg(e.path,new Xd)}isEqual(e){return e instanceof gR}}class ZU extends zg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=RN(this,e,!0),r=this._a.map(a=>Kg(a,t)),i=new Vc(r);return new Pg(e.path,i)}isEqual(e){return this===e}}class KU extends zg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=RN(this,e,!0),r=this._a.map(a=>Kg(a,t)),i=new Uc(r);return new Pg(e.path,i)}isEqual(e){return this===e}}class YU extends zg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Su(e.It,S0(e.It,this.wa));return new Pg(e.path,t)}isEqual(e){return this===e}}function mR(n,e,t,r){const i=n.da(1,e,t);yR("Data must be an object, but it was:",i,r);const a=[],u=ji.empty();Kd(r,(_,w)=>{const A=WD(e,_,t);w=(0,L.m9)(w);const x=i.ca(A);if(w instanceof sb)a.push(A);else{const N=Kg(w,x);null!=N&&(a.push(A),u.set(A,N))}});const h=new Ls(a);return new xN(u,h,i.fieldTransforms)}function _R(n,e,t,r,i,a){const u=n.da(1,e,t),h=[vR(e,r,t)],_=[i];if(a.length%2!=0)throw new Ve(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(vR(e,a[N])),_.push(a[N+1]);const w=[],A=ji.empty();for(let N=h.length-1;N>=0;--N)if(!ON(w,h[N])){const H=h[N];let q=_[N];q=(0,L.m9)(q);const fe=u.ca(H);if(q instanceof sb)w.push(H);else{const Ie=Kg(q,fe);null!=Ie&&(w.push(H),A.set(H,Ie))}}const x=new Ls(w);return new xN(A,x,u.fieldTransforms)}function PN(n,e,t,r=!1){return Kg(t,n.da(r?4:3,e))}function Kg(n,e){if(NN(n=(0,L.m9)(n)))return yR("Unsupported field value:",e,n),kN(n,e);if(n instanceof zg)return function(t,r){if(!MN(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let h=Kg(u,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return S0(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=pr.fromDate(t);return{timestampValue:Vg(r.It,i)}}if(t instanceof pr){const i=new pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vg(r.It,i)}}if(t instanceof $D)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $c)return{bytesValue:Fx(r.It,t._byteString)};if(t instanceof Er){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:L0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${VD(t)}`)}(n,e)}function kN(n,e){const t={};return hx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kd(n,(r,i)=>{const a=Kg(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function NN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pr||n instanceof $D||n instanceof $c||n instanceof Er||n instanceof zg)}function yR(n,e,t){if(!NN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=VD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function vR(n,e,t){if((e=(0,L.m9)(e))instanceof ih)return e._internalPath;if("string"==typeof e)return WD(n,e);throw zD("Field path arguments must be of type string or ",n,!1,void 0,t)}const QU=new RegExp("[~\\*/\\[\\]]");function WD(n,e,t){if(e.search(QU)>=0)throw zD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ih(...e.split("."))._internalPath}catch{throw zD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zD(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new Ve(be.INVALID_ARGUMENT,h+n+_)}function ON(n,e){return n.some(t=>t.isEqual(e))}class ob{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JU extends ob{data(){return super.data()}}function ZD(n,e){return"string"==typeof e?WD(n,e):e instanceof ih?e._internalPath:e._delegate._internalPath}function FN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ab{}function Hf(n,...e){for(const t of e)n=t._apply(n);return n}class XU extends ab{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Zg(e.firestore),r=function(i,a,u,h,_,w,A){let x;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){HN(A,w);const H=[];for(const q of A)H.push(jN(h,i,q));x={arrayValue:{values:H}}}else x=jN(h,i,A)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||HN(A,w),x=PN(u,"where",A,"in"===w||"not-in"===w);const N=Ci.create(_,w,x);return function(H,q){if(q.dt()){const Ie=D0(H);if(null!==Ie&&!Ie.isEqual(q.field))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${q.field.toString()}'`);const Xe=Z_(H);null!==Xe&&$N(0,q.field,Xe)}const fe=function(Ie,Xe){for(const ct of Ie.filters)if(Xe.indexOf(ct.op)>=0)return ct.op;return null}(H,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==fe)throw new Ve(be.INVALID_ARGUMENT,fe===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Us(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Au(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class tB extends ab{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new kf(i,a);return function(h,_){if(null===Z_(h)){const w=D0(h);null!==w&&$N(0,w,_.field)}}(r,u),u}(e._query,this.ma,this.pa);return new Us(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Au(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LN extends ab{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Us(e.firestore,e.converter,Nf(e._query,this.Ia,this.Ta))}}class VN extends ab{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=BN(e,this.type,this.Ea,this.Aa);return new Us(e.firestore,e.converter,(i=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class UN extends ab{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=BN(e,this.type,this.Ea,this.Aa);return new Us(e.firestore,e.converter,(i=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function BN(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof ob)return function(i,a,u,h,_){if(!h)throw new Ve(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const A of uo(i))if(A.field.isKeyField())w.push(Fc(a,h.key));else{const x=h.data.field(A.field);if($_(x))throw new Ve(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const N=A.field.canonicalString();throw new Ve(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(x)}return new Lc(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zg(n.firestore);return function(a,u,h,_,w,A){const x=a.explicitOrderBy;if(w.length>x.length)throw new Ve(be.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let H=0;H<w.length;H++){const q=w[H];if(x[H].field.isKeyField()){if("string"!=typeof q)throw new Ve(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!Mg(a)&&-1!==q.indexOf("/"))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const fe=a.path.child(En.fromString(q));if(!We.isDocumentKey(fe))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Ie=new We(fe);N.push(Fc(u,Ie))}else{const fe=PN(h,_,q);N.push(fe)}}return new Lc(N,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function jN(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ve(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mg(e)&&-1!==t.indexOf("/"))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!We.isDocumentKey(r))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fc(n,new We(r))}if(t instanceof Er)return Fc(n,t._key);throw new Ve(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VD(t)}.`)}function HN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ve(be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $N(n,e,t){if(!t.isEqual(e))throw new Ve(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wR{convertValue(e,t="none"){switch(Af(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return Kd(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new $D(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=g0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Df(e));default:return null}}convertTimestamp(e){const t=Iu(e);return new pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Nt(ie(r));const i=new Oc(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function KD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uB extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}class Yg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sh extends ob{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lb extends sh{data(e={}){return super.data(e)}}class $f{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lb(this._firestore,this._userDataWriter,r.key,r,new Yg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new lb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new lb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==u.type&&(_=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),w=a.indexOf(u.doc.key)),{type:cB(u.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function GN(n,e){return n instanceof sh&&e instanceof sh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $f&&e instanceof $f&&n._firestore===e._firestore&&sR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Gf extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}function qN(n,e,t){n=Cn(n,Er);const r=Cn(n.firestore,Cr),i=KD(n.converter,e,t);return _y(r,[qD(Zg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,gr.none())])}function WN(n,e,t,...r){n=Cn(n,Er);const i=Cn(n.firestore,Cr),a=Zg(i);let u;return u="string"==typeof(e=(0,L.m9)(e))||e instanceof ih?_R(a,"updateDoc",n._key,e,t,r):mR(a,"updateDoc",n._key,e),_y(i,[u.toMutation(n._key,gr.exists(!0))])}function zN(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||pR(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(pR(e[u])){const x=e[u];e[u]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[u+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[u+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,w,A;if(n instanceof Er)w=Cn(n.firestore,Cr),A=Jd(n._key.path),_={next:x=>{e[u]&&e[u](bR(w,n,x))},error:e[u+1],complete:e[u+2]};else{const x=Cn(n,Us);w=Cn(x.firestore,Cr),A=x._query;const N=new Gf(w);_={next:H=>{e[u]&&e[u](new $f(w,N,x,H))},error:e[u+1],complete:e[u+2]},FN(n._query)}return function(x,N,H,q){const fe=new BD(q),Ie=new RM(N,fe,H);return x.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return TM(yield my(x),Ie)})),()=>{fe.bc(),x.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return SM(yield my(x),Ie)}))}}(hi(w),A,h,_)}function _y(n,e){return function(t,r){const i=new Gr;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function rU(n,e,t){return FM.apply(this,arguments)}(yield hR(t),r,i)})),i.promise}(hi(n),e)}function bR(n,e,t){const r=t.docs.get(e._key),i=new Gf(n);return new sh(n,i,e._key,r,new Yg(t.hasPendingWrites,t.fromCache),e.converter)}const wB={maxAttempts:5};class ZN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zg(e)}set(e,t,r){this._verifyNotCommitted();const i=qf(e,this._firestore),a=KD(i.converter,t,r),u=qD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,gr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=qf(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof ih?_R(this._dataReader,"WriteBatch.update",a._key,t,r,i):mR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qf(e,this._firestore);return this._mutations=this._mutations.concat(new Of(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qf(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ve(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zg(e)}get(e){const t=qf(e,this._firestore),r=new uB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new ob(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new ob(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=qf(e,this._firestore),a=KD(i.converter,t,r),u=qD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=qf(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof ih?_R(this._dataReader,"Transaction.update",a._key,t,r,i):mR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=qf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qf(e,this._firestore),r=new Gf(this._firestore);return super.get(e).then(i=>new sh(this._firestore,r,t._key,i._document,new Yg(!1,!1),t.converter))}}function ER(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YN(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function QN(){if(!function JI(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wf=ni.SDK_VERSION,(0,ni._registerComponent)(new ba.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new Cr(new r0(t.getProvider("auth-internal")),new lx(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ve(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,ni.registerVersion)(L_,"3.6.0",n),(0,ni.registerVersion)(L_,"3.6.0","esm2017")}();class ub{constructor(e){this._delegate=e}static fromBase64String(e){return QN(),new ub($c.fromBase64String(e))}static fromUint8Array(e){return YN(),new ub($c.fromUint8Array(e))}toBase64(){return QN(),this._delegate.toBase64()}toUint8Array(){return YN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CR(n){return function MB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class RB{enableIndexedDbPersistence(e,t){return function LU(n,e){SN(n=Cn(n,Cr));const t=hi(n),r=n._freezeSettings(),i=new rR;return AN(t,i,new uN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VU(n){SN(n=Cn(n,Cr));const e=hi(n),t=n._freezeSettings(),r=new rR;return AN(e,r,new vU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UU(n){if(n._initialized&&!n._terminated)throw new Ve(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!jo.C())return Promise.resolve();const i=r+"main";yield jo.delete(i)}),function(r){return t.apply(this,arguments)})(Yx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$d("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function mN(n,e,t,r={}){var i;const a=(n=Cn(n,ib))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&$d("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=xr.MOCK_USER;else{u=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ve(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xr(_)}n._authCredentials=new n0(new B_(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function jU(n){return function AU(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield EN(n),t=yield dR(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.wu.delete(0),nb(i)}(t)}))}(hi(n=Cn(n,Cr)))}(this._delegate)}disableNetwork(){return function HU(n){return function SU(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield EN(n),t=yield dR(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const a=rt(i);a.wu.add(0),yield uy(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(hi(n=Cn(n,Cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BU(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function aU(n,e){return jM.apply(this,arguments)}(yield hR(e),t)})),t.promise}(hi(n=Cn(n,Cr)))}(this._delegate)}onSnapshotsInSync(e){return function vB(n,e){return function RU(n,e){const t=new BD(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield my(n),i=t,rt(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield my(n),i=t,void rt(r).bu.delete(i);var r,i}))}}(hi(n=Cn(n,Cr)),pR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yy(this,_N(this._delegate,e))}catch(t){throw ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new pl(this,UD(this._delegate,e))}catch(t){throw ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fo(this,function wU(n,e){if(n=Cn(n,ib),iR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Us(n,null,(t=e,new Au(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function EB(n,e,t){n=Cn(n,Cr);const r=Object.assign(Object.assign({},wB),t);return function(i){if(i.maxAttempts<1)throw new Ve(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const h=new Gr;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const _=yield function CN(n){return jD(n).then(e=>e.datastore)}(i);new DU(i.asyncQueue,_,u,a,h).run()})),h.promise}(hi(n),i=>e(new bB(n,i)),r)}(this._delegate,t=>e(new XN(this,t)))}batch(){return hi(this._delegate),new eO(new ZN(this._delegate,e=>_y(this._delegate,e)))}loadBundle(e){return function $U(n,e){const t=hi(n=Cn(n,Cr)),r=new OU;return function PU(n,e,t,r){const i=function(a,u){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return vN(_,w);if(_ instanceof ArrayBuffer)return vN(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new bU(_,u);var _}(t,tb(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function yU(n,e,t){const r=rt(n);var i;(i=(0,Te.Z)(function*(a,u,h){try{const _=yield u.getMetadata();if(yield function(N,H){const q=rt(N),fe=Ii(H.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",Ie=>q.Ns.getBundleMetadata(Ie,H.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(fe)>=0)}(a.localStore,_))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(Xk(_));const w=new QV(_,a.localStore,u.It);let A=yield u.mc();for(;A;){const N=yield w.Fu(A);N&&h._updateProgress(N),A=yield u.mc()}const x=yield w.complete();return yield rh(a,x.Lu,void 0),yield function(N,H){const q=rt(N);return q.persistence.runTransaction("Save bundle","readwrite",fe=>q.Ns.saveBundleMetadata(fe,H))}(a.localStore,_),h._completeWith(x.progress),Promise.resolve(x.Bu)}catch(_){return $d("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var N}),function(a,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield hR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GU(n,e){return function kU(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield HD(n),e)}))}(hi(n=Cn(n,Cr)),e).then(t=>t?new Us(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fo(this,t):null)}}class YD extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ub(new $c(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pl.forKey(t,this.firestore,null)}}class XN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YD(e)}get(e){const t=Jg(e);return this._delegate.get(t).then(r=>new cb(this._firestore,new sh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jg(e);return r?(ER("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Jg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Jg(e);return this._delegate.delete(t),this}}class eO{constructor(e){this._delegate=e}set(e,t,r){const i=Jg(e);return r?(ER("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Jg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Jg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new db(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Qg(e,new YD(e),t),i.set(t,a)),a}}Qg.INSTANCES=new WeakMap;class pl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pl(t,new Er(t._delegate,r,new We(e)))}static forKey(e,t,r){return new pl(t,new Er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yy(this.firestore,_N(this._delegate,e))}catch(t){throw ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof Er&&yN(this._delegate,e)}set(e,t){t=ER("DocumentReference.set",t);try{return t?qN(this._delegate,e,t):qN(this._delegate,e)}catch(r){throw ho(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WN(this._delegate,e):WN(this._delegate,e,t,...r)}catch(i){throw ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _B(n){return _y(Cn(n.firestore,Cr),[new Of(n._key,gr.none())])}(this._delegate)}onSnapshot(...e){const t=tO(e),r=nO(e,i=>new cb(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function hB(n){n=Cn(n,Er);const e=Cn(n.firestore,Cr),t=hi(e),r=new Gf(e);return function xU(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,a,u){try{const h=yield function(_,w){const A=rt(_);return A.persistence.runTransaction("read document","readonly",x=>A.localDocuments.getDocument(x,w))}(i,a);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Ve(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=hy(h,`Failed to get document '${a} from cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield HD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new sh(e,r,n._key,i,new Yg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function fB(n){n=Cn(n,Er);const e=Cn(n.firestore,Cr);return IN(hi(e),n._key,{source:"server"}).then(t=>bR(e,n,t))}(this._delegate):function dB(n){n=Cn(n,Er);const e=Cn(n.firestore,Cr);return IN(hi(e),n._key).then(t=>bR(e,n,t))}(this._delegate),t.then(r=>new cb(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pl(this.firestore,this._delegate.withConverter(e?Qg.getInstance(this.firestore,e):null))}}function ho(n,e,t){return n.message=n.message.replace(e,t),n}function tO(n){for(const e of n)if("object"==typeof e&&!CR(e))return e;return{}}function nO(n,e){var t,r;let i;return i=CR(n[0])?n[0]:CR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class cb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GN(this._delegate,e._delegate)}}class db extends cb{data(e){const t=this._delegate.data(e);return function $I(n,e){n||ft()}(void 0!==t),t}}class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YD(e)}where(e,t,r){try{return new fo(this.firestore,Hf(this._delegate,function eB(n,e,t){const r=e,i=ZD("where",n);return new XU(i,r,t)}(e,t,r)))}catch(i){throw ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fo(this.firestore,Hf(this._delegate,function nB(n,e="asc"){const t=e,r=ZD("orderBy",n);return new tB(r,t)}(e,t)))}catch(r){throw ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fo(this.firestore,Hf(this._delegate,function rB(n){return fN("limit",n),new LN("limit",n,"F")}(e)))}catch(t){throw ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fo(this.firestore,Hf(this._delegate,function iB(n){return fN("limitToLast",n),new LN("limitToLast",n,"L")}(e)))}catch(t){throw ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fo(this.firestore,Hf(this._delegate,function sB(...n){return new VN("startAt",n,!0)}(...e)))}catch(t){throw ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fo(this.firestore,Hf(this._delegate,function oB(...n){return new VN("startAfter",n,!1)}(...e)))}catch(t){throw ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fo(this.firestore,Hf(this._delegate,function aB(...n){return new UN("endBefore",n,!1)}(...e)))}catch(t){throw ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fo(this.firestore,Hf(this._delegate,function lB(...n){return new UN("endAt",n,!0)}(...e)))}catch(t){throw ho(t,"endAt()","Query.endAt()")}}isEqual(e){return sR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gB(n){n=Cn(n,Us);const e=Cn(n.firestore,Cr),t=hi(e),r=new Gf(e);return function MU(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,a,u){try{const h=yield PD(i,a,!0),_=new nN(a,h.Hi),w=_.Wu(h.documents),A=_.applyChanges(w,!1);u.resolve(A.snapshot)}catch(h){const _=hy(h,`Failed to execute query '${a} against cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield HD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $f(e,r,n,i))}(this._delegate):"server"===e?.source?function mB(n){n=Cn(n,Us);const e=Cn(n.firestore,Cr),t=hi(e),r=new Gf(e);return DN(t,n._query,{source:"server"}).then(i=>new $f(e,r,n,i))}(this._delegate):function pB(n){n=Cn(n,Us);const e=Cn(n.firestore,Cr),t=hi(e),r=new Gf(e);return FN(n._query),DN(t,n._query).then(i=>new $f(e,r,n,i))}(this._delegate),t.then(r=>new IR(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tO(e),r=nO(e,i=>new IR(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zN(this._delegate,t,r)}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?Qg.getInstance(this.firestore,e):null))}}class kB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new db(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new db(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new db(this._firestore,r))})}isEqual(e){return GN(this._delegate,e._delegate)}}class yy extends fo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pl(this.firestore,e):null}doc(e){try{return new pl(this.firestore,void 0===e?UD(this._delegate):UD(this._delegate,e))}catch(t){throw ho(t,"doc()","CollectionReference.doc()")}}add(e){return function yB(n,e){const t=Cn(n.firestore,Cr),r=UD(n),i=KD(n.converter,e);return _y(t,[qD(Zg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pl(this.firestore,t))}isEqual(e){return yN(this._delegate,e._delegate)}withConverter(e){return new yy(this.firestore,this._delegate.withConverter(e?Qg.getInstance(this.firestore,e):null))}}function Jg(n){return Cn(n,Er)}class DR{constructor(...e){this._delegate=new ih(...e)}static documentId(){return new DR(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof ih&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function IB(){return new gR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xg(e)}static delete(){const e=function CB(){return new sb("deleteField")}();return e._methodName="FieldValue.delete",new Xg(e)}static arrayUnion(...e){const t=function DB(...n){return new ZU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xg(t)}static arrayRemove(...e){const t=function TB(...n){return new KU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xg(t)}static increment(e){const t=function AB(n){return new YU("increment",n)}(e);return t._methodName="FieldValue.increment",new Xg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const NB={Firestore:JN,GeoPoint:$D,Timestamp:pr,Blob:ub,Transaction:XN,WriteBatch:eO,DocumentReference:pl,DocumentSnapshot:cb,Query:fo,QueryDocumentSnapshot:db,QuerySnapshot:IR,CollectionReference:yy,FieldPath:DR,FieldValue:Xg,setLogLevel:function PB(n){!function V_(n){Rc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function FB(n){(function OB(n,e){n.INTERNAL.registerComponent(new ba.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},NB)))})(n,(e,t)=>new JN(e,t,new RB)),n.registerVersion("@firebase/firestore-compat","0.1.26")}(h_.Z);var TR=V(6451),QD=V(5363),LB=V(6063);class VB extends Vo.x{constructor(e=1/0,t=1/0,r=LB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)h=_;h&&r.splice(0,h+1)}}}var rO=V(3099);function iO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,rO.B)({connector:()=>new VB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function sO(n,e){return(0,Dp.m)(e)?_n(()=>n,e):_n(()=>n)}var AR=V(9468);V(5867);const aO=new Map,$B={activated:!1,tokenObservers:[]},GB={initialized:!1,enabled:!1};function ns(n){return aO.get(n)||$B}function gl(n,e){aO.set(n,e)}function XD(){return GB}class KB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function YB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const po=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function uO(n){if(!ns(n).activated)throw po.create("use-before-activation",{appName:n.name})}function RR(n,e){return PR.apply(this,arguments)}function PR(){return PR=(0,Te.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const H=yield u.getHeartbeatsHeader();H&&(a["X-Firebase-Client"]=H)}const h={method:"POST",body:JSON.stringify(e),headers:a};let _,w;try{_=yield fetch(n,h)}catch(H){throw po.create("fetch-network-error",{originalErrorMessage:null===(r=H)||void 0===r?void 0:r.message})}if(200!==_.status)throw po.create("fetch-status-error",{httpStatus:_.status});try{w=yield _.json()}catch(H){throw po.create("fetch-parse-error",{originalErrorMessage:null===(i=H)||void 0===i?void 0:i.message})}const A=w.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw po.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const x=1e3*Number(A[1]),N=Date.now();return{token:w.token,expireTimeMillis:N+x,issuedAtTimeMillis:N}}),PR.apply(this,arguments)}function ej(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const hb="firebase-app-check-store";let nT=null;function dO(){return nT||(nT=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(po.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(hb,{keyPath:"compositeKey"})}}catch(r){e(po.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),nT)}function kR(){return kR=(0,Te.Z)(function*(n,e){const r=(yield dO()).transaction(hb,"readwrite"),a=r.objectStore(hb).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=_=>{u()},r.onerror=_=>{var w;h(po.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),kR.apply(this,arguments)}const fb=new Ea.Yd("@firebase/app-check");function FR(n,e){return(0,L.hl)()?function ij(n,e){return function hO(n,e){return kR.apply(this,arguments)}(function pO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gO(){return XD().enabled}function mO(){return VR.apply(this,arguments)}function VR(){return VR=(0,Te.Z)(function*(){const n=XD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),VR.apply(this,arguments)}const cj={error:"UNKNOWN_ERROR"};function dj(n){return L.US.encodeString(JSON.stringify(n),!1)}function rT(n){return UR.apply(this,arguments)}function UR(){return UR=(0,Te.Z)(function*(n,e=!1){const t=n.app;uO(t);const r=ns(t);let a,i=r.token;if(i&&!vy(i)&&(gl(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(vy(_)?i=_:yield FR(t,void 0))}if(!e&&i&&vy(i))return{token:i.token};let h,u=!1;if(gO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RR(ej(t,yield mO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const _=yield r.exchangeTokenPromise;return yield FR(t,_),gl(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?fb.warn(_.message):fb.error(_),a=_}return i?a?h=vy(i)?{token:i.token,internalError:a}:vO(a):(h={token:i.token},gl(t,Object.assign(Object.assign({},r),{token:i})),yield FR(t,i)):h=vO(a),u&&yO(t,h),h}),UR.apply(this,arguments)}function jR(n,e){const t=ns(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),gl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function _O(n){const{app:e}=n,t=ns(e);let r=t.tokenRefresher;r||(r=function hj(n){const{app:e}=n;return new KB((0,Te.Z)(function*(){let r;if(r=ns(e).token?yield rT(n,!0):yield rT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ns(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),gl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yO(n,e){const t=ns(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function vy(n){return n.expireTimeMillis-Date.now()>0}function vO(n){return{token:dj(cj),error:n}}class fj{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ns(this.app);for(const t of e)jR(this.app,t.next);return Promise.resolve()}}const AO="app-check-internal";!function Aj(){(0,ni._registerComponent)(new ba.wA("app-check",n=>function pj(n,e){return new fj(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AO).initialize()})),(0,ni._registerComponent)(new ba.wA(AO,n=>function gj(n){return{getToken:e=>rT(n,e),addTokenListener:e=>function BR(n,e,t,r){const{app:i}=n,a=ns(i),u={next:t,error:r,type:e};if(gl(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&vy(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),_O(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>_O(n))}(n,"INTERNAL",e),removeTokenListener:e=>jR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ni.registerVersion)("@firebase/app-check","0.5.13")}();class pb{constructor(){return(0,Lt.vb)("app-check")}}typeof window<"u"&&window;var sT=V(127);const WR=new d.OlP("angularfire2.auth.use-emulator"),zR=new d.OlP("angularfire2.auth.settings"),ZR=new d.OlP("angularfire2.auth.tenant-id"),KR=new d.OlP("angularfire2.auth.langugage-code"),YR=new d.OlP("angularfire2.auth.use-device-language"),QR=new d.OlP("angularfire.auth.persistence"),JR=(n,e,t,r,i,a,u,h)=>(0,ti.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),u)for(const[w,A]of Object.entries(u))_.settings[w]=A;return h&&_.setPersistence(h),_},[t,r,i,a,u,h]);let oT=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x,N,H){const q=new Vo.x,fe=dt(void 0).pipe((0,QD.Q)(u.outsideAngular),_n(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,3704)))),(0,_t.U)(()=>(0,ti.on)(t,a,r)),(0,_t.U)(Ie=>JR(Ie,a,h,w,A,x,_,N)),iO({bufferSize:1,refCount:!1}));if(Tr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{fe.pipe(hu()).subscribe();const Xe=fe.pipe(_n(gt=>gt.getRedirectResult().then(Vt=>Vt,()=>null)),Lt.iC,iO({bufferSize:1,refCount:!1})),ct=fe.pipe(_n(gt=>new Ar.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>gt.onAuthStateChanged(Zt=>Vt.next(Zt),Zt=>Vt.error(Zt),()=>Vt.complete()))})))),pt=fe.pipe(_n(gt=>new Ar.y(Vt=>({unsubscribe:a.runOutsideAngular(()=>gt.onIdTokenChanged(Zt=>Vt.next(Zt),Zt=>Vt.error(Zt),()=>Vt.complete()))}))));this.authState=Xe.pipe(sO(ct),(0,AR.R)(u.outsideAngular),(0,QD.Q)(u.insideAngular)),this.user=Xe.pipe(sO(pt),(0,AR.R)(u.outsideAngular),(0,QD.Q)(u.insideAngular)),this.idToken=this.user.pipe(_n(gt=>gt?(0,mn.D)(gt.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(_n(gt=>gt?(0,mn.D)(gt.getIdTokenResult()):dt(null))),this.credential=(0,TR.T)(Xe,q,this.authState.pipe(ks(gt=>!gt))).pipe((0,_t.U)(gt=>gt?.user?gt:null),(0,AR.R)(u.outsideAngular),(0,QD.Q)(u.insideAngular))}return(0,ti.pX)(this,fe,a,{spy:{apply:(Ie,Xe,ct)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&ct.then(pt=>q.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Lt.HU),d.LFG(WR,8),d.LFG(zR,8),d.LFG(ZR,8),d.LFG(KR,8),d.LFG(YR,8),d.LFG(QR,8),d.LFG(pb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kj=(()=>{class n{constructor(){sT.Z.registerVersion("angularfire",Lt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[oT]}),n})();function xO(n,e){return function Nj(n,e=ei.z){return new Ar.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function XR(n,e){return xO(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function aT(n,e){return XR(n,e).pipe(Ap(void 0),d_(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const _=i.find(A=>A.doc.ref.isEqual(u.ref)),w=t?.payload.docs.find(A=>A.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),a}))}function MO(n,e,t){return aT(n,t).pipe(mc((r,i)=>function Fj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Lj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),HC(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function eP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class PO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ap(void 0),d_(),ks(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),Lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(mc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RO(e);return MO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(e={}){return XR(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Lt.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(Lt.iC)}add(e){return this.ref.add(e)}doc(e){return new kO(this.ref.doc(e),this.afs)}}class kO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=FO(r,t);return new PO(i,a,this.afs)}snapshotChanges(){return function Oj(n,e){return xO(n,e).pipe(Ap(void 0),d_(),(0,_t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(Lt.iC)}}class Vj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aT(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ks(t=>t.length>0),Lt.iC):aT(this.query,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(mc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RO(e);return MO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(e={}){return XR(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Lt.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(Lt.iC)}}const NO=new d.OlP("angularfire2.enableFirestorePersistence"),OO=new d.OlP("angularfire2.firestore.persistenceSettings"),Uj=new d.OlP("angularfire2.firestore.settings"),Bj=new d.OlP("angularfire2.firestore.use-emulator");function FO(n,e=(t=>t)){return{query:e(n),ref:n}}let LO=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x,N,H,q,fe,Ie,Xe,ct){this.schedulers=_;const pt=(0,ti.on)(t,h,r),gt=A;x&&JR(pt,h,N,q,fe,Ie,H,Xe),[this.firestore,this.persistenceEnabled$]=(0,ti.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Vt=h.runOutsideAngular(()=>pt.firestore());if(a&&Vt.settings(a),gt&&Vt.useEmulator(...gt),i&&!Tr(u)){const Zt=()=>{try{return(0,mn.D)(Vt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Wr){return typeof console<"u"&&console.warn(Wr),dt(!1)}};return[Vt,h.runOutsideAngular(Zt)]}return[Vt,dt(!1)]},[a,gt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=FO(i,r),h=this.schedulers.ngZone.run(()=>a);return new PO(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new Vj(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(NO,8),d.LFG(Uj,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Lt.HU),d.LFG(OO,8),d.LFG(Bj,8),d.LFG(oT,8),d.LFG(WR,8),d.LFG(zR,8),d.LFG(ZR,8),d.LFG(KR,8),d.LFG(YR,8),d.LFG(QR,8),d.LFG(pb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jj=(()=>{class n{constructor(){sT.Z.registerVersion("angularfire",Lt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:NO,useValue:!0},{provide:OO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[LO]}),n})(),lT=(()=>{class n{constructor(t){this.firestore=t,this.pelis=this.getAll()}getAll(){return this.pelisCollection=this.firestore.collection("peliculas"),this.pelisCollection.valueChanges({idField:"id"})}getPelicula(t){return this.firestore.doc(`items/${t}`)}agregarPelicula(t){return this.pelisCollection?.add(t)}updatePelicula(t){return this.firestore.doc(`peliculas/${t.id}`).update(t)}borrarPeli(t){return this.firestore.doc(`peliculas/${t}`).delete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(LO))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._uU(2),d.ALo(3,"uppercase"),d.qZA(),d.TgZ(4,"td"),d._uU(5),d.qZA(),d.TgZ(6,"td"),d._uU(7),d.qZA(),d.TgZ(8,"td"),d._uU(9),d.qZA(),d.TgZ(10,"td"),d._uU(11),d.qZA(),d.TgZ(12,"td")(13,"div",2)(14,"button",3),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.seleccionarPelicula([a,u.caso[0]]))}),d.O4$(),d.TgZ(15,"svg",4),d._UZ(16,"path",5)(17,"path",6),d.qZA()(),d.kcU(),d.TgZ(18,"button",7),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.seleccionarPelicula([a,u.caso[1]]))}),d.O4$(),d.TgZ(19,"svg",8),d._UZ(20,"path",9)(21,"path",10),d.qZA()(),d.kcU(),d.TgZ(22,"button",11),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.seleccionarPelicula([a,u.caso[2]]))}),d.O4$(),d.TgZ(23,"svg",12),d._UZ(24,"path",13)(25,"path",14),d.qZA()()()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.hij(" ",d.lcZ(3,5,t.id.substring(0,4))," "),d.xp6(3),d.hij(" ",t.nombre," "),d.xp6(2),d.hij(" ",t.tipo," "),d.xp6(2),d.hij(" ",t.estreno," "),d.xp6(2),d.hij(" ",t.cantPublico," ")}}let $j=(()=>{class n{constructor(t){this.servicioPeliculas=t,this.seleccioneUnaPelicula=new d.vpe,this.peliculaActiva={},this.caso=["ver","modificar","borrar"]}ngOnInit(){}seleccionarPelicula(t){this.seleccioneUnaPelicula.emit(t)}tieneImagen(t){return this.servicioPeliculas.fileExists(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(tg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-pelicula"]],inputs:{listadoRecibido:"listadoRecibido"},outputs:{seleccioneUnaPelicula:"seleccioneUnaPelicula"},decls:18,vars:3,consts:[[1,"table","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["role","group",1,"btn-group"],[1,"btn","btn-info",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-eye"],["d","M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"],["d","M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"],[1,"btn","btn-warning",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-pencil-square"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-trash"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"],["fill-rule","evenodd","d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),d._uU(4,"ID"),d.qZA(),d.TgZ(5,"th"),d._uU(6,"Nombre"),d.qZA(),d.TgZ(7,"th"),d._uU(8,"Tipo"),d.qZA(),d.TgZ(9,"th"),d._uU(10,"streno"),d.qZA(),d.TgZ(11,"th"),d._uU(12,"Cantidad de Publico"),d.qZA(),d.TgZ(13,"th"),d._uU(14,"Acciones"),d.qZA()()(),d.TgZ(15,"tbody"),d.YNc(16,Hj,26,7,"tr",1),d.ALo(17,"async"),d.qZA()()),2&t&&(d.xp6(16),d.Q6J("ngForOf",d.lcZ(17,1,r.listadoRecibido)))},dependencies:[ai,vo,Na]}),n})();function Gj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li"),d._uU(1),d.ALo(2,"uppercase"),d.TgZ(3,"button",1),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.seleccionarPelicula([a,u.caso[0]]))}),d._uU(4,"Detalles"),d.qZA(),d.TgZ(5,"button",2),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.seleccionarPelicula([a,u.caso[1]]))}),d._uU(6,"Modificar"),d.qZA(),d.TgZ(7,"button",3),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.seleccionarPelicula([a,u.caso[2]]))}),d._uU(8,"Borrar"),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.xDo(" ID: ",d.lcZ(2,5,t.id.substring(0,4))," - Nombre: ",t.nombre," - Tipo: ",t.tipo," - Fecha Estreno: ",t.estreno," - Cantidad de P\xfablico: ",t.cantPublico," - ")}}let VO=(()=>{class n{constructor(t){this.servicioPeliculas=t,this.seleccioneUnaPelicula=new d.vpe,this.caso=["ver","modificar","borrar"]}ngOnInit(){}seleccionarPelicula(t){this.seleccioneUnaPelicula.emit(t)}listadoPeliculas(){return this.servicioPeliculas.ListadoDePeliculas}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(tg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-listado"]],inputs:{listadoRecibido:"listadoRecibido"},outputs:{seleccioneUnaPelicula:"seleccioneUnaPelicula"},decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"btn","btn-outline-info",3,"click"],[1,"btn","btn-outline-warning",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(d.YNc(0,Gj,9,7,"li",0),d.ALo(1,"async")),2&t&&d.Q6J("ngForOf",d.lcZ(1,1,r.listadoRecibido))},dependencies:[ai,vo,Na]}),n})(),qj=(()=>{class n{constructor(){this.peliculaSeleccionada={}}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{peliculaSeleccionada:"peliculaSeleccionada"},decls:13,vars:6,consts:[[1,"list-group"],[1,"list-group-item"],[1,"center",2,"max-width","280px","max-height","1000px",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"ul",0)(1,"li",1),d._uU(2),d.qZA(),d.TgZ(3,"li",1),d._uU(4),d.qZA(),d.TgZ(5,"li",1),d._uU(6),d.qZA(),d.TgZ(7,"li",1),d._uU(8),d.qZA(),d.TgZ(9,"li",1),d._uU(10),d.qZA(),d.TgZ(11,"li",1),d._UZ(12,"img",2),d.qZA()()),2&t&&(d.xp6(2),d.Oqu(r.peliculaSeleccionada.nombre),d.xp6(2),d.hij("ID: ",r.peliculaSeleccionada.id,""),d.xp6(2),d.hij("G\xe9nero: ",r.peliculaSeleccionada.tipo,""),d.xp6(2),d.hij("Estreno: ",r.peliculaSeleccionada.estreno,""),d.xp6(2),d.hij("Cantidad de P\xfablico: ",r.peliculaSeleccionada.cantPublico,""),d.xp6(2),d.s9C("src",r.peliculaSeleccionada.foto,d.LSH))},styles:[".center[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;max-width:430px;max-height:400px}"]}),n})();function Wj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"h4"),d._uU(2,"Editar Pel\xedcula"),d.qZA(),d.TgZ(3,"form",2,3),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onUpdate(i.peliculaSeleccionada))}),d.TgZ(5,"div",4)(6,"label"),d._uU(7,"Nombre"),d.qZA(),d.TgZ(8,"input",5,6),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.peliculaSeleccionada.nombre=i)}),d.qZA()(),d.TgZ(10,"div",4)(11,"label"),d._uU(12,"Estreno"),d.qZA(),d.TgZ(13,"input",7,8),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.peliculaSeleccionada.estreno=i)}),d.qZA()(),d.TgZ(15,"div",4)(16,"label"),d._uU(17,"G\xe9nero"),d.qZA(),d.TgZ(18,"input",9,10),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.peliculaSeleccionada.tipo=i)}),d.qZA()(),d.TgZ(20,"div",4)(21,"label"),d._uU(22,"P\xfablico"),d.qZA(),d.TgZ(23,"input",11,8),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.peliculaSeleccionada.cantPublico=i)}),d.qZA()(),d.TgZ(25,"div",12)(26,"button",13),d._UZ(27,"i",14),d._uU(28,"Modificar Pel\xedcula"),d.qZA()()()()}if(2&n){const t=d.MAs(4),r=d.oxw();d.xp6(8),d.Q6J("ngModel",r.peliculaSeleccionada.nombre),d.xp6(5),d.Q6J("ngModel",r.peliculaSeleccionada.estreno),d.xp6(5),d.Q6J("ngModel",r.peliculaSeleccionada.tipo),d.xp6(5),d.Q6J("ngModel",r.peliculaSeleccionada.cantPublico),d.xp6(3),d.Q6J("disabled",!t.valid)}}let zj=(()=>{class n{constructor(t){this.servFire=t,this.peliculaSeleccionada={}}ngOnInit(){}modificar(t){this.servFire.updatePelicula(t)}onUpdate(t){this.servFire.updatePelicula(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(lT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-modificar-pelicula"]],inputs:{peliculaSeleccionada:"peliculaSeleccionada"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"ngSubmit"],["peliForm","ngForm"],[1,"form-group"],["name","nombre","placeholder","Nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["nameCtrl","ngModel"],["name","estreno","placeholder","Estreno","required","",1,"form-control",3,"ngModel","ngModelChange"],["authorCtrl","ngModel"],["name","tipo","placeholder","G\xe9nero",1,"form-control",3,"ngModel","ngModelChange"],["genreCtrl","ngModel"],["name","p\xfablico","placeholder","P\xfablico","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","float-right"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-plus"]],template:function(t,r){1&t&&d.YNc(0,Wj,29,5,"div",0),2&t&&d.Q6J("ngIf",r.peliculaSeleccionada)},dependencies:[Xn,_a,eu,bh,Eh,p,Rh,ma]}),n})();var Zj=V(5226),gb=V.n(Zj);let Kj=(()=>{class n{constructor(t){this.servFire=t,this.peliculaSeleccionada={},this.peliculaSeleccionadaChange=new d.vpe}borrarPelicula(t){gb().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&(this.servFire.borrarPeli(t.id),this.deseleccionar(),gb().fire("Deleted!","Your file has been deleted.","success"))})}deseleccionar(){this.peliculaSeleccionadaChange.emit(null)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(lT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-borrar-pelicula"]],inputs:{peliculaSeleccionada:"peliculaSeleccionada"},outputs:{peliculaSeleccionadaChange:"peliculaSeleccionadaChange"},decls:9,vars:3,consts:[[1,"list-group"],[1,"list-group-item"],[1,"center",2,"max-width","280px","max-height","1000px",3,"src"],["role","button",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"ul",0)(1,"li",1),d._uU(2),d.qZA(),d.TgZ(3,"li",1),d._uU(4),d.qZA(),d.TgZ(5,"li",1),d._UZ(6,"img",2),d.qZA(),d.TgZ(7,"a",3),d.NdJ("click",function(){return r.borrarPelicula(r.peliculaSeleccionada)}),d._uU(8,"Borrar Pel\xedcula?"),d.qZA()()),2&t&&(d.xp6(2),d.Oqu(r.peliculaSeleccionada.nombre),d.xp6(2),d.hij("ID: ",r.peliculaSeleccionada.id,""),d.xp6(2),d.s9C("src",r.peliculaSeleccionada.foto,d.LSH))}}),n})();function Yj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-tabla-pelicula",12),d.NdJ("seleccioneUnaPelicula",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.tomoPeliculaSeleccionada(i))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("listadoRecibido",t.listadoDePeliculas())}}function Qj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-pelicula-listado",12),d.NdJ("seleccioneUnaPelicula",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.tomoPeliculaSeleccionada(i))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("listadoRecibido",t.listadoDePeliculas())}}function Jj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",13),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.verPeli=null)}),d._uU(1,"X"),d.qZA()}}function Xj(n,e){if(1&n&&d._UZ(0,"app-detalle-pelicula",14),2&n){const t=d.oxw();d.Q6J("peliculaSeleccionada",t.verPeli)}}function eH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",13),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.editarPeli=null)}),d._uU(1,"X"),d.qZA()}}function tH(n,e){if(1&n&&d._UZ(0,"app-modificar-pelicula",14),2&n){const t=d.oxw();d.Q6J("peliculaSeleccionada",t.editarPeli)}}function nH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",13),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.borrarPeli=null)}),d._uU(1,"X"),d.qZA()}}function rH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-borrar-pelicula",15),d.NdJ("peliculaSeleccionadaChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.borrarPeli=i)}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("peliculaSeleccionada",t.borrarPeli)}}let iH=(()=>{class n{constructor(t,r,i){this.servicioPeliculas=t,this.servicioActores=r,this.servicioFire=i,this.enviarActor=new d.vpe,this.verPeli=null,this.editarPeli=null,this.borrarPeli=null,this.peliSeleccionada=null,this.queMuestro="actores",this.comoVer="Tabla",this.tipoDeBoton="btn-info",this.pelisFire$=i.getAll()}ngOnInit(){}tomoPeliculaSeleccionada(t){switch(console.info(t[1]),console.info(t[0]),t[1]){case"ver":this.verPeli=t[0],console.info("Entro ver");break;case"modificar":this.editarPeli=t[0],console.info("Entro modi");break;case"borrar":this.borrarPeli=t[0],console.info("Entro borrar")}}listadoDePeliculas(){return this.pelisFire$}listadoDeActores(){return this.servicioActores.ListadoDeActores}CambiarLaVista(){"Lista"==this.comoVer?(this.comoVer="Tabla",this.tipoDeBoton="btn-info"):(this.comoVer="Lista",this.tipoDeBoton="btn-danger")}mostrar(t){this.queMuestro=t}guardarActor(t){console.info("Actor:",t),this.servicioActores.guardarActorEnListado(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(tg),d.Y36(a_),d.Y36(lT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-busqueda"]],inputs:{recibirActor:"recibirActor"},outputs:{enviarActor:"enviarActor"},decls:30,vars:10,consts:[[1,"container","py-4"],[1,"align-items-center"],[3,"listadoRecibido","seleccioneUnaPelicula",4,"ngIf"],["type","button",1,"btn","btn-circle",3,"ngClass","click"],[1,"fa","fa-check"],[1,"row","align-items-md-stretch"],[1,"col-md-4"],[1,"h-100","p-2","bg-light","border"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"peliculaSeleccionada",4,"ngIf"],[3,"peliculaSeleccionada","peliculaSeleccionadaChange",4,"ngIf"],[1,"pt-3","mt-4","text-muted","border-top"],[3,"listadoRecibido","seleccioneUnaPelicula"],["type","button",1,"btn","btn-danger",3,"click"],[3,"peliculaSeleccionada"],[3,"peliculaSeleccionada","peliculaSeleccionadaChange"]],template:function(t,r){1&t&&(d.TgZ(0,"main")(1,"div",0)(2,"div",1),d.YNc(3,Yj,1,1,"app-tabla-pelicula",2),d.YNc(4,Qj,1,1,"app-pelicula-listado",2),d.TgZ(5,"button",3),d.NdJ("click",function(){return r.CambiarLaVista()}),d._uU(6),d._UZ(7,"i",4),d.qZA()(),d._UZ(8,"p"),d.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"h2"),d._uU(13,"Mostrar "),d.YNc(14,Jj,2,0,"button",8),d.qZA(),d.YNc(15,Xj,1,1,"app-detalle-pelicula",9),d.qZA()(),d.TgZ(16,"div",6)(17,"div",7)(18,"h2"),d._uU(19,"Modificar "),d.YNc(20,eH,2,0,"button",8),d.qZA(),d.YNc(21,tH,1,1,"app-modificar-pelicula",9),d.qZA()(),d.TgZ(22,"div",6)(23,"div",7)(24,"h2"),d._uU(25,"Borrar "),d.YNc(26,nH,2,0,"button",8),d.qZA(),d.YNc(27,rH,1,1,"app-borrar-pelicula",10),d.qZA()()(),d.TgZ(28,"footer",11),d._uU(29," \xa9 2022 "),d.qZA()()()),2&t&&(d.xp6(3),d.Q6J("ngIf","Tabla"==r.comoVer),d.xp6(1),d.Q6J("ngIf","Lista"==r.comoVer),d.xp6(1),d.Q6J("ngClass",r.tipoDeBoton),d.xp6(1),d.Oqu(r.comoVer),d.xp6(8),d.Q6J("ngIf",null!=r.verPeli),d.xp6(1),d.Q6J("ngIf",null!=r.verPeli),d.xp6(5),d.Q6J("ngIf",null!=r.editarPeli),d.xp6(1),d.Q6J("ngIf",null!=r.editarPeli),d.xp6(5),d.Q6J("ngIf",null!=r.borrarPeli),d.xp6(1),d.Q6J("ngIf",null!=r.borrarPeli))},dependencies:[un,Xn,$j,VO,qj,zj,Kj]}),n})();function sH(n,e){1&n&&d._UZ(0,"span",22)}let oH=(()=>{class n{constructor(t,r,i,a){this.http=t,this.servicioActores=r,this.servPelis=i,this.PelisFireService=a,this.imagePreview="../../../../assets/images/default-placeholder.png",this.loading=!1,this.claseBoton="",this.Toast=gb().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",gb().stopTimer),u.addEventListener("mouseleave",gb().resumeTimer)}})}ngOnInit(){}guardarPelicula(){null!=this.selectedFile&&(this.loading=!this.loading,this.claseBoton="disabled",this.upload(this.selectedFile).subscribe(t=>{"object"==typeof t&&(this.nuevaPeli={},this.imagenPosterURL=t.data.media,this.nuevaPeli.id=this.id,this.nuevaPeli.nombre=this.nombre,this.nuevaPeli.tipo=this.tipo,this.nuevaPeli.estreno=this.estreno,this.nuevaPeli.cantPublico=this.publico,this.nuevaPeli.foto=t.data.media,this.nuevaPeli.actor=this.actorNombre,this.claseBoton="",this.loading=!1,this.servPelis.guardarActorEnListado(this.nuevaPeli),this.PelisFireService.agregarPelicula(this.nuevaPeli),this.Toast.fire({icon:"success",title:"Pelicula guardada"}),console.info("La pel\xedcula nueva es: ",this.nuevaPeli))}))}traerActores(){return this.servicioActores.ListadoDeActores}seleccionarActor(t){this.actor=t,this.actorNombre=t.nombre+" "+t.apellido}onFileSelected(t){this.selectedFile=t.target.files[0];const r=new FileReader;r.onload=()=>{this.imagePreview=r.result,this.nombreDeArchivo=this.selectedFile.name},r.readAsDataURL(this.selectedFile)}upload(t){const i=new FormData;return i.append("key","000022251c7a412bc9ee3a2308329060"),i.append("media",t,t.name),this.http.post("https://thumbsnap.com/api/upload",i)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uf),d.Y36(a_),d.Y36(tg),d.Y36(lT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-alta"]],inputs:{actorRecibido:"actorRecibido"},decls:39,vars:11,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"row","block"],[1,"col-md-3"],[2,"width","250px","height","360px",3,"src","click"],["type","file",1,"file-input",3,"change"],["fileUpload",""],[1,"col-md-4"],[1,"form-group","col"],["type","text","name","id","placeholder","ID",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","nombre","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","tipo","placeholder","tipo",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","estreno","placeholder","A\xf1o de estreno",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","publico","placeholder","Audiencia",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","actor","placeholder","Seleccionar actor","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","nombreDeArchivo","placeholder","Haga click en la imagen para\n                                    cambiarla.","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-5"],[3,"arrayActores","seleccioneUnActor"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"ngClass","click"],["class","spinner-border\n                                spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0),d._UZ(1,"p")(2,"p"),d.TgZ(3,"div",1)(4,"div",2)(5,"form")(6,"div",3)(7,"div",4)(8,"img",5),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(10);return d.KtG(u.click())}),d.qZA(),d.TgZ(9,"input",6,7),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.TgZ(11,"div",8)(12,"div",9)(13,"input",10),d.NdJ("ngModelChange",function(u){return r.id=u}),d.qZA()(),d._UZ(14,"p"),d.TgZ(15,"div",9)(16,"input",11),d.NdJ("ngModelChange",function(u){return r.nombre=u}),d.qZA()(),d._UZ(17,"p"),d.TgZ(18,"div",9)(19,"input",12),d.NdJ("ngModelChange",function(u){return r.tipo=u}),d.qZA()(),d._UZ(20,"p"),d.TgZ(21,"div",9)(22,"input",13),d.NdJ("ngModelChange",function(u){return r.estreno=u}),d.qZA()(),d._UZ(23,"p"),d.TgZ(24,"div",9)(25,"input",14),d.NdJ("ngModelChange",function(u){return r.publico=u}),d.qZA()(),d._UZ(26,"p"),d.TgZ(27,"div",9)(28,"input",15),d.NdJ("ngModelChange",function(u){return r.actorNombre=u}),d.qZA()(),d._UZ(29,"p"),d.TgZ(30,"div",9)(31,"input",16),d.NdJ("ngModelChange",function(u){return r.nombreDeArchivo=u}),d.qZA()(),d._UZ(32,"p"),d.qZA(),d.TgZ(33,"div",17)(34,"app-actor-listado",18),d.NdJ("seleccioneUnActor",function(u){return r.seleccionarActor(u)}),d.qZA()()(),d.TgZ(35,"div",19)(36,"button",20),d.NdJ("click",function(){return r.guardarPelicula()}),d.YNc(37,sH,1,0,"span",21),d._uU(38," Guardar "),d.qZA()()()()()()}2&t&&(d.xp6(8),d.Q6J("src",r.imagePreview,d.LSH),d.xp6(5),d.Q6J("ngModel",r.id),d.xp6(3),d.Q6J("ngModel",r.nombre),d.xp6(3),d.Q6J("ngModel",r.tipo),d.xp6(3),d.Q6J("ngModel",r.estreno),d.xp6(3),d.Q6J("ngModel",r.publico),d.xp6(3),d.Q6J("ngModel",r.actorNombre),d.xp6(3),d.Q6J("ngModel",r.nombreDeArchivo),d.xp6(3),d.Q6J("arrayActores",r.traerActores()),d.xp6(2),d.Q6J("ngClass",r.claseBoton),d.xp6(1),d.Q6J("ngIf",r.loading))},dependencies:[un,Xn,_a,eu,bh,Eh,Rh,ma,ef],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),n})();function aH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",1)(4,"div",4)(5,"button",5),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.emitirPeliculas(a.nombre,a.apellido))}),d._uU(6,"Peliculas"),d.qZA(),d.TgZ(7,"button",6),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.emitirPais(a.pais))}),d._uU(8,"Pais"),d.qZA(),d.TgZ(9,"button",7),d.NdJ("click",function(){const a=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.emitirActor(a))}),d._uU(10,"Detalles"),d.qZA()()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.AsE(" ",t.nombre," ",t.apellido," ")}}let lH=(()=>{class n{constructor(){this.enviarPais=new d.vpe,this.enviarActor=new d.vpe,this.enviarPeliculas=new d.vpe}ngOnInit(){}guardarActorEnListado(){this.arrayActores?.push(this.actorRecibido),localStorage.setItem("actores",JSON.stringify(this.arrayActores))}listadoActores(){}emitirPais(t){this.enviarPais.emit(t)}emitirActor(t){this.enviarActor.emit(t)}emitirPeliculas(t,r){this.enviarPeliculas.emit(this.buscarPeliculas(t+" "+r))}buscarPeliculas(t){let r=[];if(null!=this.arrayPeliculas)for(let i of this.arrayPeliculas)i.actor==t&&r.push(i);return r.length>0?r:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-listado-con-acciones"]],inputs:{actorRecibido:"actorRecibido",arrayActores:"arrayActores",arrayPeliculas:"arrayPeliculas"},outputs:{enviarPais:"enviarPais",enviarActor:"enviarActor",enviarPeliculas:"enviarPeliculas"},decls:9,vars:1,consts:[[1,"table","table-bordered","table-hover"],[1,"text-end"],["id","actores"],[4,"ngFor","ngForOf"],["role","group","aria-label","Basic example",1,"btn-group"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-info",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),d._uU(4,"Actor"),d.qZA(),d.TgZ(5,"th",1),d._uU(6,"Acciones"),d.qZA()()(),d.TgZ(7,"tbody",2),d.YNc(8,aH,11,2,"tr",3),d.qZA()()),2&t&&(d.xp6(8),d.Q6J("ngForOf",r.arrayActores))},dependencies:[ai]}),n})(),uH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-actor"]],inputs:{actorRecibido:"actorRecibido"},decls:10,vars:5,consts:[[1,"list-group"],[1,"list-group-item"],[2,"width","26px","height","20px",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"ul",0)(1,"li",1),d._uU(2),d.qZA(),d.TgZ(3,"li",1),d._uU(4),d.qZA(),d.TgZ(5,"li",1),d._uU(6),d.qZA(),d.TgZ(7,"li",1),d._uU(8),d._UZ(9,"img",2),d.qZA()()),2&t&&(d.xp6(2),d.hij("Nombre: ",r.actorRecibido.nombre,""),d.xp6(2),d.hij("Apellido: ",r.actorRecibido.apellido,""),d.xp6(2),d.hij("Edad: ",r.actorRecibido.edad,""),d.xp6(2),d.hij("Pais: ",r.actorRecibido.pais.translations.spa.common," "),d.xp6(1),d.s9C("src",r.actorRecibido.pais.flags.svg,d.LSH))}}),n})(),cH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-pais"]],inputs:{paisRecibido:"paisRecibido"},decls:9,vars:4,consts:[[1,"list-group"],[1,"list-group-item"],[2,"max-width","270px","max-height","300px",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"ul",0)(1,"li",1),d._uU(2),d.qZA(),d.TgZ(3,"li",1),d._uU(4),d.qZA(),d.TgZ(5,"li",1),d._uU(6),d.qZA(),d.TgZ(7,"li",1),d._UZ(8,"img",2),d.qZA()()),2&t&&(d.xp6(2),d.hij("Nombre: ",r.paisRecibido.translations.spa.common,""),d.xp6(2),d.hij("Capital: ",r.paisRecibido.capital,""),d.xp6(2),d.hij("Habitantes: ",r.paisRecibido.population,""),d.xp6(2),d.s9C("src",r.paisRecibido.flags.svg,d.LSH))}}),n})();function dH(n,e){if(1&n&&(d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.AsE(" ",t.id," - ",t.nombre," ")}}let hH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-actor-peliculas"]],inputs:{peliculasRecibidas:"peliculasRecibidas"},decls:3,vars:1,consts:[[1,"table","table-bordered","table-hover"],["id","paises"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"tbody",1),d.YNc(2,dH,3,2,"tr",2),d.qZA()()),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.peliculasRecibidas))},dependencies:[ai]}),n})();function fH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.peliculas=null)}),d._uU(1,"X"),d.qZA()}}function pH(n,e){if(1&n&&d._UZ(0,"app-detalle-actor-peliculas",12),2&n){const t=d.oxw();d.Q6J("peliculasRecibidas",t.peliculas)}}function gH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.pais=null)}),d._uU(1,"X"),d.qZA()}}function mH(n,e){if(1&n&&d._UZ(0,"app-detalle-pais",13),2&n){const t=d.oxw();d.Q6J("paisRecibido",t.pais)}}function _H(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.actor=null)}),d._uU(1,"X"),d.qZA()}}function yH(n,e){if(1&n&&d._UZ(0,"app-detalle-actor",14),2&n){const t=d.oxw();d.Q6J("actorRecibido",t.actor)}}const vH=[{path:"bienvenido",component:jC},{path:"",redirectTo:"/busqueda",pathMatch:"full"},{path:"busqueda",component:iH},{path:"peliculas/alta",component:oH},{path:"actor/alta",component:CS},{path:"peliculas/listado",component:VO},{path:"actor/pelicula",component:(()=>{class n{constructor(t,r){this.servActores=t,this.servPeliculas=r,this.peliculas=null}ngOnInit(){}listadoDeActores(){return this.servActores.ListadoDeActores}listadoDePeliculas(){return this.servPeliculas.ListadoDePeliculas}seleccionarPais(t){this.pais=t}seleccionarActor(t){this.actor=t}seleccionarPeliculas(t){this.peliculas=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(a_),d.Y36(tg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-pelicula"]],decls:26,vars:8,consts:[[1,"container","py-4"],[1,"align-items-center"],[3,"arrayActores","arrayPeliculas","enviarPeliculas","enviarPais","enviarActor"],[1,"row","align-items-md-stretch"],[1,"col-md-4"],[1,"h-100","p-2","bg-light","border"],["type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],[3,"peliculasRecibidas",4,"ngIf"],[3,"paisRecibido",4,"ngIf"],[3,"actorRecibido",4,"ngIf"],[1,"pt-3","mt-4","text-muted","border-top"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[3,"peliculasRecibidas"],[3,"paisRecibido"],[3,"actorRecibido"]],template:function(t,r){1&t&&(d.TgZ(0,"main")(1,"div",0)(2,"div",1)(3,"app-listado-con-acciones",2),d.NdJ("enviarPeliculas",function(a){return r.seleccionarPeliculas(a)})("enviarPais",function(a){return r.seleccionarPais(a)})("enviarActor",function(a){return r.seleccionarActor(a)}),d.qZA()(),d._UZ(4,"p"),d.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"h3"),d._uU(9,"Listado de Peliculas "),d.YNc(10,fH,2,0,"button",6),d.qZA(),d.YNc(11,pH,1,1,"app-detalle-actor-peliculas",7),d.qZA()(),d.TgZ(12,"div",4)(13,"div",5)(14,"h3"),d._uU(15,"Detalle del pa\xeds "),d.YNc(16,gH,2,0,"button",6),d.qZA(),d.YNc(17,mH,1,1,"app-detalle-pais",8),d.qZA()(),d.TgZ(18,"div",4)(19,"div",5)(20,"h3"),d._uU(21,"Detalle del actor "),d.YNc(22,_H,2,0,"button",6),d.qZA(),d.YNc(23,yH,1,1,"app-detalle-actor",9),d.qZA()()(),d.TgZ(24,"footer",10),d._uU(25," \xa9 2022 "),d.qZA()()()),2&t&&(d.xp6(3),d.Q6J("arrayActores",r.listadoDeActores())("arrayPeliculas",r.listadoDePeliculas()),d.xp6(7),d.Q6J("ngIf",null!=r.peliculas),d.xp6(1),d.Q6J("ngIf",null!=r.peliculas),d.xp6(5),d.Q6J("ngIf",null!=r.pais),d.xp6(1),d.Q6J("ngIf",null!=r.pais),d.xp6(5),d.Q6J("ngIf",null!=r.actor),d.xp6(1),d.Q6J("ngIf",null!=r.actor))},dependencies:[Xn,lH,uH,cH,hH]}),n})()}];let wH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[bC.forRoot(vH),bC]}),n})(),bH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:19,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["routerLink","busqueda","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],[1,"nav-item"],["routerLink","actor/alta","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],["routerLink","peliculas/alta","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],["routerLink","actor/pelicula","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"span",1),d._uU(2,"Manuel Gonz\xe1lez"),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"Peliculas"),d.qZA()(),d.TgZ(10,"li",8)(11,"a",9),d._uU(12,"Alta Actor"),d.qZA()(),d.TgZ(13,"li",8)(14,"a",10),d._uU(15,"Alta Pelicula"),d.qZA()(),d.TgZ(16,"li",8)(17,"a",11),d._uU(18,"Actor Pelicula"),d.qZA()()()()())},dependencies:[Wp,Kv]}),n})(),EH=(()=>{class n{constructor(){this.title="simulacroParcial"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[$E,bH]}),n})();const UO="firebasestorage.googleapis.com",BO="storageBucket";class ii extends L.ZR{constructor(e,t){super(tP(e),`Firebase Storage: ${t} (${tP(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ii.prototype)}_codeEquals(e){return tP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function tP(n){return"storage/"+n}function nP(){return new ii("unknown","An unknown error occurred, please check the error payload for server response.")}function jO(){return new ii("canceled","User canceled the upload/download.")}function HO(){return new ii("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function wy(n){return new ii("invalid-argument",n)}function $O(){return new ii("app-deleted","The Firebase app was deleted.")}function GO(n){return new ii("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mb(n,e){return new ii("invalid-format","String does not match format '"+n+"': "+e)}function _b(n){throw new ii("internal-error","Internal error: "+n)}class Bs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bs.makeFromUrl(e,t)}catch{return new Bs(e,"")}if(""===r.path)return r;throw function kH(n){return new ii("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(gt){gt.path_=decodeURIComponent(gt.path)}const x=t.replace(/[.]/g,"\\."),pt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(gt){"/"===gt.path.charAt(gt.path.length-1)&&(gt.path_=gt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===UO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let gt=0;gt<pt.length;gt++){const Vt=pt[gt],Zt=Vt.regex.exec(e);if(Zt){let Fu=Zt[Vt.indices.path];Fu||(Fu=""),r=new Bs(Zt[Vt.indices.bucket],Fu),Vt.postModify(r);break}}if(null==r)throw function PH(n){return new ii("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class LH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uT(n){return"string"==typeof n||n instanceof String}function qO(n){return rP()&&n instanceof Blob}function rP(){return typeof Blob<"u"}function iP(n,e,t,r){if(r<e)throw wy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wy(`Invalid value for '${n}'. Expected ${t} or less.`)}function oh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function WO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Wf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Wf||(Wf={})),Wf))();class $H{constructor(e,t,r,i,a,u,h,_,w,A,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=A,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,H)=>{this.resolve_=N,this.reject_=H,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function BH(n){return void 0!==n}(_)?a():a(_)}catch(_){u(_)}else if(null!==h){const _=nP();_.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,_):_)}else u(i.canceled?this.appDelete_?$O():jO():function RH(){return new ii("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new cT(!1,null,!0)):this.backoffId_=function VH(n,e,t){let r=1,i=null,a=null,u=!1,h=0;function _(){return 2===h}let w=!1;function A(...Ie){w||(w=!0,e.apply(null,Ie))}function x(Ie){i=setTimeout(()=>{i=null,n(H,_())},Ie)}function N(){a&&clearTimeout(a)}function H(Ie,...Xe){if(w)return void N();if(Ie)return N(),void A.call(null,Ie,...Xe);if(_()||u)return N(),void A.call(null,Ie,...Xe);let pt;r<64&&(r*=2),1===h?(h=2,pt=0):pt=1e3*(r+Math.random()),x(pt)}let q=!1;function fe(Ie){q||(q=!0,N(),!w&&(null!==i?(Ie||(h=2),clearTimeout(i),x(0)):Ie||(h=1)))}return x(0),a=setTimeout(()=>{u=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new cT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===Wf.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const A=a.getErrorCode()===Wf.ABORT;return void r(!1,new cT(!1,null,A))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new cT(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function UH(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class cT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function YH(...n){const e=function KH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(rP())return new Blob(n);throw new ii("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sP{constructor(e,t){this.data=e,this.contentType=t||null}}function oP(n,e){switch(n){case Sa.RAW:return new sP(zO(e));case Sa.BASE64:case Sa.BASE64URL:return new sP(ZO(n,e));case Sa.DATA_URL:return new sP(function e$(n){const e=new KO(n);return e.base64?ZO(Sa.BASE64,e.rest):function XH(n){let e;try{e=decodeURIComponent(n)}catch{throw mb(Sa.DATA_URL,"Malformed data URL.")}return zO(e)}(e.rest)}(e),function t$(n){return new KO(n).contentType}(e))}throw nP()}function zO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ZO(n,e){switch(n){case Sa.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw mb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Sa.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw mb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function JH(n){return atob(n)}(e)}catch{throw mb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class KO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw mb(Sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function n$(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Gc{constructor(e,t){let r=0,i="";qO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(qO(this.data_)){const i=function QH(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Gc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Gc(r,!0)}}static getBlob(...e){if(rP()){const t=e.map(r=>r instanceof Gc?r.data_:r);return new Gc(YH.apply(null,t))}{const t=e.map(u=>uT(u)?oP(Sa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[a++]=u[h]}),new Gc(i,!0)}}uploadData(){return this.data_}}function aP(n){let e;try{e=JSON.parse(n)}catch{return null}return function HH(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function YO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function s$(n,e){return e}class go{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||s$}}let dT=null;function yb(){if(dT)return dT;const n=[];n.push(new go("bucket")),n.push(new go("generation")),n.push(new go("metageneration")),n.push(new go("name","fullPath",!0));const t=new go("name");t.xform=function e(a,u){return function o$(n){return!uT(n)||n.length<2?n:YO(n)}(u)},n.push(t);const i=new go("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new go("timeCreated")),n.push(new go("updated")),n.push(new go("md5Hash",null,!0)),n.push(new go("cacheControl",null,!0)),n.push(new go("contentDisposition",null,!0)),n.push(new go("contentEncoding",null,!0)),n.push(new go("contentLanguage",null,!0)),n.push(new go("contentType",null,!0)),n.push(new go("metadata","customMetadata",!0)),dT=n,dT}function QO(n,e,t){const r=aP(e);return null===r?null:function l$(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function a$(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Bs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function lP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const JO="prefixes";class qc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wc(n){if(!n)throw nP()}function hT(n,e){return function t(r,i){const a=QO(n,i,e);return Wc(null!==a),a}}function by(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function xH(){return new ii("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function SH(){return new ii("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function AH(n){return new ii("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function MH(n){return new ii("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function vb(n){const e=by(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function TH(n){return new ii("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function eF(n,e,t){const i=oh(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new qc(i,"GET",hT(n,t),u);return h.errorHandler=vb(e),h}function p$(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=oh(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,A=new qc(h,"GET",function h$(n,e){return function t(r,i){const a=function d$(n,e,t){const r=aP(t);return null===r?null:function c$(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[JO])for(const i of t[JO]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Bs(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Bs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Wc(null!==a),a}}(n,e.bucket),w);return A.urlParams=a,A.errorHandler=by(e),A}function nF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function y$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class fT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function uP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Wc(!1)}return Wc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const E$={STATE_CHANGED:"state_changed"},mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cP(n){switch(n){case"running":case"pausing":case"canceling":return mo.RUNNING;case"paused":return mo.PAUSED;case"success":return mo.SUCCESS;case"canceled":return mo.CANCELED;default:return mo.ERROR}}class C${constructor(e,t,r){if(function jH(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Ey(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class D$ extends class I${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw _b("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _b("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _b("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _b("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _b("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ru(){return new D$}class oF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=yb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function v$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=nF(e,r,i),h={name:u.fullPath},_=oh(a,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=lP(u,t),q=new qc(_,"POST",function H(fe){let Ie;uP(fe);try{Ie=fe.getResponseHeader("X-Goog-Upload-URL")}catch{Wc(!1)}return Wc(uT(Ie)),Ie},n.maxUploadRetryTime);return q.urlParams=h,q.headers=A,q.body=x,q.errorHandler=by(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ru,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function w$(n,e,t,r){const _=new qc(t,"POST",function a(w){const A=uP(w,["active","final"]);let x=null;try{x=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wc(!1)}x||Wc(!1);const N=Number(x);return Wc(!isNaN(N)),new fT(N,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=by(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ru,t,r);this._request=a,a.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new fT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function b$(n,e,t,r,i,a,u,h){const _=new fT(0,0);if(u?(_.current=u.current,_.total=u.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function OH(){return new ii("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let A=w;i>0&&(A=Math.min(A,i));const x=_.current,q={"X-Goog-Upload-Command":A===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},fe=r.slice(x,x+A);if(null===fe)throw HO();const pt=new qc(t,"POST",function Ie(gt,Vt){const Zt=uP(gt,["active","final"]),Wr=_.current+A,Fu=r.size();let C1;return C1="final"===Zt?hT(e,a)(gt,Vt):null,new fT(Wr,Fu,"final"===Zt,C1)},e.maxUploadRetryTime);return pt.headers=q,pt.body=fe.uploadData(),pt.progressCallback=h||null,pt.errorHandler=by(n),pt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Ru,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=eF(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ru,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function rF(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let pt="";for(let gt=0;gt<2;gt++)pt+=Math.random().toString().slice(2);return pt}();u["Content-Type"]="multipart/related; boundary="+_;const w=nF(e,r,i),A=lP(w,t),H=Gc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===H)throw HO();const q={name:w.fullPath},fe=oh(a,n.host,n._protocol),Xe=n.maxUploadRetryTime,ct=new qc(fe,"POST",hT(n,t),Xe);return ct.urlParams=q,ct.headers=u,ct.body=H.uploadData(),ct.errorHandler=by(e),ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ru,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=jO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=cP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new C$(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(cP(this._state)){case mo.SUCCESS:Ey(this._resolve.bind(null,this.snapshot))();break;case mo.CANCELED:case mo.ERROR:Ey(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(cP(this._state)){case mo.RUNNING:case mo.PAUSED:e.next&&Ey(e.next.bind(e,this.snapshot))();break;case mo.SUCCESS:e.complete&&Ey(e.complete.bind(e))();break;default:e.error&&Ey(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class em{constructor(e,t){this._service=e,this._location=t instanceof Bs?t:Bs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new em(e,t)}get root(){const e=new Bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YO(this._location.path)}get storage(){return this._service}get parent(){const e=function r$(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bs(this._location.bucket,e);return new em(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw GO(e)}}function lF(n,e,t){return dP.apply(this,arguments)}function dP(){return dP=(0,Te.Z)(function*(n,e,t){const i=yield uF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield lF(n,e,i.nextPageToken))}),dP.apply(this,arguments)}function uF(n,e){null!=e&&"number"==typeof e.maxResults&&iP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=p$(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ru)}function L$(n){n._throwIfRoot("getDownloadURL");const e=function g$(n,e,t){const i=oh(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new qc(i,"GET",function f$(n,e){return function t(r,i){const a=QO(n,i,e);return Wc(null!==a),function u$(n,e,t,r){const i=aP(e);if(null===i||!uT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(w=>{const x=n.fullPath;return oh("/b/"+u(n.bucket)+"/o/"+u(x),t,r)+WO({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=vb(e),h}(n.storage,n._location,yb());return n.storage.makeRequestWithTokens(e,Ru).then(t=>{if(null===t)throw function FH(){return new ii("no-download-url","The given file does not have any download URLs.")}();return t})}function cF(n,e){const t=function i$(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bs(n._location.bucket,t);return new em(n.storage,r)}function dF(n,e){if(n instanceof hP){const t=n;if(null==t._bucket)throw function NH(){return new ii("no-default-bucket","No default bucket found. Did you set the '"+BO+"' property when initializing the app?")}();const r=new em(t,t._bucket);return null!=e?dF(r,e):r}return void 0!==e?cF(n,e):n}function j$(n,e){if(e&&function U$(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hP)return function B$(n,e){return new em(n,e)}(n,e);throw wy("To use ref(service, url), the first argument must be a Storage instance.")}return dF(n,e)}function hF(n,e){const t=e?.[BO];return null==t?null:Bs.makeFromBucketSpec(t,n)}class hP{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=UO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bs.makeFromBucketSpec(i,this._host):hF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bs.makeFromBucketSpec(this._url,e):hF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new em(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new LH($O());{const a=function ZH(n,e,t,r,i,a){const u=WO(n.urlParams),h=n.url+u,_=Object.assign({},n.headers);return function WH(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function GH(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function qH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,a),function zH(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new $H(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Te.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const fF="@firebase/storage";function mF(n,e){return j$(n=(0,L.m9)(n),e)}function Q$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hP(t,r,i,e,ni.SDK_VERSION)}!function J$(){(0,ni._registerComponent)(new ba.wA("storage",Q$,"PUBLIC").setMultipleInstances(!0)),(0,ni.registerVersion)(fF,"0.9.10",""),(0,ni.registerVersion)(fF,"0.9.10","esm2017")}();class pT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class yF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new pT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new pT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new pT(u,this,this._ref)):{next:t.next?u=>t.next(new pT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class vF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ah(e,this._service))}get items(){return this._delegate.items.map(e=>new ah(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ah{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Y$(n,e){return cF(n,e)}(this._delegate,e);return new ah(t,this.storage)}get root(){return new ah(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ah(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new yF(function $$(n,e,t){return function P$(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new oF(n,new Gc(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Sa.RAW,r){this._throwIfRoot("putString");const i=oP(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new yF(new oF(this._delegate,new Gc(i.data,!0),a),this)}listAll(){return function z$(n){return function N$(n){const e={prefixes:[],items:[]};return lF(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new vF(e,this.storage))}list(e){return function W$(n,e){return uF(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new vF(t,this.storage))}getMetadata(){return function G$(n){return function O$(n){n._throwIfRoot("getMetadata");const e=eF(n.storage,n._location,yb());return n.storage.makeRequestWithTokens(e,Ru)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function q$(n,e){return function F$(n,e){n._throwIfRoot("updateMetadata");const t=function m$(n,e,t,r){const a=oh(e.fullServerUrl(),n.host,n._protocol),h=lP(t,r),w=n.maxOperationRetryTime,A=new qc(a,"PATCH",hT(n,r),w);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=h,A.errorHandler=vb(e),A}(n.storage,n._location,e,yb());return n.storage.makeRequestWithTokens(t,Ru)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Z$(n){return L$(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function K$(n){return function V$(n){n._throwIfRoot("deleteObject");const e=function _$(n,e){const r=oh(e.fullServerUrl(),n.host,n._protocol),h=new qc(r,"DELETE",function u(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=vb(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ru)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw GO(e)}}class wF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bF(e))throw wy("ref() expected a child path but got a URL, use refFromURL instead.");return new ah(mF(this._delegate,e),this)}refFromURL(e){if(!bF(e))throw wy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bs.makeFromUrl(e,this._delegate.host)}catch{throw wy("refFromUrl() expected a valid full URL but got an invalid one.")}return new ah(mF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function _F(n,e,t,r={}){!function H$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function bF(n){return/^[A-Za-z]+:\/\//.test(n)}function n3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new wF(t,r)}function EF(n){const e=function i3(n){return new Ar.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function CH(n,e=ei.z){return(0,Xr.e)((t,r)=>{let i=null,a=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=u+n,A=e.now();if(A<w)return i=this.schedule(void 0,w-A),void r.add(i);h()}t.subscribe((0,dr.x)(r,w=>{a=w,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,_t.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gT(n){return{getDownloadURL:()=>dt(void 0).pipe(Lt.fc,_n(()=>n.getDownloadURL()),Lt.iC),getMetadata:()=>dt(void 0).pipe(Lt.fc,_n(()=>n.getMetadata()),Lt.iC),delete:()=>(0,mn.D)(n.delete()),child:e=>gT(n.child(e)),updateMetadata:e=>(0,mn.D)(n.updateMetadata(e)),put:(e,t)=>EF(n.put(e,t)),putString:(e,t,r)=>EF(n.putString(e,t,r)),list:e=>(0,mn.D)(n.list(e)),listAll:()=>(0,mn.D)(n.listAll())}}!function r3(n){const e={TaskState:mo,TaskEvent:E$,StringFormat:Sa,Storage:wF,Reference:ah};n.INTERNAL.registerComponent(new ba.wA("storage-compat",n3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.18")}(h_.Z);const s3=new d.OlP("angularfire2.storageBucket"),o3=new d.OlP("angularfire2.storage.maxUploadRetryTime"),a3=new d.OlP("angularfire2.storage.maxOperationRetryTime"),l3=new d.OlP("angularfire2.storage.use-emulator");let u3=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x){const N=(0,ti.on)(t,u,r);this.storage=(0,ti.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const H=u.runOutsideAngular(()=>N.storage(i||void 0)),q=A;return q&&H.useEmulator(...q),_&&H.setMaxUploadRetryTime(_),w&&H.setMaxOperationRetryTime(w),H},[_,w])}ref(t){return gT(this.storage.ref(t))}refFromURL(t){return gT(this.storage.refFromURL(t))}upload(t,r,i){return gT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(s3,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Lt.HU),d.LFG(o3,8),d.LFG(a3,8),d.LFG(l3,8),d.LFG(pb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),c3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),d3=(()=>{class n{constructor(){sT.Z.registerVersion("angularfire",Lt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[u3],imports:[c3]}),n})();const CF="@firebase/database";let fP="";function DF(n){fP=n}class p3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class g3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const TF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p3(e)}}catch{}return new g3},tm=TF("localStorage"),pP=TF("sessionStorage"),Cy=new Ea.Yd("@firebase/database"),AF=function(){let n=1;return function(){return n++}}(),SF=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},wb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=wb.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let nm=null,xF=!0;const MF=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Cy.logLevel=Ea.in.VERBOSE,nm=Cy.log.bind(Cy),e&&pP.set("logging_enabled",!0)):"function"==typeof n?nm=n:(nm=null,pP.remove("logging_enabled"))},rs=function(...n){if(!0===xF&&(xF=!1,null===nm&&!0===pP.get("logging_enabled")&&MF(!0)),nm){const e=wb.apply(null,n);nm(e)}},bb=function(n){return function(...e){rs(n,...e)}},gP=function(...n){const e="FIREBASE INTERNAL ERROR: "+wb(...n);Cy.error(e)},zc=function(...n){const e=`FIREBASE FATAL ERROR: ${wb(...n)}`;throw Cy.error(e),new Error(e)},js=function(...n){const e="FIREBASE WARNING: "+wb(...n);Cy.warn(e)},mT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lh="[MIN_NAME]",Zc="[MAX_NAME]",rm=function(n,e){if(n===e)return 0;if(n===lh||e===Zc)return-1;if(e===lh||n===Zc)return 1;{const t=_T(n),r=_T(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},y3=function(n,e){return n===e?0:n<e?-1:1},Eb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},mP=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=mP(n[e[r]]);return t+="}",t},RF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function is(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const PF=function(n){(0,L.hu)(!mT(n),"Invalid JSON number");const r=1023;let i,a,u,h,_;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const A=w.join("");let x="";for(_=0;_<64;_+=8){let N=parseInt(A.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),x+=N}return x.toLowerCase()},E3=new RegExp("^-?(0*)\\d{1,10}$"),kF=-2147483648,_P=2147483647,_T=function(n){if(E3.test(n)){const e=Number(n);if(e>=kF&&e<=_P)return e}return null},Iy=function(n){try{n()}catch(e){setTimeout(()=>{throw js("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Cb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class I3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){js(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class D3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(rs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',js(e)}}let Ib=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const VF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jF="websocket",HF="long_polling";class vP{constructor(e,t,r,i,a=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $F(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===jF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==HF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function T3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return is(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class A3{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const wP={},bP={};function EP(n){const e=n.toString();return wP[e]||(wP[e]=new A3),wP[e]}class x3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Iy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class zf{constructor(e,t,r,i,a,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bb(e),this.stats_=EP(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),$F(t,HF,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new x3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new CP((...a)=>{const[u,h,_,w,A]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&VF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zf.forceAllow_=!0}static forceDisallow(){zf.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!zf.forceAllow_&&(zf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=RF(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class CP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=AF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=CP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){rs("frame writing exception"),h.stack&&rs(h.stack),rs(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||rs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{rs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let vT=null;typeof MozWebSocket<"u"?vT=MozWebSocket:typeof WebSocket<"u"&&(vT=WebSocket);let Dy=(()=>{class n{constructor(t,r,i,a,u,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bb(this.connId),this.stats_=EP(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const h={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&VF.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),u&&(h.p=u),$F(t,jF,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tm.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${fP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new vT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==vT&&!n.forceDisallow_}static previouslyFailed(){return tm.isInMemoryStorage||!0===tm.get("previous_websocket_failure")}markConnectionHealthy(){tm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=RF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),YF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[zf,Dy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Dy&&Dy.isAvailable();let i=r&&!Dy.previouslyFailed();if(t.webSocketOnly&&(r||js("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Dy];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class rL{constructor(e,t,r,i,a,u,h,_,w,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bb("c:"+this.id+":"),this.transportManager_=new YF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Eb("t",e),r=Eb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Eb("t",e),r=Eb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Eb("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?gP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&js("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Cb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class iL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class sL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class wT extends sL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wT}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class qn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Pn(){return new qn("")}function cn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zf(n){return n.pieces_.length-n.pieceNum_}function or(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new qn(n.pieces_,e)}function DP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Db(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new qn(e,0)}function kr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof qn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new qn(t,0)}function dn(n){return n.pieceNum_>=n.pieces_.length}function _o(n,e){const t=cn(n),r=cn(e);if(null===t)return e;if(t===r)return _o(or(n),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Q3(n,e){const t=Db(n,0),r=Db(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=rm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function TP(n,e){if(Zf(n)!==Zf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ml(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Zf(n)>Zf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class J3{constructor(e,t){this.errorPrefix_=t,this.parts_=Db(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);uL(this)}}function uL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+im(n))}function im(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class AP extends sL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new AP}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Tb=1e3;let ET,sm=(()=>{class n extends iL{constructor(t,r,i,a,u,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=bb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");AP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&wT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,L.Wl)(u)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const w=_.d,A=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==A&&this.removeListen_(i,a),t.onComplete&&t.onComplete(A,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();js(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,h=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):gP("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Tb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Tb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const A=function(){w?w.close():(_=!0,a())};t.realtime_={close:A,sendRequest:function(H){(0,L.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(H)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[H,q]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?rs("getToken() completed but was canceled"):(rs("getToken() completed. Creating connection."),t.authToken_=H&&H.accessToken,t.appCheckToken_=q&&q.token,w=new rL(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{js(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(H){t.log_("Failed to get token: "+H),_||(t.repoInfo_.nodeAdmin&&js(H),A())}}})()}interrupt(t){rs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Tb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>mP(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new qn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){rs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+fP.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=wT.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new fn(e,t)}}class bT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new fn(lh,e),i=new fn(lh,t);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class hL extends bT{static get __EMPTY_NODE(){return ET}static set __EMPTY_NODE(e){ET=e}compare(e,t){return rm(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return fn.MIN}maxPost(){return new fn(Zc,ET)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new fn(e,ET)}toString(){return".key"}}const Kc=new hL;class CT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let xP,Pu=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Go.EMPTY_NODE,this.right=u??Go.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Go.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Go.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Go{constructor(e,t=Go.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Go(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pu.BLACK,null,null))}remove(e){return new Go(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new CT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new CT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new CT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new CT(this.root_,null,this.comparator_,!0,e)}}function oG(n,e){return rm(n.name,e.name)}function SP(n,e){return rm(n,e)}Go.EMPTY_NODE=new class sG{copy(e,t,r,i,a){return this}insert(e,t,r){return new Pu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fL=function(n){return"number"==typeof n?"number:"+PF(n):"string:"+n},pL=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===xP||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===xP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gL,mL,_L,Ty=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),pL(this.priorityNode_)}static set __childrenNodeConstructor(t){gL=t}static get __childrenNodeConstructor(){return gL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return dn(t)?this:".priority"===cn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=cn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===Zf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?PF(this.value_):this.value_,this.lazyHash_=SF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _r=new class cG extends bT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?rm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(Zc,new Ty("[PRIORITY-POST]",_L))}makePost(e,t){const r=mL(e);return new fn(t,new Ty("[PRIORITY-POST]",r))}toString(){return".priority"}},dG=Math.log(2);class hG{constructor(e){this.count=parseInt(Math.log(e+1)/dG,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const IT=function(n,e,t,r){n.sort(e);const i=function(_,w){const A=w-_;let x,N;if(0===A)return null;if(1===A)return x=n[_],N=t?t(x):x,new Pu(N,x.node,Pu.BLACK,null,null);{const H=parseInt(A/2,10)+_,q=i(_,H),fe=i(H+1,w);return x=n[H],N=t?t(x):x,new Pu(N,x.node,Pu.BLACK,q,fe)}},h=function(_){let w=null,A=null,x=n.length;const N=function(q,fe){const Ie=x-q,Xe=x;x-=q;const ct=i(Ie+1,Xe),pt=n[Ie],gt=t?t(pt):pt;H(new Pu(gt,pt.node,fe,null,ct))},H=function(q){w?(w.left=q,w=q):(A=q,w=q)};for(let q=0;q<_.count;++q){const fe=_.nextBitIsOne(),Ie=Math.pow(2,_.count-(q+1));fe?N(Ie,Pu.BLACK):(N(Ie,Pu.BLACK),N(Ie,Pu.RED))}return A}(new hG(n.length));return new Go(r||e,h)};let MP;const Ay={};class uh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Ay&&_r,"ChildrenNode.ts has not been loaded"),MP=MP||new uh({".priority":Ay},{".priority":_r}),MP}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Go?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Kc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(fn.Wrap);let h,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();h=i?IT(r,e.getCompare()):Ay;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const A=Object.assign({},this.indexes_);return A[_]=h,new uh(A,w)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const u=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(u,"Missing index implementation for "+a),i===Ay){if(u.isDefinedOn(e.node)){const h=[],_=t.getIterator(fn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),IT(h,u.getCompare())}return Ay}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new fn(e.name,h))),_.insert(e,e.node)}});return new uh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===Ay)return i;{const a=t.get(e.name);return a?i.remove(new fn(e.name,a)):i}});return new uh(r,this.indexSet_)}}let Ab,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pL(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ab||(Ab=new n(new Go(SP),null,uh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ab}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ab:r}}getChild(t){const r=cn(t);return null===r?this:this.getImmediateChild(r).getChild(or(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new fn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Ab:this.priorityNode_;return new n(a,h,u)}}updateChild(t,r){const i=cn(t);if(null===i)return r;{(0,L.hu)(".priority"!==cn(t)||1===Zf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(or(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(_r,(h,_)=>{r[h]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):u=!1}),!t&&u&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+fL(this.getPriority().val())+":"),this.forEachChild(_r,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":SF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new fn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new fn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new fn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,fn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,fn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Sb?-1:0}withIndex(t){if(t===Kc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Kc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_r),a=r.getIterator(_r);let u=i.getNext(),h=a.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=a.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===Kc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Sb=new class fG extends Jt{constructor(){super(new Go(SP),Jt.EMPTY_NODE,uh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};function qr(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ty(n,qr(e));if(n instanceof Array){let t=Jt.EMPTY_NODE;return is(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=qr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(qr(e))}{const t=[];let r=!1;if(is(n,(u,h)=>{if("."!==u.substring(0,1)){const _=qr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new fn(u,_)))}}),0===t.length)return Jt.EMPTY_NODE;const a=IT(t,oG,u=>u.name,SP);if(r){const u=IT(t,_r.getCompare());return new Jt(a,qr(e),new uh({".priority":u},{".priority":_r}))}return new Jt(a,qr(e),uh.Default)}}Object.defineProperties(fn,{MIN:{value:new fn(lh,Jt.EMPTY_NODE)},MAX:{value:new fn(Zc,Sb)}}),hL.__EMPTY_NODE=Jt.EMPTY_NODE,Ty.__childrenNodeConstructor=Jt,function aG(n){xP=n}(Sb),function uG(n){_L=n}(Sb),function lG(n){mL=n}(qr);class RP extends bT{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!dn(e)&&".priority"!==cn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?rm(e.name,t.name):a}makePost(e,t){const r=qr(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,Sb);return new fn(Zc,e)}toString(){return Db(this.indexPath_,0).join("/")}}const PP=new class gG extends bT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?rm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(e,t){const r=qr(e);return new fn(t,r)}toString(){return".value"}},Sy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mG=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Sy.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Sy.charAt(e[i]);return(0,L.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),wL=function(n){if(n===""+_P)return"-";const e=_T(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Zc;const a=Sy.charAt(Sy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},bL=function(n){if(n===""+kF)return lh;const e=_T(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+_P:(delete t[t.length-1],t.join("")):(t[t.length-1]=Sy.charAt(Sy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function EL(n){return{type:"value",snapshotNode:n}}function xy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function xb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Mb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class NP{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(xb(t,h)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(xy(t,r)):u.trackChildChange(Mb(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_r,(i,a)=>{t.hasChild(i)||r.trackChildChange(xb(i,a))}),t.isLeafNode()||t.forEachChild(_r,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(Mb(i,a,u))}else r.trackChildChange(xy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Rb{constructor(e){this.indexedFilter_=new NP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rb.getStartPost_(e),this.endPost_=Rb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new fn(t,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const a=this;return t.forEachChild(_r,(u,h)=>{a.matches(new fn(u,h))||(i=i.updateImmediateChild(u,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yG{constructor(e){this.rangedFilter_=new Rb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new fn(t,r))||(r=Jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Jt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let a,u,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();h=(N,H)=>x(H,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,A=!1;for(;_.hasNext();){const x=_.getNext();!A&&h(a,x)<=0&&(A=!0),A&&w<this.limit_&&h(x,u)<=0?w++:i=i.updateImmediateChild(x.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const x=this.index_.getCompare();u=(N,H)=>x(H,N)}else u=this.index_.getCompare();const h=e;(0,L.hu)(h.numChildren()===this.limit_,"");const _=new fn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),A=this.rangedFilter_.matches(_);if(h.hasChild(t)){const x=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const H=null==N?1:u(N,_);if(A&&!r.isEmpty()&&H>=0)return a?.trackChildChange(Mb(t,r,x)),h.updateImmediateChild(t,r);{a?.trackChildChange(xb(t,x));const fe=h.updateImmediateChild(t,Jt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(a?.trackChildChange(xy(N.name,N.node)),fe.updateImmediateChild(N.name,N.node)):fe}}return r.isEmpty()?e:A&&u(w,_)>=0?(null!=a&&(a.trackChildChange(xb(w.name,w.node)),a.trackChildChange(xy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Jt.EMPTY_NODE)):e}}class DT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_r}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_r}copy(){const e=new DT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function FP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function TT(n,e){const t=n.copy();return t.index_=e,t}function CL(n){const e={};if(n.isDefault())return e;let t;return n.index_===_r?t="$priority":n.index_===PP?t="$value":n.index_===Kc?t="$key":((0,L.hu)(n.index_ instanceof RP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function IL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_r&&(e.i=n.index_.toString()),e}class AT extends iL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=AT.getListenId_(e,r),h={};this.listens_[u]=h;const _=CL(e._queryParams);this.restRequest_(a+".json",_,(w,A)=>{let x=A;if(404===w&&(x=null,w=null),null===w&&this.onDataUpdate_(a,x,!1,r),(0,L.DV)(this.listens_,u)===h){let N;N=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(N,null)}})}unlisten(e,t){const r=AT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=CL(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,u)=>{let h=u;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,L.cI)(h.responseText)}catch{js("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&js("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class IG{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ST(){return{value:null,children:new Map}}function My(n,e,t){if(dn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=cn(e);n.children.has(r)||n.children.set(r,ST()),My(n.children.get(r),e=or(e),t)}}function LP(n,e){if(dn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(_r,(r,i)=>{My(n,new qn(r),i)}),LP(n,e)}}if(n.children.size>0){const t=cn(e);return e=or(e),n.children.has(t)&&LP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function VP(n,e,t){null!==n.value?t(e,n.value):function DG(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{VP(i,new qn(e.toString()+"/"+r),t)})}class TG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&is(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class xG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new TG(e);const r=1e4+2e4*Math.random();Cb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;is(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Cb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _l=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_l||(_l={})),_l))();function jP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class xT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=_l.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(dn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new qn(e));return new xT(Pn(),t,this.revert)}}return(0,L.hu)(cn(this.path)===e,"operationForChild called for unrelated child."),new xT(or(this.path),this.affectedTree,this.revert)}}class Pb{constructor(e,t){this.source=e,this.path=t,this.type=_l.LISTEN_COMPLETE}operationForChild(e){return dn(this.path)?new Pb(this.source,Pn()):new Pb(this.source,or(this.path))}}class om{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=_l.OVERWRITE}operationForChild(e){return dn(this.path)?new om(this.source,Pn(),this.snap.getImmediateChild(e)):new om(this.source,or(this.path),this.snap)}}class Ry{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=_l.MERGE}operationForChild(e){if(dn(this.path)){const t=this.children.subtree(new qn(e));return t.isEmpty()?null:t.value?new om(this.source,Pn(),t.value):new Ry(this.source,Pn(),t)}return(0,L.hu)(cn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ry(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Kf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dn(e))return this.isFullyInitialized()&&!this.filtered_;const t=cn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class MG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kb(n,e,t,r,i,a){const u=r.filter(h=>h.type===t);u.sort((h,_)=>function kG(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new fn(e.childName,e.snapshotNode),i=new fn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),u.forEach(h=>{const _=function PG(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function MT(n,e){return{eventCache:n,serverCache:e}}function Nb(n,e,t,r){return MT(new Kf(e,t,r),n.serverCache)}function TL(n,e,t,r){return MT(n.eventCache,new Kf(e,t,r))}function RT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function am(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let HP;class yr{constructor(e,t=(()=>(HP||(HP=new Go(y3)),HP))()){this.value=e,this.children=t}static fromObject(e){let t=new yr(null);return is(e,(r,i)=>{t=t.set(new qn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Pn(),value:this.value};if(dn(e))return null;{const r=cn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(or(e),t);return null!=a?{path:kr(new qn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(dn(e))return this;{const t=cn(e),r=this.children.get(t);return null!==r?r.subtree(or(e)):new yr(null)}}set(e,t){if(dn(e))return new yr(t,this.children);{const r=cn(e),a=(this.children.get(r)||new yr(null)).set(or(e),t),u=this.children.insert(r,a);return new yr(this.value,u)}}remove(e){if(dn(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const t=cn(e),r=this.children.get(t);if(r){const i=r.remove(or(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new yr(null):new yr(this.value,a)}return this}}get(e){if(dn(e))return this.value;{const t=cn(e),r=this.children.get(t);return r?r.get(or(e)):null}}setTree(e,t){if(dn(e))return t;{const r=cn(e),a=(this.children.get(r)||new yr(null)).setTree(or(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new yr(this.value,u)}}fold(e){return this.fold_(Pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(kr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(dn(e))return null;{const a=cn(e),u=this.children.get(a);return u?u.findOnPath_(or(e),kr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Pn(),t)}foreachOnPath_(e,t,r){if(dn(e))return this;{this.value&&r(t,this.value);const i=cn(e),a=this.children.get(i);return a?a.foreachOnPath_(or(e),kr(t,i),r):new yr(null)}}foreach(e){this.foreach_(Pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(kr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ku{constructor(e){this.writeTree_=e}static empty(){return new ku(new yr(null))}}function Ob(n,e,t){if(dn(e))return new ku(new yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=_o(i,e);return a=a.updateChild(u,t),new ku(n.writeTree_.set(i,a))}{const i=new yr(t),a=n.writeTree_.setTree(e,i);return new ku(a)}}}function $P(n,e,t){let r=n;return is(t,(i,a)=>{r=Ob(r,kr(e,i),a)}),r}function AL(n,e){if(dn(e))return ku.empty();{const t=n.writeTree_.setTree(e,new yr(null));return new ku(t)}}function GP(n,e){return null!=lm(n,e)}function lm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(_o(t.path,e)):null}function SL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_r,(r,i)=>{e.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new fn(r,i.value))}),e}function Yf(n,e){if(dn(e))return n;{const t=lm(n,e);return new ku(null!=t?new yr(t):n.writeTree_.subtree(e))}}function qP(n){return n.writeTree_.isEmpty()}function Py(n,e){return xL(Pn(),n.writeTree_,e)}function xL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=xL(kr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(kr(n,".priority"),r)),t}}function PT(n,e){return NL(e,n)}function UG(n,e){if(n.snap)return ml(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ml(kr(n.path,t),e))return!0;return!1}function jG(n){return n.visible}function ML(n,e,t){let r=ku.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let h;if(a.snap)ml(t,u)?(h=_o(t,u),r=Ob(r,h,a.snap)):ml(u,t)&&(h=_o(u,t),r=Ob(r,Pn(),a.snap.getChild(h)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(ml(t,u))h=_o(t,u),r=$P(r,h,a.children);else if(ml(u,t))if(h=_o(u,t),dn(h))r=$P(r,Pn(),a.children);else{const _=(0,L.DV)(a.children,cn(h));if(_){const w=_.getChild(or(h));r=Ob(r,Pn(),w)}}}}}return r}function RL(n,e,t,r,i){if(r||i){const a=Yf(n.visibleWrites,e);return!i&&qP(a)?t:i||null!=t||GP(a,Pn())?Py(ML(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ml(w.path,e)||ml(e,w.path))},e),t||Jt.EMPTY_NODE):null}{const a=lm(n.visibleWrites,e);if(null!=a)return a;{const u=Yf(n.visibleWrites,e);return qP(u)?t:null!=t||GP(u,Pn())?Py(u,t||Jt.EMPTY_NODE):null}}}function kT(n,e,t,r){return RL(n.writeTree,n.treePath,e,t,r)}function WP(n,e){return function HG(n,e,t){let r=Jt.EMPTY_NODE;const i=lm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_r,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Yf(n.visibleWrites,e);return t.forEachChild(_r,(u,h)=>{const _=Py(Yf(a,new qn(u)),h);r=r.updateImmediateChild(u,_)}),SL(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return SL(Yf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function PL(n,e,t,r){return function $G(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=kr(e,t);if(GP(n.visibleWrites,a))return null;{const u=Yf(n.visibleWrites,a);return qP(u)?i.getChild(t):Py(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function NT(n,e){return function qG(n,e){return lm(n.visibleWrites,e)}(n.writeTree,kr(n.treePath,e))}function zP(n,e,t){return function GG(n,e,t,r){const i=kr(e,t),a=lm(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Py(Yf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function kL(n,e){return NL(kr(n.treePath,e),n.writeTree)}function NL(n,e){return{treePath:n,writeTree:e}}class KG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Mb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,xb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,xy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Mb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const OL=new class YG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ZP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Kf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:am(this.viewCache_),a=function ZG(n,e,t,r,i,a){return function WG(n,e,t,r,i,a,u){let h;const _=Yf(n.visibleWrites,e),w=lm(_,Pn());if(null!=w)h=w;else{if(null==t)return[];h=Py(_,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const A=[],x=u.getCompare(),N=a?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let H=N.getNext();for(;H&&A.length<i;)0!==x(H,r)&&A.push(H),H=N.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function FL(n,e,t,r,i,a){const u=e.eventCache;if(null!=NT(r,t))return e;{let h,_;if(dn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=am(e),x=WP(r,w instanceof Jt?w:Jt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const w=kT(r,am(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=cn(t);if(".priority"===w){(0,L.hu)(1===Zf(t),"Can't have a priority with additional path components");const A=u.getNode();_=e.serverCache.getNode();const x=PL(r,t,A,_);h=null!=x?n.filter.updatePriority(A,x):u.getNode()}else{const A=or(t);let x;if(u.isCompleteForChild(w)){_=e.serverCache.getNode();const N=PL(r,t,u.getNode(),_);x=null!=N?u.getNode().getImmediateChild(w).updateChild(A,N):u.getNode().getImmediateChild(w)}else x=zP(r,w,e.serverCache);h=null!=x?n.filter.updateChild(u.getNode(),w,x,A,i,a):u.getNode()}}return Nb(e,h,u.isFullyInitialized()||dn(t),n.filter.filtersNodes())}}function OT(n,e,t,r,i,a,u,h){const _=e.serverCache;let w;const A=u?n.filter:n.filter.getIndexedFilter();if(dn(t))w=A.updateFullNode(_.getNode(),r,null);else if(A.filtersNodes()&&!_.isFiltered()){const H=_.getNode().updateChild(t,r);w=A.updateFullNode(_.getNode(),H,null)}else{const H=cn(t);if(!_.isCompleteForPath(t)&&Zf(t)>1)return e;const q=or(t),Ie=_.getNode().getImmediateChild(H).updateChild(q,r);w=".priority"===H?A.updatePriority(_.getNode(),Ie):A.updateChild(_.getNode(),H,Ie,q,OL,null)}const x=TL(e,w,_.isFullyInitialized()||dn(t),A.filtersNodes());return FL(n,x,t,i,new ZP(i,x,a),h)}function KP(n,e,t,r,i,a,u){const h=e.eventCache;let _,w;const A=new ZP(i,e,a);if(dn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=Nb(e,w,!0,n.filter.filtersNodes());else{const x=cn(t);if(".priority"===x)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=Nb(e,w,h.isFullyInitialized(),h.isFiltered());else{const N=or(t),H=h.getNode().getImmediateChild(x);let q;if(dn(N))q=r;else{const fe=A.getCompleteChild(x);q=null!=fe?".priority"===DP(N)&&fe.getChild(lL(N)).isEmpty()?fe:fe.updateChild(N,r):Jt.EMPTY_NODE}_=H.equals(q)?e:Nb(e,n.filter.updateChild(h.getNode(),x,q,N,A,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function LL(n,e){return n.eventCache.isCompleteForChild(e)}function VL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function YP(n,e,t,r,i,a,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=dn(t)?r:new yr(null).setTree(t,r);const A=e.serverCache.getNode();return w.children.inorderTraversal((x,N)=>{if(A.hasChild(x)){const q=VL(0,e.serverCache.getNode().getImmediateChild(x),N);_=OT(n,_,new qn(x),q,i,a,u,h)}}),w.children.inorderTraversal((x,N)=>{const H=!e.serverCache.isCompleteForChild(x)&&null===N.value;if(!A.hasChild(x)&&!H){const fe=VL(0,e.serverCache.getNode().getImmediateChild(x),N);_=OT(n,_,new qn(x),fe,i,a,u,h)}}),_}class s6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new NP(r.getIndex()),a=function vG(n){return n.loadsAllData()?new NP(n.getIndex()):n.hasLimit()?new yG(n):new Rb(n)}(r);this.processor_=function QG(n){return{filter:n}}(a);const u=t.serverCache,h=t.eventCache,_=i.updateFullNode(Jt.EMPTY_NODE,u.getNode(),null),w=a.updateFullNode(Jt.EMPTY_NODE,h.getNode(),null),A=new Kf(_,u.isFullyInitialized(),i.filtersNodes()),x=new Kf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=MT(x,A),this.eventGenerator_=new MG(this.query_)}get query(){return this.query_}}function l6(n,e){const t=am(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!dn(e)&&!t.getImmediateChild(cn(e)).isEmpty())?t.getChild(e):null}function UL(n){return 0===n.eventRegistrations_.length}function BL(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function jL(n,e,t,r){e.type===_l.MERGE&&null!==e.source.queryId&&((0,L.hu)(am(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(RT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function XG(n,e,t,r,i){const a=new KG;let u,h;if(t.type===_l.OVERWRITE){const w=t;w.source.fromUser?u=KP(n,e,w.path,w.snap,r,i,a):((0,L.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!dn(w.path),u=OT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===_l.MERGE){const w=t;w.source.fromUser?u=function t6(n,e,t,r,i,a,u){let h=e;return r.foreach((_,w)=>{const A=kr(t,_);LL(e,cn(A))&&(h=KP(n,h,A,w,i,a,u))}),r.foreach((_,w)=>{const A=kr(t,_);LL(e,cn(A))||(h=KP(n,h,A,w,i,a,u))}),h}(n,e,w.path,w.children,r,i,a):((0,L.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),u=YP(n,e,w.path,w.children,r,i,h,a))}else if(t.type===_l.ACK_USER_WRITE){const w=t;u=w.revert?function i6(n,e,t,r,i,a){let u;if(null!=NT(r,t))return e;{const h=new ZP(r,e,i),_=e.eventCache.getNode();let w;if(dn(t)||".priority"===cn(t)){let A;if(e.serverCache.isFullyInitialized())A=kT(r,am(e));else{const x=e.serverCache.getNode();(0,L.hu)(x instanceof Jt,"serverChildren would be complete if leaf node"),A=WP(r,x)}w=n.filter.updateFullNode(_,A,a)}else{const A=cn(t);let x=zP(r,A,e.serverCache);null==x&&e.serverCache.isCompleteForChild(A)&&(x=_.getImmediateChild(A)),w=null!=x?n.filter.updateChild(_,A,x,or(t),h,a):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(_,A,Jt.EMPTY_NODE,or(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=kT(r,am(e)),u.isLeafNode()&&(w=n.filter.updateFullNode(w,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=NT(r,Pn()),Nb(e,w,u,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function n6(n,e,t,r,i,a,u){if(null!=NT(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(dn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return OT(n,e,t,_.getNode().getChild(t),i,a,h,u);if(dn(t)){let w=new yr(null);return _.getNode().forEachChild(Kc,(A,x)=>{w=w.set(new qn(A),x)}),YP(n,e,t,w,i,a,h,u)}return e}{let w=new yr(null);return r.foreach((A,x)=>{const N=kr(t,A);_.isCompleteForPath(N)&&(w=w.set(A,_.getNode().getChild(N)))}),YP(n,e,t,w,i,a,h,u)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==_l.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);u=function r6(n,e,t,r,i){const a=e.serverCache;return FL(n,TL(e,a.getNode(),a.isFullyInitialized()||dn(t),a.isFiltered()),t,r,OL,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function e6(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=RT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(EL(RT(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function JG(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,HL(n,a.changes,a.viewCache.eventCache.getNode(),null)}function HL(n,e,t,r){return function RG(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function _G(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),kb(n,i,"child_removed",e,r,t),kb(n,i,"child_added",e,r,t),kb(n,i,"child_moved",a,r,t),kb(n,i,"child_changed",e,r,t),kb(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let FT,VT;class $L{constructor(){this.views=new Map}}function QP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),jL(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(jL(u,e,t,r));return a}}function GL(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=kT(t,i?r:null),_=!1;h?_=!0:r instanceof Jt?(h=WP(t,r),_=!1):(h=Jt.EMPTY_NODE,_=!1);const w=MT(new Kf(h,_,!1),new Kf(r,i,!1));return new s6(e,w)}return u}function qL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Qf(n,e){let t=null;for(const r of n.views.values())t=t||l6(r,e);return t}function WL(n,e){return e._queryParams.loadsAllData()?LT(n):n.views.get(e._queryIdentifier)}function zL(n,e){return null!=WL(n,e)}function Jf(n){return null!=LT(n)}function LT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let y6=1;class ZL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function zG(){return{visibleWrites:ku.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JP(n,e,t,r,i){return function OG(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ob(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ky(n,new om({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Xf(n,e,t=!1){const r=function LG(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function VG(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&UG(h,r.path)?i=!1:ml(r.path,h.path)&&(a=!0)),u--}return!!i&&(a?(function BG(n){n.visibleWrites=ML(n.allWrites,jG,Pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=AL(n.visibleWrites,r.path):is(r.children,_=>{n.visibleWrites=AL(n.visibleWrites,kr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new yr(null);return null!=r.snap?a=a.set(Pn(),!0):is(r.children,u=>{a=a.set(new qn(u),!0)}),ky(n,new xT(r.path,a,t))}return[]}function Fb(n,e,t){return ky(n,new om({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function UT(n,e,t,r,i=!1){const a=e._path,u=n.syncPointTree_.get(a);let h=[];if(u&&("default"===e._queryIdentifier||zL(u,e))){const _=function g6(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const h=Jf(n);if("default"===i)for(const[_,w]of n.views.entries())u=u.concat(BL(w,t,r)),UL(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(u=u.concat(BL(_,t,r)),UL(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!Jf(n)&&a.push(new(function h6(){return(0,L.hu)(FT,"Reference.ts has not been loaded"),FT}())(e._repo,e._path)),{removed:a,events:u}}(u,e,t,r);(function f6(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const A=-1!==w.findIndex(N=>N._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(a,(N,H)=>Jf(H));if(A&&!x){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const H=function D6(n){return n.fold((e,t,r)=>{if(t&&Jf(t))return[LT(t)];{let i=[];return t&&(i=qL(t)),is(r,(a,u)=>{i=i.concat(u)}),i}})}(N);for(let q=0;q<H.length;++q){const fe=H[q],Ie=fe.query,Xe=JL(n,fe);n.listenProvider_.startListening(Vb(Ie),Lb(n,Ie),Xe.hashFn,Xe.onComplete)}}}!x&&w.length>0&&!r&&(A?n.listenProvider_.stopListening(Vb(e),null):w.forEach(N=>{const H=n.queryToTagMap.get(jT(N));n.listenProvider_.stopListening(Vb(N),H)}))}!function T6(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=jT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function KL(n,e,t,r){const i=e1(n,r);if(null!=i){const a=t1(i),u=a.path,h=a.queryId,_=_o(u,e);return n1(n,u,new om(jP(h),_,t))}return[]}function XP(n,e,t,r=!1){const i=e._path;let a=null,u=!1;n.syncPointTree_.foreachOnPath(i,(N,H)=>{const q=_o(N,i);a=a||Qf(H,q),u=u||Jf(H)});let _,h=n.syncPointTree_.get(i);h?(u=u||Jf(h),a=a||Qf(h,Pn())):(h=new $L,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=Jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((H,q)=>{const fe=Qf(q,Pn());fe&&(a=a.updateImmediateChild(H,fe))}));const w=zL(h,e);if(!w&&!e._queryParams.loadsAllData()){const N=jT(e);(0,L.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const H=function A6(){return y6++}();n.queryToTagMap.set(N,H),n.tagToQueryMap.set(H,N)}let x=function p6(n,e,t,r,i,a){const u=GL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function u6(n,e){n.eventRegistrations_.push(e)}(u,t),function c6(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_r,(a,u)=>{r.push(xy(a,u))}),t.isFullyInitialized()&&r.push(EL(t.getNode())),HL(n,r,t.getNode(),e)}(u,t)}(h,e,t,PT(n.pendingWriteTree_,i),a,_);if(!w&&!u&&!r){const N=WL(h,e);x=x.concat(function S6(n,e,t){const r=e._path,i=Lb(n,e),a=JL(n,t),u=n.listenProvider_.startListening(Vb(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Jf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,A,x)=>{if(!dn(w)&&A&&Jf(A))return[LT(A).query];{let N=[];return A&&(N=N.concat(qL(A).map(H=>H.query))),is(x,(H,q)=>{N=N.concat(q)}),N}});for(let w=0;w<_.length;++w){const A=_[w];n.listenProvider_.stopListening(Vb(A),Lb(n,A))}}return u}(n,e,N))}return x}function BT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,h)=>{const w=Qf(h,_o(u,e));if(w)return w});return RL(i,e,a,t,!0)}function ky(n,e){return YL(e,n.syncPointTree_,null,PT(n.pendingWriteTree_,Pn()))}function YL(n,e,t,r){if(dn(n.path))return QL(n,e,t,r);{const i=e.get(Pn());null==t&&null!=i&&(t=Qf(i,Pn()));let a=[];const u=cn(n.path),h=n.operationForChild(u),_=e.children.get(u);if(_&&h){const w=t?t.getImmediateChild(u):null,A=kL(r,u);a=a.concat(YL(h,_,w,A))}return i&&(a=a.concat(QP(i,n,r,t))),a}}function QL(n,e,t,r){const i=e.get(Pn());null==t&&null!=i&&(t=Qf(i,Pn()));let a=[];return e.children.inorderTraversal((u,h)=>{const _=t?t.getImmediateChild(u):null,w=kL(r,u),A=n.operationForChild(u);A&&(a=a.concat(QL(A,h,_,w)))}),i&&(a=a.concat(QP(i,n,r,t))),a}function JL(n,e){const t=e.query,r=Lb(n,t);return{hashFn:()=>(function o6(n){return n.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function E6(n,e,t){const r=e1(n,t);if(r){const i=t1(r),a=i.path,u=i.queryId,h=_o(a,e);return n1(n,a,new Pb(jP(u),h))}return[]}(n,t._path,r):function b6(n,e){return ky(n,new Pb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function b3(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return UT(n,t,null,a)}}}}function Lb(n,e){const t=jT(e);return n.queryToTagMap.get(t)}function jT(n){return n._path.toString()+"$"+n._queryIdentifier}function e1(n,e){return n.tagToQueryMap.get(e)}function t1(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new qn(n.substr(0,e))}}function n1(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),QP(r,t,PT(n.pendingWriteTree_,e),null)}function Vb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function _6(){return(0,L.hu)(VT,"Reference.ts has not been loaded"),VT}())(n._repo,n._path):n}class r1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new r1(t)}node(){return this.node_}}class i1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=kr(this.path_,e);return new i1(this.syncTree_,t)}node(){return BT(this.syncTree_,this.path_)}}const XL=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?M6(n[".sv"],e,t):"object"==typeof n[".sv"]?R6(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},M6=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},R6=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},e2=function(n,e,t,r){return o1(e,new i1(t,n),r)},s1=function(n,e,t){return o1(n,new r1(e),t)};function o1(n,e,t){const r=n.getPriority().val(),i=XL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,h=XL(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new Ty(h,qr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new Ty(i))),u.forEachChild(_r,(h,_)=>{const w=o1(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class a1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function HT(n,e){let t=e instanceof qn?e:new qn(e),r=n,i=cn(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new a1(i,r,a),t=or(t),i=cn(t)}return r}function um(n){return n.node.value}function l1(n,e){n.node.value=e,u1(n)}function t2(n){return n.node.childCount>0}function $T(n,e){is(n.node.children,(t,r)=>{e(new a1(t,n,r))})}function n2(n,e,t,r){t&&!r&&e(n),$T(n,i=>{n2(i,e,!0,r)}),t&&r&&e(n)}function Ub(n){return new qn(null===n.parent?n.name:Ub(n.parent)+"/"+n.name)}function u1(n){null!==n.parent&&function N6(n,e,t){const r=function P6(n){return void 0===um(n)&&!t2(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,u1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,u1(n))}(n.parent,n.name,n)}const O6=/[\[\].#$\/\u0000-\u001F\u007F]/,F6=/[\[\].#$\u0000-\u001F\u007F]/,c1=10485760,GT=function(n){return"string"==typeof n&&0!==n.length&&!O6.test(n)},r2=function(n){return"string"==typeof n&&0!==n.length&&!F6.test(n)},Bb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!mT(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Yc=function(n,e,t,r){r&&void 0===e||jb((0,L.gK)(n,"value"),e,t)},jb=function(n,e,t){const r=t instanceof qn?new J3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+im(r));if("function"==typeof e)throw new Error(n+"contains a function "+im(r)+" with contents = "+e.toString());if(mT(e))throw new Error(n+"contains "+e.toString()+" "+im(r));if("string"==typeof e&&e.length>c1/3&&(0,L.ug)(e)>c1)throw new Error(n+"contains a string greater than "+c1+" utf8 bytes "+im(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(is(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!GT(u)))throw new Error(n+" contains an invalid key ("+u+") "+im(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function X3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),uL(n)})(r,u),jb(n,h,r),function eG(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+im(r)+" in addition to actual children.")}},i2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];is(e,(u,h)=>{const _=new qn(u);if(jb(i,h,kr(t,_)),".priority"===DP(_)&&!Bb(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Db(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!GT(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Q3);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ml(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},d1=function(n,e,t){if(!t||void 0!==e){if(mT(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Bb(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Hb=function(n,e,t,r){if(!(r&&void 0===t||GT(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},$b=function(n,e,t,r){if(!(r&&void 0===t||r2(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yl=function(n,e){if(".info"===cn(e))throw new Error(n+" failed = Can't modify data under /.info/")},s2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!GT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),r2(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class B6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!TP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function o2(n,e,t){qT(n,t),a2(n,r=>TP(r,e))}function xa(n,e,t){qT(n,t),a2(n,r=>ml(r,e)||ml(e,r))}function a2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(j6(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function j6(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();nm&&rs("event: "+t.toString()),Iy(r)}}}const l2="repo_interrupt";class $6{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new B6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ST(),this.transactionQueueTree_=new a1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function u2(n){const t=n.infoData_.getNode(new qn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Gb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:u2(n)})}function c2(n,e,t,r,i){n.dataUpdateCount++;const a=new qn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,L.UI)(t,w=>qr(w));u=function C6(n,e,t,r){const i=e1(n,r);if(i){const a=t1(i),u=a.path,h=a.queryId,_=_o(u,e),w=yr.fromObject(t);return n1(n,u,new Ry(jP(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=qr(t);u=KL(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,L.UI)(t,w=>qr(w));u=function w6(n,e,t){const r=yr.fromObject(t);return ky(n,new Ry({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=qr(t);u=Fb(n.serverSyncTree_,a,_)}let h=a;u.length>0&&(h=Oy(n,a)),xa(n.eventQueue_,h,u)}function d2(n,e){h1(n,"connected",e),!1===e&&function Z6(n){Ny(n,"onDisconnectEvents");const e=Gb(n),t=ST();VP(n.onDisconnect_,Pn(),(i,a)=>{const u=e2(i,a,n.serverSyncTree_,e);My(t,i,u)});let r=[];VP(t,Pn(),(i,a)=>{r=r.concat(Fb(n.serverSyncTree_,i,a));const u=m1(n,i);Oy(n,u)}),n.onDisconnect_=ST(),xa(n.eventQueue_,Pn(),r)}(n)}function h1(n,e,t){const r=new qn("/.info/"+e),i=qr(t);n.infoData_.updateSnapshot(r,i);const a=Fb(n.infoSyncTree_,r,i);xa(n.eventQueue_,r,a)}function WT(n){return n.nextWriteId_++}function f1(n,e,t,r,i){Ny(n,"set",{path:e.toString(),value:t,priority:r});const a=Gb(n),u=qr(t,r),h=BT(n.serverSyncTree_,e),_=s1(u,h,a),w=WT(n),A=JP(n.serverSyncTree_,e,_,w,!0);qT(n.eventQueue_,A),n.server_.put(e.toString(),u.val(!0),(N,H)=>{const q="ok"===N;q||js("set at "+e+" failed: "+N);const fe=Xf(n.serverSyncTree_,w,!q);xa(n.eventQueue_,e,fe),ep(0,i,N,H)});const x=m1(n,e);Oy(n,x),xa(n.eventQueue_,x,[])}function K6(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&LP(n.onDisconnect_,e),ep(0,t,r,i)})}function h2(n,e,t,r){const i=qr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&My(n.onDisconnect_,e,i),ep(0,r,a,u)})}function p1(n,e,t){let r;r=".info"===cn(e._path)?UT(n.infoSyncTree_,e,t):UT(n.serverSyncTree_,e,t),o2(n.eventQueue_,e._path,r)}function f2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(l2)}function Ny(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),rs(t,...e)}function ep(n,e,t,r){e&&Iy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function g1(n,e,t){return BT(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function zT(n,e=n.transactionQueueTree_){if(e||ZT(n,e),um(e)){const t=g2(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function t4(n,e,t){const r=t.map(w=>w.currentWriteId),i=g1(n,e,r);let a=i;const u=i.hash();for(let w=0;w<t.length;w++){const A=t[w];(0,L.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const x=_o(e,A.path);a=a.updateChild(x,A.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Ny(n,"transaction put response",{path:_.toString(),status:w});let A=[];if("ok"===w){const x=[];for(let N=0;N<t.length;N++)t[N].status=2,A=A.concat(Xf(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&x.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();ZT(n,HT(n.transactionQueueTree_,e)),zT(n,n.transactionQueueTree_),xa(n.eventQueue_,e,A);for(let N=0;N<x.length;N++)Iy(x[N])}else{if("datastale"===w)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{js("transaction at "+_.toString()+" failed: "+w);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=w}Oy(n,e)}},u)}(n,Ub(e),t)}else t2(e)&&$T(e,t=>{zT(n,t)})}function Oy(n,e){const t=p2(n,e),r=Ub(t);return function n4(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=_o(t,_.path);let x,A=!1;if((0,L.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)A=!0,x=_.abortReason,i=i.concat(Xf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)A=!0,x="maxretry",i=i.concat(Xf(n.serverSyncTree_,_.currentWriteId,!0));else{const N=g1(n,_.path,u);_.currentInputSnapshot=N;const H=e[h].update(N.val());if(void 0!==H){jb("transaction failed: Data returned ",H,_.path);let q=qr(H);"object"==typeof H&&null!=H&&(0,L.r3)(H,".priority")||(q=q.updatePriority(N.getPriority()));const Ie=_.currentWriteId,Xe=Gb(n),ct=s1(q,N,Xe);_.currentOutputSnapshotRaw=q,_.currentOutputSnapshotResolved=ct,_.currentWriteId=WT(n),u.splice(u.indexOf(Ie),1),i=i.concat(JP(n.serverSyncTree_,_.path,ct,_.currentWriteId,_.applyLocally)),i=i.concat(Xf(n.serverSyncTree_,Ie,!0))}else A=!0,x="nodata",i=i.concat(Xf(n.serverSyncTree_,_.currentWriteId,!0))}xa(n.eventQueue_,t,i),i=[],A&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===x?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(x),!1,null)))}ZT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Iy(r[h]);zT(n,n.transactionQueueTree_)}(n,g2(n,t),r),r}function p2(n,e){let t,r=n.transactionQueueTree_;for(t=cn(e);null!==t&&void 0===um(r);)r=HT(r,t),t=cn(e=or(e));return r}function g2(n,e){const t=[];return m2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function m2(n,e,t){const r=um(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);$T(e,i=>{m2(n,i,t)})}function ZT(n,e){const t=um(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,l1(e,t.length>0?t:void 0)}$T(e,r=>{ZT(n,r)})}function m1(n,e){const t=Ub(p2(n,e)),r=HT(n.transactionQueueTree_,e);return function k6(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{_1(n,i)}),_1(n,r),n2(r,i=>{_1(n,i)}),t}function _1(n,e){const t=um(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,L.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,L.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Xf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?l1(e,void 0):t.length=a+1,xa(n.eventQueue_,Ub(e),i);for(let u=0;u<r.length;u++)Iy(r[u])}}const y1=function(n,e){const t=s4(n),r=t.namespace;return"firebase.com"===t.domain&&zc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&zc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&js("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new qn(t.pathString)}},s4=function(n){let e="",t="",r="",i="",a="",u=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let A=n.indexOf("/");-1===A&&(A=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(A,x)),A<x&&(i=function r4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(A,x)));const N=function i4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):js(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));w=e.indexOf(":"),w>=0?(u="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const H=e.slice(0,w);if("localhost"===H.toLowerCase())t="localhost";else if(H.split(".").length<=2)t=H;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:a}};class _2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class y2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class v1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class v2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return K6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){yl("OnDisconnect.remove",this._path);const e=new L.BH;return h2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){yl("OnDisconnect.set",this._path),Yc("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return h2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){yl("OnDisconnect.setWithPriority",this._path),Yc("OnDisconnect.setWithPriority",e,this._path,!1),d1("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function Y6(n,e,t,r,i){const a=qr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,h)=>{"ok"===u&&My(n.onDisconnect_,e,a),ep(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){yl("OnDisconnect.update",this._path),i2("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function Q6(n,e,t,r){if((0,L.xb)(t))return rs("onDisconnect().update() called with empty data.  Don't do anything."),void ep(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&is(t,(u,h)=>{const _=qr(h);My(n.onDisconnect_,kr(e,u),_)}),ep(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class qo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return dn(this._path)?null:DP(this._path)}get ref(){return new vl(this._repo,this._path)}get _queryIdentifier(){const e=IL(this._queryParams),t=mP(e);return"{}"===t?"default":t}get _queryObject(){return IL(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof qo))return!1;const t=this._repo===e._repo,r=TP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Y3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function KT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function tp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Kc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==lh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Zc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===_r){if(null!=e&&!Bb(e)||null!=t&&!Bb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof RP||n.getIndex()===PP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function YT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vl extends qo{constructor(e,t){super(e,t,new DT,!1)}get parent(){const e=lL(this._path);return null===e?null:new vl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class cm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new qn(e),r=dm(this.ref,e);return new cm(this._node.getChild(t),r,_r)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new cm(i,dm(this.ref,r),_r)))}hasChild(e){const t=new qn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function w2(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?dm(n._root,e):n._root}function b2(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=y1(e,n._repo.repoInfo_.nodeAdmin);s2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&zc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),w2(n,t.path.toString())}function dm(n,e){return null===cn((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),$b("child","path",t,!1)):$b("child","path",e,!1),new vl(n._repo,kr(n._path,e));var t}function w1(n,e){n=(0,L.m9)(n),yl("set",n._path),Yc("set",e,n._path,!1);const t=new L.BH;return f1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function c4(n,e){i2("update",e,n._path,!1);const t=new L.BH;return function z6(n,e,t,r){Ny(n,"update",{path:e.toString(),value:t});let i=!0;const a=Gb(n),u={};if(is(t,(h,_)=>{i=!1,u[h]=e2(kr(e,h),qr(_),n.serverSyncTree_,a)}),i)rs("update() called with empty data.  Don't do anything."),ep(0,r,"ok",void 0);else{const h=WT(n),_=function v6(n,e,t,r){!function FG(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=$P(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=yr.fromObject(t);return ky(n,new Ry({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);qT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,A)=>{const x="ok"===w;x||js("update at "+e+" failed: "+w);const N=Xf(n.serverSyncTree_,h,!x),H=N.length>0?Oy(n,e):e;xa(n.eventQueue_,H,N),ep(0,r,w,A)}),is(t,w=>{const A=m1(n,kr(e,w));Oy(n,A)}),xa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function d4(n){n=(0,L.m9)(n);const e=new v1(()=>{}),t=new qb(e);return function W6(n,e,t){const r=function I6(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,A)=>{const x=_o(w,t);r=r||Qf(A,x)});let i=n.syncPointTree_.get(t);i?r=r||Qf(i,Pn()):(i=new $L,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new Kf(r,!0,!1):null;return function a6(n){return RT(n.viewCache_)}(GL(i,e,PT(n.pendingWriteTree_,e._path),a?u.getNode():Jt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=qr(i).withIndex(e._queryParams.getIndex());let u;if(XP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Fb(n.serverSyncTree_,e._path,a);else{const h=Lb(n.serverSyncTree_,e);u=KL(n.serverSyncTree_,e._path,a,h)}return xa(n.eventQueue_,e._path,u),UT(n.serverSyncTree_,e,t,null,!0),a},i=>(Ny(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new cm(r,new vl(n._repo,n._path),n._queryParams.getIndex()))}class qb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new _2("value",this,new cm(e.snapshotNode,new vl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new y2(this,e,t):null}matches(e){return e instanceof qb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new y2(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=dm(new vl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new _2(e.type,this,new cm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Wb(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(A,x)=>{p1(n._repo,n,h),_(A,x)};w.userCallback=t.userCallback,w.context=t.context,t=w}const u=new v1(t,a||void 0),h="value"===e?new qb(u):new QT(e,u);return function J6(n,e,t){let r;r=".info"===cn(e._path)?XP(n.infoSyncTree_,e,t):XP(n.serverSyncTree_,e,t),o2(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>p1(n._repo,n,h)}function b1(n,e,t,r){return Wb(n,"value",e,t,r)}function E2(n,e,t,r){return Wb(n,"child_added",e,t,r)}function C2(n,e,t,r){return Wb(n,"child_changed",e,t,r)}function I2(n,e,t,r){return Wb(n,"child_moved",e,t,r)}function D2(n,e,t,r){return Wb(n,"child_removed",e,t,r)}function T2(n,e,t){let r=null;const i=t?new v1(t):null;"value"===e?r=new qb(i):e&&(r=new QT(e,i)),p1(n._repo,n,r)}class Nu{}class A2 extends Nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yc("endAt",this._value,e._path,!0);const t=FP(e._queryParams,this._value,this._key);if(YT(t),tp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class f4 extends Nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yc("endBefore",this._value,e._path,!1);const t=function CG(n,e,t){let r,i;return n.index_===Kc?("string"==typeof e&&(e=bL(e)),i=FP(n,e,t)):(r=null==t?lh:bL(t),i=FP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(YT(t),tp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class S2 extends Nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yc("startAt",this._value,e._path,!0);const t=OP(e._queryParams,this._value,this._key);if(YT(t),tp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class m4 extends Nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yc("startAfter",this._value,e._path,!1);const t=function EG(n,e,t){let r;if(n.index_===Kc)"string"==typeof e&&(e=wL(e)),r=OP(n,e,t);else{let i;i=null==t?Zc:wL(t),r=OP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(YT(t),tp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qo(e._repo,e._path,t,e._orderByCalled)}}class y4 extends Nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qo(e._repo,e._path,function wG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class w4 extends Nu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qo(e._repo,e._path,function bG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class E4 extends Nu{constructor(e){super(),this._path=e}_apply(e){KT(e,"orderByChild");const t=new qn(this._path);if(dn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new RP(t),i=TT(e._queryParams,r);return tp(i),new qo(e._repo,e._path,i,!0)}}class I4 extends Nu{_apply(e){KT(e,"orderByKey");const t=TT(e._queryParams,Kc);return tp(t),new qo(e._repo,e._path,t,!0)}}class T4 extends Nu{_apply(e){KT(e,"orderByPriority");const t=TT(e._queryParams,_r);return tp(t),new qo(e._repo,e._path,t,!0)}}class S4 extends Nu{_apply(e){KT(e,"orderByValue");const t=TT(e._queryParams,PP);return tp(t),new qo(e._repo,e._path,t,!0)}}class M4 extends Nu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Yc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new A2(this._value,this._key)._apply(new S2(this._value,this._key)._apply(e))}}function Ou(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function d6(n){(0,L.hu)(!FT,"__referenceConstructor has already been defined"),FT=n})(vl),function m6(n){(0,L.hu)(!VT,"__referenceConstructor has already been defined"),VT=n}(vl);const E1={};function M2(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||zc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rs("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,u=y1(a,i),h=u.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,u=y1(a,i),h=u.repoInfo):_=!u.repoInfo.secure;const A=i&&_?new Ib(Ib.OWNER):new D3(n.name,n.options,e);s2("Invalid Firebase Database URL",u),dn(u.path)||zc("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function O4(n,e,t,r){let i=E1[e.name];i||(i={},E1[e.name]=i);let a=i[n.toURLString()];return a&&zc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new $6(n,false,t,r),i[n.toURLString()]=a,a}(h,n,A,new I3(n.name,t));return new L4(x,n)}class L4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function G6(n,e,t){if(n.stats_=EP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new AT(n.repoInfo_,(r,i,a,u)=>{c2(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>d2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new sm(n.repoInfo_,e,(r,i,a,u)=>{c2(n,r,i,a,u)},r=>{d2(n,r)},r=>{!function q6(n,e){is(e,(t,r)=>{h1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function S3(n,e){const t=n.toString();return bP[t]||(bP[t]=e()),bP[t]}(n.repoInfo_,()=>new xG(n.stats_,n.server_)),n.infoData_=new IG,n.infoSyncTree_=new ZL({startListening:(r,i,a,u)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=Fb(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),h1(n,"connected",!1),n.serverSyncTree_=new ZL({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(h,_)=>{const w=u(h,_);xa(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vl(this._repo,Pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N4(n,e){const t=E1[e];(!t||t[n.key]!==n)&&zc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),f2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zc("Cannot call "+e+" on a deleted database.")}}function R2(){YF.IS_TRANSPORT_INITIALIZED&&js("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function V4(){R2(),zf.forceDisallow()}function U4(){R2(),Dy.forceDisallow(),zf.forceAllow()}function H4(n,e){MF(n,e)}const G4={".sv":"timestamp"};class z4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}sm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},sm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function $4(n){DF(ni.SDK_VERSION),(0,ni._registerComponent)(new ba.wA("database",(e,{instanceIdentifier:t})=>M2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ni.registerVersion)(CF,"0.13.7",n),(0,ni.registerVersion)(CF,"0.13.7","esm2017")}();const Q4=new Ea.Yd("@firebase/database-compat"),k2=function(n){Q4.warn("FIREBASE WARNING: "+n)};class eq{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,k2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class tq{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class np{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),$b("DataSnapshot.child","path",e,!1),new np(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),$b("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new np(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ma(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ws{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const u=ws.getCancelAndContextArgs_("Query.on",r,i),h=(w,A)=>{t.call(u.context,new np(this.database,w),A)};h.userCallback=t,h.context=u.context;const _=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return b1(this._delegate,h,_),t;case"child_added":return E2(this._delegate,h,_),t;case"child_removed":return D2(this._delegate,h,_),t;case"child_changed":return C2(this._delegate,h,_),t;case"child_moved":return I2(this._delegate,h,_),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,T2(this._delegate,e,i)}else T2(this._delegate,e)}get(){return d4(this._delegate).then(e=>new np(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=ws.getCancelAndContextArgs_("Query.once",r,i),u=new L.BH,h=(w,A)=>{const x=new np(this.database,w);t&&t.call(a.context,x,A),u.resolve(x)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),u.reject(w)};switch(e){case"value":b1(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":E2(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":D2(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":C2(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":I2(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ws(this.database,Ou(this._delegate,function v4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new y4(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ws(this.database,Ou(this._delegate,function b4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new w4(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ws(this.database,Ou(this._delegate,function C4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $b("orderByChild","path",n,!1),new E4(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ws(this.database,Ou(this._delegate,function D4(){return new I4}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ws(this.database,Ou(this._delegate,function A4(){return new T4}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ws(this.database,Ou(this._delegate,function x4(){return new S4}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ws(this.database,Ou(this._delegate,function g4(n=null,e){return Hb("startAt","key",e,!0),new S2(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ws(this.database,Ou(this._delegate,function _4(n,e){return Hb("startAfter","key",e,!0),new m4(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ws(this.database,Ou(this._delegate,function h4(n,e){return Hb("endAt","key",e,!0),new A2(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ws(this.database,Ou(this._delegate,function p4(n,e){return Hb("endBefore","key",e,!0),new f4(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ws(this.database,Ou(this._delegate,function R4(n,e){return Hb("equalTo","key",e,!0),new M4(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ws))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ma(this.database,new vl(this._delegate._repo,this._delegate._path))}}class Ma extends ws{constructor(e,t){super(e,new qo(t._repo,t._path,new DT,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ma(this.database,dm(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ma(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Ma(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=w1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,k2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yl("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=c4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function u4(n,e,t){if(yl("setWithPriority",n._path),Yc("setWithPriority",e,n._path,!1),d1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return f1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function a4(n){return yl("remove",n._path),w1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Z4(n,e,t){var r;if(n=(0,L.m9)(n),yl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,h=b1(n,()=>{});return function e4(n,e,t,r,i,a){Ny(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:AF(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=g1(n,e,void 0);u.currentInputSnapshot=h;const _=u.update(h.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{jb("transaction failed: Data returned ",_,u.path),u.status=0;const w=HT(n.transactionQueueTree_,e),A=um(w)||[];let x;A.push(u),l1(w,A),"object"==typeof _&&null!==_&&(0,L.r3)(_,".priority")?(x=(0,L.DV)(_,".priority"),(0,L.hu)(Bb(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(BT(n.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();const N=Gb(n),H=qr(_,x),q=s1(H,h,N);u.currentOutputSnapshotRaw=H,u.currentOutputSnapshotResolved=q,u.currentWriteId=WT(n);const fe=JP(n.serverSyncTree_,e,q,u.currentWriteId,u.applyLocally);xa(n.eventQueue_,e,fe),zT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,A)=>{let x=null;_?a.reject(_):(x=new cm(A,new vl(n._repo,n._path),_r),a.resolve(new z4(w,x)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new tq(a.committed,new np(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function l4(n,e){n=(0,L.m9)(n),yl("setPriority",n._path),d1("setPriority",e,!1);const t=new L.BH;return f1(n._repo,kr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function o4(n,e){n=(0,L.m9)(n),yl("push",n._path),Yc("push",e,n._path,!0);const t=u2(n._repo),r=mG(t),i=dm(n,r),a=dm(n,r);let u;return u=null!=e?w1(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ma(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Ma(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return yl("Reference.onDisconnect",this._delegate._path),new eq(new v2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class zb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:V4,forceLongPolling:U4}}useEmulator(e,t,r={}){!function P2(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ib(Ib.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new Ib(u)}!function k4(n,e,t,r){n.repoInfo_=new vP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Ma){const t=b2(this._delegate,e.toString());return new Ma(this,t)}{const t=w2(this._delegate,e);return new Ma(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=b2(this._delegate,e);return new Ma(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function B4(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),f2(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function j4(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function X6(n){n.persistentConnection_&&n.persistentConnection_.resume(l2)}(n._repo)}(this._delegate)}}zb.ServerValue={TIMESTAMP:function q4(){return G4}(),increment:n=>function W4(n){return{".sv":{increment:n}}}(n)};var rq=Object.freeze({__proto__:null,initStandalone:function nq({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){DF(t);const u=new ba.zt("auth-internal",new ba.H0("database-standalone"));return u.setComponent(new ba.wA("auth-internal",()=>r,"PRIVATE")),{instance:new zb(M2(n,u,void 0,e,a),n),namespace:i}}});const iq=zb.ServerValue;function N2(n){return null==n}function O2(n){return"function"==typeof n.set}function F2(n,e){return O2(e)?e:n.ref(e)}function L2(n,e){if(function oq(n){return"string"==typeof n}(n))return e.stringCase();if(O2(n))return e.firebaseCase();if(function aq(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Zb(n,e,t="on",r=ei.z){return new Ar.y(i=>{let a=null;return a=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,_t.U)(i=>{const{snapshot:a,prevKey:u}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:u,key:h}}),(0,rO.B)())}function V2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function cq(n,e){const{payload:t,prevKey:r,key:i}=e,a=V2(n,i),u=function uq(n,e){if(N2(e))return 0;{const t=V2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function U2(n){return(N2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function B2(n,e,t){return function lq(n,e,t){return Zb(n,"value","once",t).pipe(_n(r=>{const i=[dt(r)];return e.forEach(a=>i.push(Zb(n,a,"on",t))),(0,TR.T)(...i).pipe(mc(cq,[]))}),HC())}(n,e=U2(e),t)}function j2(n,e,t){const r=(e=U2(e)).map(i=>Zb(n,i,"on",t));return(0,TR.T)(...r)}function H2(n,e){return function(r,i){return L2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function pq(n){return function(t){return t?L2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function $2(n,e){return function(){return Zb(n,"value","on",e)}}!function sq(n){n.INTERNAL.registerComponent(new ba.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new zb(i,r)},"PUBLIC").setServiceProps({Reference:Ma,Query:ws,Database:zb,DataSnapshot:np,enableLogging:H4,INTERNAL:rq,ServerValue:iq}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.7")}(h_.Z);const _q=new d.OlP("angularfire2.realtimeDatabaseURL"),yq=new d.OlP("angularfire2.database.use-emulator");let vq=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x,N,H,q,fe,Ie){this.schedulers=h;const Xe=_,ct=(0,ti.on)(t,u,r);w&&JR(ct,u,A,N,H,q,x,fe),this.database=(0,ti.cc)(`${ct.name}.database.${i}`,"AngularFireDatabase",ct.name,()=>{const pt=u.runOutsideAngular(()=>ct.database(i||void 0));return Xe&&pt.useEmulator(...Xe),pt},[Xe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>F2(this.database,t));let a=i;return r&&(a=r(i)),function gq(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:H2(r,"update"),set:H2(r,"set"),push:i=>r.push(i),remove:pq(r),snapshotChanges:i=>B2(n,i,t).pipe(Lt.iC),stateChanges:i=>j2(n,i,t).pipe(Lt.iC),auditTrail:i=>function dq(n,e,t){return function fq(n,e,t){return function hq(n,e){return Zb(n,"value","on",e).pipe((0,_t.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function h3(...n){const e=(0,Ss.jO)(n);return(0,Xr.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Zi.Xf)(n[_]).subscribe((0,dr.x)(r,w=>{a[_]=w,!h&&!u[_]&&(u[_]=!0,(h=u.every(pc.y))&&(u=null))},Dc.Z));t.subscribe((0,dr.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,_t.U)(([i,a])=>{const u=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:u,loadedKeys:h}}),function f3(n){return(0,Xr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,dr.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,_t.U)(i=>i.actions))}(n,j2(n,e).pipe(mc((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Lt.iC),valueChanges:(i,a)=>B2(n,i,t).pipe((0,_t.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Lt.iC)}}(a,this)}object(t){return function mq(n,e){return{query:n,snapshotChanges:()=>$2(n,e.schedulers.outsideAngular)().pipe(Lt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>$2(n,e.schedulers.outsideAngular)().pipe(Lt.iC,(0,_t.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>F2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ti.Dh),d.LFG(ti.xv,8),d.LFG(_q,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Lt.HU),d.LFG(yq,8),d.LFG(oT,8),d.LFG(WR,8),d.LFG(zR,8),d.LFG(ZR,8),d.LFG(KR,8),d.LFG(YR,8),d.LFG(QR,8),d.LFG(pb,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wq=(()=>{class n{constructor(){sT.Z.registerVersion("angularfire",Lt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[vq]}),n})();const G2_firebaseConfig={apiKey:"AIzaSyCtxhX-sI3TXS0t0wfVNfpPgaF0Mroj1UY",authDomain:"simulacroparcial-d0614.firebaseapp.com",projectId:"simulacroparcial-d0614",storageBucket:"simulacroparcial-d0614.appspot.com",messagingSenderId:"380088006656",appId:"1:380088006656:web:c8116653e1b8fbd1f4c0e5"};let bq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[EH]}),n.\u0275inj=d.cJS({imports:[ti.hO.initializeApp(G2_firebaseConfig),kj,jj,d3,wq,td,wH,ov,vd,UC]}),n})();(0,d.G48)(),Zu().bootstrapModule(bq).catch(n=>console.error(n))},5867:(ht,oe,V)=>{"use strict";V.d(oe,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=V(9681);(0,d.registerVersion)("firebase","9.11.0","app")},127:(ht,oe,V)=>{"use strict";V.d(oe,{Z:()=>d.Z});var d=V(3942);d.Z.registerVersion("firebase","9.11.0","app-compat")},3704:(ht,oe,V)=>{"use strict";V.r(oe);var d=V(5861),B=V(3942),U=V(2090),ce=V(9681),de=V(1877),ye=V(655),ue=V(4859);const xe=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new de.Yd("@firebase/auth");function qe(y,...p){et.logLevel<=de.in.ERROR&&et.error(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}function Re(y,...p){throw Qe(y,...p)}function Se(y,...p){return Qe(y,...p)}function Me(y,p,m){const b=Object.assign(Object.assign({},ut()),{[p]:m});return new U.LL("auth","Firebase",b).create(p,{appName:y.name})}function Ye(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Re(y,"argument-error"),Me(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(y,...p){if("string"!=typeof y){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(m,...b)}return ge.create(y,...p)}function Z(y,p,...m){if(!y)throw Qe(p,...m)}function _e(y){const p="INTERNAL ASSERTION FAILED: "+y;throw qe(p),new Error(p)}function J(y,p){y||_e(p)}const re=new Map;function ae(y){J(y instanceof Function,"Expected a class definition");let p=re.get(y);return p?(J(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,re.set(y,p),p)}function Be(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function yt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(p,m){this.shortDelay=p,this.longDelay=m,J(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(y,p){J(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class sn{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pn=new nn(3e4,6e4);function xt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function on(y,p,m,b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(y,p,m,b,R={}){return si(y,R,(0,d.Z)(function*(){let F={},X={};b&&("GET"===p?X=b:F={body:JSON.stringify(b)});const we=(0,U.xO)(Object.assign({key:y.config.apiKey},X)).slice(1),Ze=yield y._getAdditionalHeaders();return Ze["Content-Type"]="application/json",y.languageCode&&(Ze["X-Firebase-Locale"]=y.languageCode),sn.fetch()(Yn(y,y.config.apiHost,m,we),Object.assign({method:p,headers:Ze,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function si(y,p,m){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,d.Z)(function*(y,p,m){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Kt),p);try{const R=new Qn(y),F=yield Promise.race([m(),R.promise]);R.clearNetworkTimeout();const X=yield F.json();if("needConfirmation"in X)throw vr(y,"account-exists-with-different-credential",X);if(F.ok&&!("errorMessage"in X))return X;{const we=F.ok?X.errorMessage:X.error.message,[Ze,at]=we.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw vr(y,"credential-already-in-use",X);if("EMAIL_EXISTS"===Ze)throw vr(y,"email-already-in-use",X);if("USER_DISABLED"===Ze)throw vr(y,"user-disabled",X);const Dt=b[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Me(y,Dt,at);Re(y,Dt)}}catch(R){if(R instanceof U.ZR)throw R;Re(y,"network-request-failed")}})).apply(this,arguments)}function Nr(y,p,m,b){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(y,p,m,b,R={}){const F=yield on(y,p,m,b,R);return"mfaPendingCredential"in F&&Re(y,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Yn(y,p,m,b){const R=`${p}${m}?${b}`;return y.config.emulator?Tn(y.config,R):`${y.config.apiScheme}://${R}`}class Qn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Se(this.auth,"network-request-failed")),pn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vr(y,p,m){const b={appName:y.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const R=Se(y,p,b);return R.customData._tokenResponse=m,R}function Ke(){return(Ke=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function zr(y,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hn(y,p){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Di(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Rn(){return(Rn=(0,d.Z)(function*(y,p=!1){const m=(0,U.m9)(y),b=yield m.getIdToken(p),R=Ue(b);Z(R&&R.exp&&R.auth_time&&R.iat,m.auth,"internal-error");const F="object"==typeof R.firebase?R.firebase:void 0,X=F?.sign_in_provider;return{claims:R,token:b,authTime:Di(wt(R.auth_time)),issuedAtTime:Di(wt(R.iat)),expirationTime:Di(wt(R.exp)),signInProvider:X||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(y){return 1e3*Number(y)}function Ue(y){var p;const[m,b,R]=y.split(".");if(void 0===m||void 0===b||void 0===R)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,U.tV)(b);return F?JSON.parse(F):(qe("Failed to decode base64 JWT payload"),null)}catch(F){return qe("Caught error parsing JWT payload as JSON",null===(p=F)||void 0===p?void 0:p.toString()),null}}function Jn(y,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof U.ZR&&Zr(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function Zr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Pt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const R=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,d.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(m=b)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Or{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Di(this.lastLoginAt),this.creationTime=Di(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(y){var p;const m=y.auth,b=yield y.getIdToken(),R=yield Jn(y,hn(m,{idToken:b}));Z(R?.users.length,m,"internal-error");const F=R.users[0];y._notifyReloadListener(F);const X=null!==(p=F.providerUserInfo)&&void 0!==p&&p.length?st(F.providerUserInfo):[],we=Kr(y.providerData,X),Dt=!!y.isAnonymous&&!(y.email&&F.passwordHash||we?.length),Tt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:we,metadata:new Or(F.createdAt,F.lastLoginAt),isAnonymous:Dt};Object.assign(y,Tt)})).apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(y){const p=(0,U.m9)(y);yield an(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Kr(y,p){return[...y.filter(b=>!p.some(R=>R.providerId===b.providerId)),...p]}function st(y){return y.map(p=>{var{providerId:m}=p,b=(0,ye._T)(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function lt(){return(lt=(0,d.Z)(function*(y,p){const m=yield si(y,{},(0,d.Z)(function*(){const b=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:R,apiKey:F}=y.config,X=Yn(y,R,"/v1/token",`key=${F}`),we=yield y._getAdditionalHeaders();return we["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(X,{method:"POST",headers:we,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Z(p.idToken,"internal-error"),Z(typeof p.idToken<"u","internal-error"),Z(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function vn(y){const p=Ue(y);return Z(p,"internal-error"),Z(typeof p.exp<"u","internal-error"),Z(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,d.Z)(function*(){return Z(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:F,expiresIn:X}=yield function Pe(y,p){return lt.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(R,F,Number(X))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:R,expirationTime:F}=m,X=new Et;return b&&(Z("string"==typeof b,"internal-error",{appName:p}),X.refreshToken=b),R&&(Z("string"==typeof R,"internal-error",{appName:p}),X.accessToken=R),F&&(Z("number"==typeof F,"internal-error",{appName:p}),X.expirationTime=F),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Et,this.toJSON())}_performRefresh(){return _e("not implemented")}}function At(y,p){Z("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class W{constructor(p){var{uid:m,auth:b,stsTokenManager:R}=p,F=(0,ye._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Or(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const b=yield Jn(m,m.stsTokenManager.getToken(m.auth,p));return Z(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function Wn(y){return Rn.apply(this,arguments)}(this,p)}reload(){return function ln(y){return ar.apply(this,arguments)}(this)}_assign(p){this!==p&&(Z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new W(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,d.Z)(function*(){let R=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),R=!0),m&&(yield an(b)),yield b.auth._persistUserIfCurrent(b),R&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield Jn(p,function kn(y,p){return Ke.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,R,F,X,we,Ze,at,Dt;const Tt=null!==(b=m.displayName)&&void 0!==b?b:void 0,Jr=null!==(R=m.email)&&void 0!==R?R:void 0,Ps=null!==(F=m.phoneNumber)&&void 0!==F?F:void 0,Uh=null!==(X=m.photoURL)&&void 0!==X?X:void 0,ov=null!==(we=m.tenantId)&&void 0!==we?we:void 0,vd=null!==(Ze=m._redirectEventId)&&void 0!==Ze?Ze:void 0,av=null!==(at=m.createdAt)&&void 0!==at?at:void 0,oE=null!==(Dt=m.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:lv,emailVerified:aE,isAnonymous:lE,providerData:Tm,stsTokenManager:Am}=m;Z(lv&&Am,p,"internal-error");const Sm=Et.fromJSON(this.name,Am);Z("string"==typeof lv,p,"internal-error"),At(Tt,p.name),At(Jr,p.name),Z("boolean"==typeof aE,p,"internal-error"),Z("boolean"==typeof lE,p,"internal-error"),At(Ps,p.name),At(Uh,p.name),At(ov,p.name),At(vd,p.name),At(av,p.name),At(oE,p.name);const dt=new W({uid:lv,auth:p,email:Jr,emailVerified:aE,displayName:Tt,isAnonymous:lE,photoURL:Uh,phoneNumber:Ps,tenantId:ov,stsTokenManager:Sm,createdAt:av,lastLoginAt:oE});return Tm&&Array.isArray(Tm)&&(dt.providerData=Tm.map(Vo=>Object.assign({},Vo))),vd&&(dt._redirectEventId=vd),dt}static _fromIdTokenResponse(p,m,b=!1){return(0,d.Z)(function*(){const R=new Et;R.updateFromServerResponse(m);const F=new W({uid:m.localId,auth:p,stsTokenManager:R,isAnonymous:b});return yield an(F),F})()}}const ee=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,b){var R=this;return(0,d.Z)(function*(){R.storage[m]=b})()}_get(m){var b=this;return(0,d.Z)(function*(){const R=b.storage[m];return void 0===R?null:R})()}_remove(m){var b=this;return(0,d.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return y.type="NONE",y})();function Ae(y,p,m){return`firebase:${y}:${p}:${m}`}class le{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:R,name:F}=this.auth;this.fullUserKey=Ae(this.userKey,R.apiKey,F),this.fullPersistenceKey=Ae("persistence",R.apiKey,F),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?W._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,d.Z)(function*(){if(!m.length)return new le(ae(ee),p,b);const R=(yield Promise.all(m.map(function(){var at=(0,d.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return at.apply(this,arguments)}}()))).filter(at=>at);let F=R[0]||ae(ee);const X=Ae(b,p.config.apiKey,p.name);let we=null;for(const at of m)try{const Dt=yield at._get(X);if(Dt){const Tt=W._fromJSON(p,Dt);at!==F&&(we=Tt),F=at;break}}catch{}const Ze=R.filter(at=>at._shouldAllowMigration);return F._shouldAllowMigration&&Ze.length?(F=Ze[0],we&&(yield F._set(X,we.toJSON())),yield Promise.all(m.map(function(){var at=(0,d.Z)(function*(Dt){if(Dt!==F)try{yield Dt._remove(X)}catch{}});return function(Dt){return at.apply(this,arguments)}}())),new le(F,p,b)):new le(F,p,b)})()}}function Ge(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(wn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(vt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Fe(p))return"Blackberry";if(mt(p))return"Webos";if($t(p))return"Safari";if((p.includes("chrome/")||Hn(p))&&!p.includes("edge/"))return"Chrome";if(bn(p))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function vt(y=(0,U.z$)()){return/firefox\//i.test(y)}function $t(y=(0,U.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Hn(y=(0,U.z$)()){return/crios\//i.test(y)}function wn(y=(0,U.z$)()){return/iemobile/i.test(y)}function bn(y=(0,U.z$)()){return/android/i.test(y)}function Fe(y=(0,U.z$)()){return/blackberry/i.test(y)}function mt(y=(0,U.z$)()){return/webos/i.test(y)}function en(y=(0,U.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function bs(y=(0,U.z$)()){return en(y)||bn(y)||mt(y)||Fe(y)||/windows phone/i.test(y)||wn(y)}function zn(y,p=[]){let m;switch(y){case"Browser":m=Ge((0,U.z$)());break;case"Worker":m=`${Ge((0,U.z$)())}-${y}`;break;default:m=y}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ce.SDK_VERSION}/${b}`}class yo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const b=F=>new Promise((X,we)=>{try{X(p(F))}catch(Ze){we(Ze)}});b.onAbort=m,this.queue.push(b);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){var b;if(m.auth.currentUser===p)return;const R=[];try{for(const F of m.queue)yield F(p),F.onAbort&&R.push(F.onAbort)}catch(F){R.reverse();for(const X of R)try{X()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=F)||void 0===b?void 0:b.message})}})()}}class Ht{constructor(p,m,b){this.app=p,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Es(this),this.idTokenSubscription=new Es(this),this.beforeStateQueue=new yo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=ae(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R,F;if(!b._deleted&&(b.persistenceManager=yield le.create(b,p),!b._deleted)){if(null!==(R=b._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(F=b.currentUser)||void 0===F?void 0:F.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var b;const R=yield m.assertedPersistence.getCurrentUser();let F=R,X=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const we=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Ze=F?._redirectEventId,at=yield m.tryRedirectSignIn(p);(!we||we===Ze)&&at?.user&&(F=at.user,X=!0)}if(!F)return m.directlySetCurrentUser(null);if(!F._redirectEventId){if(X)try{yield m.beforeStateQueue.runMiddleware(F)}catch(we){F=R,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(we))}return F?m.reloadAndSetCurrentUserOrClear(F):m.directlySetCurrentUser(null)}return Z(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===F._redirectEventId?m.directlySetCurrentUser(F):m.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){var b;try{yield an(p)}catch(R){if("auth/network-request-failed"!==(null===(b=R)||void 0===b?void 0:b.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function nt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const b=p?(0,U.m9)(p):null;return b&&Z(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p,m=!1){var b=this;return(0,d.Z)(function*(){if(!b._deleted)return p&&Z(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,d.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ae(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,d.Z)(function*(){const R=yield b.getOrInitRedirectPersistenceManager(m);return null===p?R.removeCurrentUser():R.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&ae(p)||m._popupRedirectResolver;Z(b,m,"argument-error"),m.redirectPersistenceManager=yield le.create(m,[ae(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var b,R;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(R=m.redirectUser)||void 0===R?void 0:R._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,R){if(this._deleted)return()=>{};const F="function"==typeof m?m:m.next.bind(m),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Z(X,this,"internal-error"),X.then(()=>F(this.currentUser)),"function"==typeof m?p.addObserver(m,b,R):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const R=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return R&&(b["X-Firebase-Client"]=R),b})()}}function Nn(y){return(0,U.m9)(y)}class Es{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $i(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function ss(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class br{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return _e("not implemented")}_getIdTokenResponse(p){return _e("not implemented")}_linkToIdToken(p,m){return _e("not implemented")}_getReauthenticationResolver(p){return _e("not implemented")}}function rr(y,p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:resetPassword",xt(y,p))})).apply(this,arguments)}function un(y,p){return wl.apply(this,arguments)}function wl(){return(wl=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bl(y,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:update",xt(y,p))})).apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithPassword",xt(y,p))})).apply(this,arguments)}function os(y,p){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:sendOobCode",xt(y,p))})).apply(this,arguments)}function Xn(y,p){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(y,p){return os(y,p)})).apply(this,arguments)}function lr(y,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(y,p){return os(y,p)})).apply(this,arguments)}function Pa(y,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(y,p){return os(y,p)})).apply(this,arguments)}function ka(y,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(y,p){return os(y,p)})).apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,p))})).apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,p))})).apply(this,arguments)}class Tl extends br{constructor(p,m,b,R=null){super("password",b),this._email=p,this._password=m,this._tenantId=R}static _fromEmailAndPassword(p,m){return new Tl(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new Tl(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function zo(y,p){return ai.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Cl(y,p){return Il.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Re(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,d.Z)(function*(){switch(b.signInMethod){case"password":return un(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Qc(y,p){return Dl.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:Re(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ur(y,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithIdp",xt(y,p))})).apply(this,arguments)}class li extends br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new li(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Re("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:R}=m,F=(0,ye._T)(m,["providerId","signInMethod"]);if(!b||!R)return null;const X=new li(b,R);return X.idToken=F.idToken||void 0,X.accessToken=F.accessToken||void 0,X.secret=F.secret,X.nonce=F.nonce,X.pendingToken=F.pendingToken||null,X}_getIdTokenResponse(p){return ur(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,ur(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ur(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function dh(y,p){return vo.apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:sendVerificationCode",xt(y,p))})).apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,p))})).apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(y,p){const m=yield Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,p));if(m.temporaryProof)throw vr(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const fh={USER_NOT_FOUND:"user-not-found"};function Vu(){return(Vu=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),fh)})).apply(this,arguments)}class Ds extends br{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Ds({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Ds({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Al(y,p){return Is.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function hh(y,p){return Na.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ph(y,p){return Vu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:R}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:R}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:R,temporaryProof:F}=p;return b||m||R||F?new Ds({verificationId:m,verificationCode:b,phoneNumber:R,temporaryProof:F}):null}}class Oa{constructor(p){var m,b,R,F,X,we;const Ze=(0,U.zd)((0,U.pd)(p)),at=null!==(m=Ze.apiKey)&&void 0!==m?m:null,Dt=null!==(b=Ze.oobCode)&&void 0!==b?b:null,Tt=function Uu(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Ze.mode)&&void 0!==R?R:null);Z(at&&Dt&&Tt,"argument-error"),this.apiKey=at,this.operation=Tt,this.code=Dt,this.continueUrl=null!==(F=Ze.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(X=Ze.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(we=Ze.tenantId)&&void 0!==we?we:null}static parseLink(p){const m=function Sl(y){const p=(0,U.zd)((0,U.pd)(y)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,b=(0,U.zd)((0,U.pd)(y)).deep_link_id;return(b?(0,U.zd)((0,U.pd)(b)).link:null)||b||m||p||y}(p);try{return new Oa(m)}catch{return null}}}let qi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,b){return Tl._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const R=Oa.parseLink(b);return Z(R,"argument-error"),Tl._fromEmailAndCode(m,R.code,R.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class as{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ls extends as{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ai extends ls{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Z("providerId"in m&&"signInMethod"in m,"argument-error"),li._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Z(p.idToken||p.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ai.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ai.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:R,pendingToken:F,nonce:X,providerId:we}=p;if(!b&&!R&&!m&&!F||!we)return null;try{return new Ai(we)._credential({idToken:m,accessToken:b,nonce:X,pendingToken:F})}catch{return null}}}let Zo=(()=>{class y extends ls{constructor(){super("facebook.com")}static credential(m){return li._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),La=(()=>{class y extends ls{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return li._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:R}=m;if(!b&&!R)return null;try{return y.credential(b,R)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xl=(()=>{class y extends ls{constructor(){super("github.com")}static credential(m){return li._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class wo extends br{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ur(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,ur(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ur(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:R,pendingToken:F}=m;return b&&R&&F&&b===R?new wo(b,F):null}static _create(p,m){return new wo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gi extends as{constructor(p){Z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return gi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return gi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=wo.fromJSON(p);return Z(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:b}=p;if(!m||!b)return null;try{return wo._create(b,m)}catch{return null}}}let ui=(()=>{class y extends ls{constructor(){super("twitter.com")}static credential(m,b){return li._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:R}=m;if(!b||!R)return null;try{return y.credential(b,R)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function bo(y,p){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signUp",xt(y,p))})).apply(this,arguments)}class Tr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,R=!1){return(0,d.Z)(function*(){const F=yield W._fromIdTokenResponse(p,b,R),X=Jc(b);return new Tr({user:F,providerId:X,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const R=Jc(b);return new Tr({user:p,providerId:R,_tokenResponse:b,operationType:m})})()}}function Jc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Dn(){return(Dn=(0,d.Z)(function*(y){var p;const m=Nn(y);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Tr({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield bo(m,{returnSecureToken:!0}),R=yield Tr._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class Va extends U.ZR{constructor(p,m,b,R){var F;super(m.code,m.message),this.operationType=b,this.user=R,Object.setPrototypeOf(this,Va.prototype),this.customData={appName:p.name,tenantId:null!==(F=p.tenantId)&&void 0!==F?F:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,m,b,R){return new Va(p,m,b,R)}}function ed(y,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Va._fromErrorAndOperation(y,F,p,b):F})}function mi(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Ko(){return(Ko=(0,d.Z)(function*(y,p){const m=(0,U.m9)(y);yield rn(!0,m,p);const{providerUserInfo:b}=yield zr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),R=mi(b||[]);return m.providerData=m.providerData.filter(F=>R.has(F.providerId)),R.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function us(y,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(y,p,m=!1){const b=yield Jn(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return Tr._forOperation(y,"link",b)})).apply(this,arguments)}function rn(y,p,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(y,p,m){yield an(p);const R=!1===y?"provider-already-linked":"no-such-provider";Z(mi(p.providerData).has(m)===y,p.auth,R)})).apply(this,arguments)}function $s(y,p){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(y,p,m=!1){var b;const{auth:R}=y,F="reauthenticate";try{const X=yield Jn(y,ed(R,F,p,y),m);Z(X.idToken,R,"internal-error");const we=Ue(X.idToken);Z(we,R,"internal-error");const{sub:Ze}=we;return Z(y.uid===Ze,R,"user-mismatch"),Tr._forOperation(y,F,X)}catch(X){throw"auth/user-not-found"===(null===(b=X)||void 0===b?void 0:b.code)&&Re(R,"user-mismatch"),X}})).apply(this,arguments)}function Si(y,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(y,p,m=!1){const b="signIn",R=yield ed(y,b,p),F=yield Tr._fromIdTokenResponse(y,b,R);return m||(yield y._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Gn(y,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(y,p){return Si(Nn(y),p)})).apply(this,arguments)}function Eo(y,p){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,d.Z)(function*(y,p){const m=(0,U.m9)(y);return yield rn(!1,m,p.providerId),us(m,p)})).apply(this,arguments)}function ds(y,p){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(y,p){return $s((0,U.m9)(y),p)})).apply(this,arguments)}function Ml(y,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithCustomToken",xt(y,p))})).apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(y,p){const m=Nn(y),b=yield Ml(m,{token:p,returnSecureToken:!0}),R=yield Tr._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class ke{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Yt._fromServerResponse(p,m):Re(p,"internal-error")}}class Yt extends ke{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Yt(m)}}function $a(y,p,m){var b;Z((null===(b=m.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),Z(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Z(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Z(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function On(){return(On=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y),R={requestType:"PASSWORD_RESET",email:p};m&&$a(b,R,m),yield lr(b,R)})).apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(y,p,m){yield rr((0,U.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(y,p){yield bl((0,U.m9)(y),{oobCode:p})})).apply(this,arguments)}function Io(y,p){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,d.Z)(function*(y,p){const m=(0,U.m9)(y),b=yield rr(m,{oobCode:p}),R=b.requestType;switch(Z(R,m,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(b.mfaInfo,m,"internal-error");default:Z(b.email,m,"internal-error")}let F=null;return b.mfaInfo&&(F=ke._fromServerResponse(Nn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:F},operation:R}})).apply(this,arguments)}function kl(){return(kl=(0,d.Z)(function*(y,p){const{data:m}=yield Io((0,U.m9)(y),p);return m.email})).apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(y,p,m){const b=Nn(y),R=yield bo(b,{returnSecureToken:!0,email:p,password:m}),F=yield Tr._fromIdTokenResponse(b,"signIn",R);return yield b._updateCurrentUser(F.user),F})).apply(this,arguments)}function Gs(){return(Gs=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y),R={requestType:"EMAIL_SIGNIN",email:p};Z(m.handleCodeInApp,b,"argument-error"),m&&$a(b,R,m),yield Pa(b,R)})).apply(this,arguments)}function ea(){return(ea=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y),R=qi.credentialWithLink(p,m||Be());return Z(R._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Gn(b,R)})).apply(this,arguments)}function mh(y,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:createAuthUri",xt(y,p))})).apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(y,p){const b={identifier:p,continueUri:yt()?Be():"http://localhost"},{signinMethods:R}=yield mh((0,U.m9)(y),b);return R||[]})).apply(this,arguments)}function ra(){return(ra=(0,d.Z)(function*(y,p){const m=(0,U.m9)(y),R={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&$a(m.auth,R,p);const{email:F}=yield Xn(m.auth,R);F!==y.email&&(yield y.reload())})).apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&$a(b.auth,F,m);const{email:X}=yield ka(b.auth,F);X!==y.email&&(yield y.reload())})).apply(this,arguments)}function sa(y,p){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,d.Z)(function*(y,p){return on(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,U.m9)(y),F={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},X=yield Jn(b,sa(b.auth,F));b.displayName=X.displayName||null,b.photoURL=X.photoUrl||null;const we=b.providerData.find(({providerId:Ze})=>"password"===Ze);we&&(we.displayName=b.displayName,we.photoURL=b.photoURL),yield b._updateTokensIfNecessary(X)})).apply(this,arguments)}function qs(y,p,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(y,p,m){const{auth:b}=y,F={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(F.email=p),m&&(F.password=m);const X=yield Jn(y,un(b,F));yield y._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class ci{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class An extends ci{constructor(p,m,b,R){super(p,m,b),this.username=R}}class Hl extends ci{constructor(p,m){super(p,"facebook.com",m)}}class $l extends An{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class $u extends ci{constructor(p,m){super(p,"google.com",m)}}class Gl extends An{constructor(p,m,b){super(p,"twitter.com",m,b)}}function Wa(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function cr(y){var p,m;if(!y)return null;const{providerId:b}=y,R=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},F=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&y?.idToken){const X=null===(m=null===(p=Ue(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(X)return new ci(F,"anonymous"!==X&&"custom"!==X?X:null)}if(!b)return null;switch(b){case"facebook.com":return new Hl(F,R);case"github.com":return new $l(F,R);case"google.com":return new $u(F,R);case"twitter.com":return new Gl(F,R,y.screenName||null);case"custom":case"anonymous":return new ci(F,null);default:return new ci(F,b,R)}}(m)}class zs{constructor(p,m,b){this.type=p,this.credential=m,this.auth=b}static _fromIdtoken(p,m){return new zs("enroll",p,m)}static _fromMfaPendingCredential(p){return new zs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return zs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return zs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class oa{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=Nn(p),R=m.customData._serverResponse,F=(R.mfaInfo||[]).map(we=>ke._fromServerResponse(b,we));Z(R.mfaPendingCredential,b,"internal-error");const X=zs._fromMfaPendingCredential(R.mfaPendingCredential);return new oa(X,F,function(){var we=(0,d.Z)(function*(Ze){const at=yield Ze._process(b,X);delete R.mfaInfo,delete R.mfaPendingCredential;const Dt=Object.assign(Object.assign({},R),{idToken:at.idToken,refreshToken:at.refreshToken});switch(m.operationType){case"signIn":const Tt=yield Tr._fromIdTokenResponse(b,m.operationType,Dt);return yield b._updateCurrentUser(Tt.user),Tt;case"reauthenticate":return Z(m.user,b,"internal-error"),Tr._forOperation(m.user,m.operationType,Dt);default:Re(b,"internal-error")}});return function(Ze){return we.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function Za(y,p){return on(y,"POST","/v2/accounts/mfaEnrollment:start",xt(y,p))}class Ao{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>ke._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Ao(p)}getSession(){var p=this;return(0,d.Z)(function*(){return zs._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var b=this;return(0,d.Z)(function*(){const R=p,F=yield b.getSession(),X=yield Jn(b.user,R._process(b.user.auth,F,m));return yield b.user._updateTokensIfNecessary(X),b.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){var b;const R="string"==typeof p?p:p.uid,F=yield m.user.getIdToken(),X=yield Jn(m.user,function xi(y,p){return on(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(y,p))}(m.user.auth,{idToken:F,mfaEnrollmentId:R}));m.enrolledFactors=m.enrolledFactors.filter(({uid:we})=>we!==R),yield m.user._updateTokensIfNecessary(X);try{yield m.user.reload()}catch(we){if("auth/user-token-expired"!==(null===(b=we)||void 0===b?void 0:b.code))throw we}})()}}const So=new WeakMap,Zs="__sak";class Ya{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const C=(()=>{class y extends Ya{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function aa(){const y=(0,U.z$)();return $t(y)||en(y)}()&&function In(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=bs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const R=this.storage.getItem(b),F=this.localCache[b];R!==F&&m(b,F,R)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((we,Ze,at)=>{this.notifyListeners(we,at)});const R=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const we=this.storage.getItem(R);if(m.newValue!==we)null!==m.newValue?this.storage.setItem(R,m.newValue):this.storage.removeItem(R);else if(this.localCache[R]===m.newValue&&!b)return}const F=()=>{const we=this.storage.getItem(R);!b&&this.localCache[R]===we||this.notifyListeners(R,we)},X=this.storage.getItem(R);!function $n(){return(0,U.w1)()&&10===document.documentMode}()||X===m.newValue||m.newValue===m.oldValue?F():setTimeout(F,10)}notifyListeners(m,b){this.localCache[m]=b;const R=this.listeners[m];if(R)for(const F of Array.from(R))F(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var R=()=>super._set,F=this;return(0,d.Z)(function*(){yield R().call(F,m,b),F.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,R=this;return(0,d.Z)(function*(){const F=yield b().call(R,m);return R.localCache[m]=JSON.stringify(F),F})()}_remove(m){var b=()=>super._remove,R=this;return(0,d.Z)(function*(){yield b().call(R,m),delete R.localCache[m]})()}}return y.type="LOCAL",y})(),P=(()=>{class y extends Ya{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return y.type="SESSION",y})();let De=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(F=>F.isListeningto(m));if(b)return b;const R=new y(m);return this.receivers.push(R),R}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,d.Z)(function*(){const R=m,{eventId:F,eventType:X,data:we}=R.data,Ze=b.handlersMap[X];if(!Ze?.size)return;R.ports[0].postMessage({status:"ack",eventId:F,eventType:X});const at=Array.from(Ze).map(function(){var Tt=(0,d.Z)(function*(Jr){return Jr(R.origin,we)});return function(Jr){return Tt.apply(this,arguments)}}()),Dt=yield function G(y){return Promise.all(y.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}(at);R.ports[0].postMessage({status:"done",eventId:F,eventType:X,response:Dt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ot(y="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return y+m}class Ln{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var R=this;return(0,d.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let X,we;return new Promise((Ze,at)=>{const Dt=ot("",20);F.port1.start();const Tt=setTimeout(()=>{at(new Error("unsupported_event"))},b);we={messageChannel:F,onMessage(Jr){const Ps=Jr;if(Ps.data.eventId===Dt)switch(Ps.data.status){case"ack":clearTimeout(Tt),X=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Ze(Ps.data.response);break;default:clearTimeout(Tt),clearTimeout(X),at(new Error("invalid_response"))}}},R.handlers.add(we),F.port1.addEventListener("message",we.onMessage),R.target.postMessage({eventType:p,eventId:Dt,data:m},[F.port2])}).finally(()=>{we&&R.removeMessageHandler(we)})})()}}function gn(){return window}function ps(){return typeof gn().WorkerGlobalScope<"u"&&"function"==typeof gn().importScripts}function zl(){return(zl=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Mo="firebaseLocalStorageDb",Ro="firebaseLocalStorage",td="fbase_key";class la{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Zl(y,p){return y.transaction([Ro],p?"readwrite":"readonly").objectStore(Ro)}function Qa(){const y=indexedDB.open(Mo,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Ro,{keyPath:td})}catch(R){m(R)}}),y.addEventListener("success",(0,d.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Ro)?p(b):(b.close(),yield function yh(){const y=indexedDB.deleteDatabase(Mo);return new la(y).toPromise()}(),p(yield Qa()))}))})}function Ks(y,p,m){return nd.apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(y,p,m){const b=Zl(y,!0).put({[td]:p,value:m});return new la(b).toPromise()})).apply(this,arguments)}function Kl(){return(Kl=(0,d.Z)(function*(y,p){const m=Zl(y,!1).get(p),b=yield new la(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function ua(y,p){const m=Zl(y,!0).delete(p);return new la(m).toPromise()}const Ja=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Qa()),m.db})()}_withRetries(m){var b=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const F=yield b._openDb();return yield m(F)}catch(F){if(R++>3)throw F;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return ps()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=De._getInstance(function Zu(){return ps()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,d.Z)(function*(R,F){return{keyProcessed:(yield m._poll()).includes(F.key)}});return function(R,F){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,d.Z)(function*(R,F){return["keyChanged"]});return function(R,F){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var b,R;if(m.activeServiceWorker=yield function gs(){return zl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ln(m.activeServiceWorker);const F=yield m.sender._send("ping",{},800);!F||(null===(b=F[0])||void 0===b?void 0:b.fulfilled)&&(null===(R=F[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,d.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function zu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Qa();return yield Ks(m,Zs,"1"),yield ua(m,Zs),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,d.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(F=>Ks(F,m,b)),R.localCache[m]=b,R.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,d.Z)(function*(){const R=yield b._withRetries(F=>function Ku(y,p){return Kl.apply(this,arguments)}(F,m));return b.localCache[m]=R,R})()}_remove(m){var b=this;return(0,d.Z)(function*(){return b._withPendingWrite((0,d.Z)(function*(){return yield b._withRetries(R=>ua(R,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const b=yield m._withRetries(X=>{const we=Zl(X,!1).getAll();return new la(we).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const R=[],F=new Set;for(const{fbase_key:X,value:we}of b)F.add(X),JSON.stringify(m.localCache[X])!==JSON.stringify(we)&&(m.notifyListeners(X,we),R.push(X));for(const X of Object.keys(m.localCache))m.localCache[X]&&!F.has(X)&&(m.notifyListeners(X,null),R.push(X));return R})()}notifyListeners(m,b){this.localCache[m]=b;const R=this.listeners[m];if(R)for(const F of Array.from(R))F(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Xa(y,p){return on(y,"POST","/v2/accounts/mfaSignIn:start",xt(y,p))}function Po(){return(Po=(0,d.Z)(function*(y){return(yield on(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tl(y){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=p,b.onerror=R=>{const F=Se("internal-error");F.customData=R,m(F)},b.type="text/javascript",b.charset="UTF-8",function el(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(b)})}function Ju(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Yl=1e12;class Vn{constructor(p){this.auth=p,this.counter=Yl,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new hm(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||Yl;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Yl))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var b;return null===(b=m._widgets.get(p||Yl))||void 0===b||b.execute(),""})()}}class hm{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof p?document.getElementById(p):p;Z(R,"argument-error",{appName:m}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fy(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fm=Ju("rcb"),Ly=new nn(3e4,6e4);class rp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=gn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return Z(function Kb(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((b,R)=>{const F=gn().setTimeout(()=>{R(Se(p,"network-request-failed"))},Ly.get());gn()[fm]=()=>{gn().clearTimeout(F),delete gn()[fm];const we=gn().grecaptcha;if(!we)return void R(Se(p,"internal-error"));const Ze=we.render;we.render=(at,Dt)=>{const Tt=Ze(at,Dt);return this.counter++,Tt},this.hostLanguage=m,b(we)},tl(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:fm,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(F),R(Se(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=gn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class id{load(p){return(0,d.Z)(function*(){return new Vn(p)})()}clearedOneInstance(){}}const Uy="recaptcha",By={theme:"light",type:"image"};class Vr{constructor(p,m=Object.assign({},By),b){this.parameters=m,this.type=Uy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(b),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof p?document.getElementById(p):p;Z(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new id:new rp,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(F=>{const X=we=>{!we||(p.tokenChangeListeners.delete(X),F(we))};p.tokenChangeListeners.add(X),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=gn()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){Z(yt()&&!ps(),p.auth,"internal-error"),yield function mn(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Mi(y){return Po.apply(this,arguments)}(p.auth);Z(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ar{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Ds._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Xu(){return(Xu=(0,d.Z)(function*(y,p,m){const b=Nn(y),R=yield Zi(b,p,(0,U.m9)(m));return new Ar(R,F=>Gn(b,F))})).apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y);yield rn(!1,b,"phone");const R=yield Zi(b.auth,p,(0,U.m9)(m));return new Ar(R,F=>Eo(b,F))})).apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y),R=yield Zi(b.auth,p,(0,U.m9)(m));return new Ar(R,F=>ds(b,F))})).apply(this,arguments)}function Zi(y,p,m){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(y,p,m){var b;const R=yield m.verify();try{let F;if(Z("string"==typeof R,y,"argument-error"),Z(m.type===Uy,y,"argument-error"),F="string"==typeof p?{phoneNumber:p}:p,"session"in F){const X=F.session;if("phoneNumber"in F)return Z("enroll"===X.type,y,"internal-error"),(yield Za(y,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{Z("signin"===X.type,y,"internal-error");const we=(null===(b=F.multiFactorHint)||void 0===b?void 0:b.uid)||F.multiFactorUid;return Z(we,y,"missing-multi-factor-info"),(yield Xa(y,{mfaPendingCredential:X.credential,mfaEnrollmentId:we,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield dh(y,{phoneNumber:F.phoneNumber,recaptchaToken:R});return X}}finally{m._reset()}})).apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(y,p){yield us((0,U.m9)(y),p)})).apply(this,arguments)}let ec=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Nn(m)}verifyPhoneNumber(m,b){return Zi(this.auth,m,(0,U.m9)(b))}static credential(m,b){return Ds._fromVerification(m,b)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:R}=m;return b&&R?Ds._fromTokenResponse(b,R):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function da(y,p){return p?ae(p):(Z(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ql extends br{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ur(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ur(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ur(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function wi(y){return Si(y.auth,new Ql(y),y.bypassAuthState)}function Jl(y){const{auth:p,user:m}=y;return Z(m,p,"internal-error"),$s(m,new Ql(y),y.bypassAuthState)}function Qs(y){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y){const{auth:p,user:m}=y;return Z(m,p,"internal-error"),us(m,new Ql(y),y.bypassAuthState)})).apply(this,arguments)}class bi{constructor(p,m,b,R,F=!1){this.auth=p,this.resolver=b,this.user=R,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(b,R){p.pendingPromise={resolve:b,reject:R};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(F){p.reject(F)}});return function(b,R){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:b,sessionId:R,postBody:F,tenantId:X,error:we,type:Ze}=p;if(we)return void m.reject(we);const at={auth:m.auth,requestUri:b,sessionId:R,tenantId:X||void 0,postBody:F||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ze)(at))}catch(Dt){m.reject(Dt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return wi;case"linkViaPopup":case"linkViaRedirect":return Qs;case"reauthViaPopup":case"reauthViaRedirect":return Jl;default:Re(this.auth,"internal-error")}}resolve(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const od=new nn(2e3,1e4);function Xl(){return(Xl=(0,d.Z)(function*(y,p,m){const b=Nn(y);Ye(y,p,as);const R=da(b,m);return new Pi(b,"signInViaPopup",p,R).executeNotNull()})).apply(this,arguments)}function vh(){return(vh=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y);Ye(b.auth,p,as);const R=da(b.auth,m);return new Pi(b.auth,"reauthViaPopup",p,R,b).executeNotNull()})).apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y);Ye(b.auth,p,as);const R=da(b.auth,m);return new Pi(b.auth,"linkViaPopup",p,R,b).executeNotNull()})).apply(this,arguments)}let Pi=(()=>{class y extends bi{constructor(m,b,R,F,X){super(m,b,F,X),this.provider=R,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const b=yield m.execute();return Z(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,d.Z)(function*(){J(1===m.filter.length,"Popup operations only handle one event");const b=ot();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(R=>{m.reject(R)}),m.resolver._isIframeWebStorageSupported(m.auth,R=>{R||m.reject(Se(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,R;this.pollId=null!==(R=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,od.get())};m()}}return y.currentPopupAction=null,y})();const Un=new Map;class Ms extends bi{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let b=Un.get(m.auth._key());if(!b){try{const F=(yield function nc(y,p){return ko.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(F)}catch(R){b=()=>Promise.reject(R)}Un.set(m.auth._key(),b)}return m.bypassAuthState||Un.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const R=yield b.auth._redirectUserForId(p.eventId);if(R)return b.user=R,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ko(){return(ko=(0,d.Z)(function*(y,p){const m=ld(p),b=Js(y);if(!(yield b._isAvailable()))return!1;const R="true"===(yield b._get(m));return yield b._remove(m),R})).apply(this,arguments)}function rc(y,p){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(y,p){return Js(y)._set(ld(p),"true")})).apply(this,arguments)}function ha(y,p){Un.set(y._key(),p)}function Js(y){return ae(y._redirectPersistence)}function ld(y){return Ae("pendingRedirect",y.config.apiKey,y.name)}function T(){return(T=(0,d.Z)(function*(y,p,m){const b=Nn(y);Ye(y,p,as);const R=da(b,m);return yield rc(R,b),R._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function $(){return($=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y);Ye(b.auth,p,as);const R=da(b.auth,m);yield rc(R,b.auth);const F=yield Ct(b);return R._openRedirect(b.auth,p,"reauthViaRedirect",F)})).apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(y,p,m){const b=(0,U.m9)(y);Ye(b.auth,p,as);const R=da(b.auth,m);yield rn(!1,b,p.providerId),yield rc(R,b.auth);const F=yield Ct(b);return R._openRedirect(b.auth,p,"linkViaRedirect",F)})).apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(y,p){return yield Nn(y)._initializationPromise,Mt(y,p,!1)})).apply(this,arguments)}function Mt(y,p){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(y,p,m=!1){const b=Nn(y),R=da(b,p),X=yield new Ms(b,R,m).execute();return X&&!m&&(delete X.user._redirectEventId,yield b._persistUserIfCurrent(X.user),yield b._setRedirectUser(null,p)),X})).apply(this,arguments)}function Ct(y){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(y){const p=ot(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class No{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function fa(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oo(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!Oo(p)){const R=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Se(this.auth,R))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xs(p))}saveEventToCache(p){this.cachedEventUids.add(Xs(p)),this.lastProcessedEventTime=Date.now()}}function Xs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Oo({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function eo(y){return sr.apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*(y,p={}){return on(y,"GET","/v1/projects",p)})).apply(this,arguments)}const ki=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fo=/^https?/;function jy(){return(jy=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield eo(y);for(const m of p)try{if(bh(m))return}catch{}Re(y,"unauthorized-domain")})).apply(this,arguments)}function bh(y){const p=Be(),{protocol:m,hostname:b}=new URL(p);if(y.startsWith("chrome-extension://")){const X=new URL(y);return""===X.hostname&&""===b?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&X.hostname===b}if(!Fo.test(m))return!1;if(ki.test(y))return b===y;const R=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(b)}const Eh=new nn(3e4,6e4);function Ch(){const y=gn().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let ud=null;function op(y){return ud=ud||function nu(y){return new Promise((p,m)=>{var b,R,F;function X(){Ch(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ch(),m(Se(y,"network-request-failed"))},timeout:Eh.get()})}if(null!==(R=null===(b=gn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==R&&R.Iframe)p(gapi.iframes.getContext());else{if(null===(F=gn().gapi)||void 0===F||!F.load){const we=Ju("iframefcb");return gn()[we]=()=>{gapi.load?X():m(Se(y,"network-request-failed"))},tl(`https://apis.google.com/js/api.js?onload=${we}`).catch(Ze=>m(Ze))}X()}}).catch(p=>{throw ud=null,p})}(y),ud}const gm=new nn(5e3,15e3),XT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yb(y){const p=y.config;Z(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?Tn(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:y.name,v:ce.SDK_VERSION},R=mm.get(y.config.apiHost);R&&(b.eid=R);const F=y._getFrameworks();return F.length&&(b.fw=F.join(",")),`${m}?${(0,U.xO)(b).slice(1)}`}function cd(){return cd=(0,d.Z)(function*(y){const p=yield op(y),m=gn().gapi;return Z(m,y,"internal-error"),p.open({where:document.body,url:Yb(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XT,dontclear:!0},b=>new Promise(function(){var R=(0,d.Z)(function*(F,X){yield b.restyle({setHideOnLeave:!1});const we=Se(y,"network-request-failed"),Ze=gn().setTimeout(()=>{X(we)},gm.get());function at(){gn().clearTimeout(Ze),F(b)}b.ping(at).then(at,()=>{X(we)})});return function(F,X){return R.apply(this,arguments)}}()))}),cd.apply(this,arguments)}const ap={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class iu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sc(y,p,m,b,R,F){Z(y.config.authDomain,y,"auth-domain-config-required"),Z(y.config.apiKey,y,"invalid-api-key");const X={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:b,v:ce.SDK_VERSION,eventId:R};if(p instanceof as){p.setDefaultLanguage(y.languageCode),X.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ze,at]of Object.entries(F||{}))X[Ze]=at}if(p instanceof ls){const Ze=p.getScopes().filter(at=>""!==at);Ze.length>0&&(X.scopes=Ze.join(","))}y.tenantId&&(X.tid=y.tenantId);const we=X;for(const Ze of Object.keys(we))void 0===we[Ze]&&delete we[Ze];return`${function _m({config:y}){return y.emulator?Tn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,U.xO)(we).slice(1)}`}const hd="webStorageSupport";class to extends class vm{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new to(p)}_finalizeEnroll(p,m,b){return function Ka(y,p){return on(y,"POST","/v2/accounts/mfaEnrollment:finalize",xt(y,p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Qu(y,p){return on(y,"POST","/v2/accounts/mfaSignIn:finalize",xt(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let oc=(()=>{class y{constructor(){}static assertion(m){return to._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Ih="@firebase/auth";class eA{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{var R;p((null===(R=b)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pa(){return window}function au(){return(au=(0,d.Z)(function*(y,p,m){var b;const{BuildInfo:R}=pa();J(p.sessionId,"AuthEvent did not contain a session ID");const F=yield Ah(p.sessionId),X={};return en()?X.ibi=R.packageName:bn()?X.apn=R.packageName:Re(y,"operation-not-supported-in-this-environment"),R.displayName&&(X.appDisplayName=R.displayName),X.sessionId=F,sc(y,m,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,X)})).apply(this,arguments)}function Th(){return(Th=(0,d.Z)(function*(y){const{BuildInfo:p}=pa(),m={};en()?m.iosBundleId=p.packageName:bn()?m.androidPackageName=p.packageName:Re(y,"operation-not-supported-in-this-environment"),yield eo(y,m)})).apply(this,arguments)}function Wy(){return(Wy=(0,d.Z)(function*(y,p,m){const{cordova:b}=pa();let R=()=>{};try{yield new Promise((F,X)=>{let we=null;function Ze(){var Tt;F();const Jr=null===(Tt=b.plugins.browsertab)||void 0===Tt?void 0:Tt.close;"function"==typeof Jr&&Jr(),"function"==typeof m?.close&&m.close()}function at(){we||(we=window.setTimeout(()=>{X(Se(y,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===document?.visibilityState&&at()}p.addPassiveListener(Ze),document.addEventListener("resume",at,!1),bn()&&document.addEventListener("visibilitychange",Dt,!1),R=()=>{p.removePassiveListener(Ze),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Dt,!1),we&&window.clearTimeout(we)}})}finally{R()}})).apply(this,arguments)}function Ah(y){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,d.Z)(function*(y){const p=wm(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wm(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let b=0;b<y.length;b++)m[b]=y.charCodeAt(b);return m}(0,U.Pz)("authIdTokenMaxAge"),function tA(y){(0,ce._registerComponent)(new ue.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),R=p.getProvider("heartbeat"),{apiKey:F,authDomain:X}=b.options;return((we,Ze)=>{Z(F&&!F.includes(":"),"invalid-api-key",{appName:we.name}),Z(!X?.includes(":"),"argument-error",{appName:we.name});const at={apiKey:F,authDomain:X,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zn(y)},Dt=new Ht(we,Ze,at);return function He(y,p){const m=p?.persistence||[],b=(Array.isArray(m)?m:[m]).map(ae);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(b,p?.popupRedirectResolver)}(Dt,m),Dt})(b,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new ue.wA("auth-internal",p=>{const m=Nn(p.getProvider("auth").getImmediate());return new eA(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Ih,"0.20.8",function Xb(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(Ih,"0.20.8","esm2017")}("Browser");class dp extends No{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Zy(y){return fp.apply(this,arguments)}function fp(){return(fp=(0,d.Z)(function*(y){const p=yield xh()._get(cc(y));return p&&(yield xh()._remove(cc(y))),p})).apply(this,arguments)}function ma(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*p.length);y.push(p.charAt(b))}return y.join("")}function xh(){return ae(C)}function cc(y){return Ae("authEvent",y.config.apiKey,y.name)}function Mh(y){if(!y?.includes("?"))return{};const[p,...m]=y.split("?");return(0,U.zd)(m.join("?"))}function Yy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}function gd(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function _a(y=(0,U.z$)()){return!("file:"!==gd()&&"ionic:"!==gd()&&"capacitor:"!==gd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mp(){try{const y=self.localStorage,p=ot();if(y)return y.setItem(p,"1"),y.removeItem(p),!function Xy(y=(0,U.z$)()){return function gp(){return(0,U.w1)()&&11===document?.documentMode}()||function Dm(y=(0,U.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,U.hl)()}catch{return Ph()&&(0,U.hl)()}return!1}function Ph(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function md(){return(function Rh(){return"http:"===gd()||"https:"===gd()}()||(0,U.ru)()||_a())&&!function pp(){return(0,U.b$)()||(0,U.UG)()}()&&mp()&&!Ph()}function kh(){return _a()&&typeof document<"u"}function _d(){return(_d=(0,d.Z)(function*(){return!!kh()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Ni={LOCAL:"local",NONE:"none",SESSION:"session"},dc=Z,Lo="persistence";function lu(y){return hc.apply(this,arguments)}function hc(){return(hc=(0,d.Z)(function*(y){yield y._initializationPromise;const p=yd(),m=Ae(Lo,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function yd(){var y;try{return(null===(y=function _p(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Nh=Z;class Oi{constructor(){this.browserResolver=ae(class ym{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P,this._completeRedirectFn=Mt,this._overrideRedirectResult=ha}_openPopup(p,m,b,R){var F=this;return(0,d.Z)(function*(){var X;J(null===(X=F.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const we=sc(p,m,b,Be(),R);return function su(y,p,m,b=500,R=600){const F=Math.max((window.screen.availHeight-R)/2,0).toString(),X=Math.max((window.screen.availWidth-b)/2,0).toString();let we="";const Ze=Object.assign(Object.assign({},ap),{width:b.toString(),height:R.toString(),top:F,left:X}),at=(0,U.z$)().toLowerCase();m&&(we=Hn(at)?"_blank":m),vt(at)&&(p=p||"http://localhost",Ze.scrollbars="yes");const Dt=Object.entries(Ze).reduce((Jr,[Ps,Uh])=>`${Jr}${Ps}=${Uh},`,"");if(function oi(y=(0,U.z$)()){var p;return en(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(at)&&"_self"!==we)return function dd(y,p){const m=document.createElement("a");m.href=y,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",we),new iu(null);const Tt=window.open(p||"",we,Dt);Z(Tt,y,"popup-blocked");try{Tt.focus()}catch{}return new iu(Tt)}(p,we,ot())})()}_openRedirect(p,m,b,R){var F=this;return(0,d.Z)(function*(){return yield F._originValidation(p),function Sn(y){gn().location.href=y}(sc(p,m,b,Be(),R)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:R,promise:F}=this.eventManagers[m];return R?Promise.resolve(R):(J(F,"If manager is not set, promise should be"),F)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const b=yield function $y(y){return cd.apply(this,arguments)}(p),R=new No(p);return b.register("authEvent",F=>(Z(F?.authEvent,p,"invalid-auth-event"),{status:R.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:R},m.iframes[p._key()]=b,R})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(hd,{type:hd},R=>{var F;const X=null===(F=R?.[0])||void 0===F?void 0:F[hd];void 0!==X&&m(!!X),Re(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function sp(y){return jy.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return bs()||$t()||en()}}),this.cordovaResolver=ae(class Cm{constructor(){this._redirectPersistence=P,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mt,this._overrideRedirectResult=ha}_initialize(p){var m=this;return(0,d.Z)(function*(){const b=p._key();let R=m.eventManagers.get(b);return R||(R=new dp(p),m.eventManagers.set(b,R),m.attachCallbackListeners(p,R)),R})()}_openPopup(p){Re(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,b,R){var F=this;return(0,d.Z)(function*(){!function nE(y){var p,m,b,R,F,X,we,Ze,at,Dt;const Tt=pa();Z("function"==typeof(null===(p=Tt?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Z(typeof(null===(m=Tt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Z("function"==typeof(null===(F=null===(R=null===(b=Tt?.cordova)||void 0===b?void 0:b.plugins)||void 0===R?void 0:R.browsertab)||void 0===F?void 0:F.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(Ze=null===(we=null===(X=Tt?.cordova)||void 0===X?void 0:X.plugins)||void 0===we?void 0:we.browsertab)||void 0===Ze?void 0:Ze.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(Dt=null===(at=Tt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Dt?void 0:Dt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const X=yield F._initialize(p);yield X.initialized(),X.resetRedirect(),function ad(){Un.clear()}(),yield F._originValidation(p);const we=function hp(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:ma(),postBody:null,tenantId:y.tenantId,error:Se(y,"no-auth-event")}}(p,b,R);yield function zy(y,p){return xh()._set(cc(y),p)}(p,we);const Ze=yield function ga(y,p,m){return au.apply(this,arguments)}(p,we,m),at=yield function cp(y){const{cordova:p}=pa();return new Promise(m=>{p.plugins.browsertab.isAvailable(b=>{let R=null;b?p.plugins.browsertab.openUrl(y):R=p.InAppBrowser.open(y,function Yr(y=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(R)})})}(Ze);return function tE(y,p,m){return Wy.apply(this,arguments)}(p,X,at)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function up(y){return Th.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:b,handleOpenURL:R,BuildInfo:F}=pa(),X=setTimeout((0,d.Z)(function*(){yield Zy(p),m.onEvent(Yy())}),500),we=function(){var Dt=(0,d.Z)(function*(Tt){clearTimeout(X);const Jr=yield Zy(p);let Ps=null;Jr&&Tt?.url&&(Ps=function uc(y,p){var m,b;const R=function Br(y){const p=Mh(y),m=p.link?decodeURIComponent(p.link):void 0,b=Mh(m).link,R=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Mh(R).link||R||b||m||y}(p);if(R.includes("/__/auth/callback")){const F=Mh(R),X=F.firebaseError?function bm(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(F.firebaseError)):null,we=null===(b=null===(m=X?.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Ze=we?Se(we):null;return Ze?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ze,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:R,postBody:null}}return null}(Jr,Tt.url)),m.onEvent(Ps||Yy())});return function(Jr){return Dt.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,we);const Ze=R,at=`${F.packageName.toLowerCase()}://`;pa().handleOpenURL=function(){var Dt=(0,d.Z)(function*(Tt){if(Tt.toLowerCase().startsWith(at)&&we({url:Tt}),"function"==typeof Ze)try{Ze(Tt)}catch(Jr){console.error(Jr)}});return function(Tt){return Dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P,this._completeRedirectFn=Mt,this._overrideRedirectResult=ha}_initialize(p){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,b,R){var F=this;return(0,d.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(p,m,b,R)})()}_openRedirect(p,m,b,R){var F=this;return(0,d.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(p,m,b,R)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return kh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const m=yield function ev(){return _d.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function vp(y){return y.unwrap()}function nv(y){return bp(y)}function bp(y){const{_tokenResponse:p}=y instanceof U.ZR?y.customData:y;if(!p)return null;if(!(y instanceof U.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ec.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=La;break;case"facebook.com":b=Zo;break;case"github.com":b=xl;break;case"twitter.com":b=ui;break;default:const{oauthIdToken:R,oauthAccessToken:F,oauthTokenSecret:X,pendingToken:we,nonce:Ze}=p;return F||X||R||we?we?m.startsWith("saml.")?wo._create(m,we):li._fromParams({providerId:m,signInMethod:m,pendingToken:we,idToken:R,accessToken:F}):new Ai(m).credential({idToken:R,accessToken:F,rawNonce:Ze}):null}return y instanceof U.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function jr(y,p){return p.catch(m=>{throw m instanceof U.ZR&&function wp(y,p){var m,b;const R=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=p)||void 0===b?void 0:b.code))p.resolver=new sE(y,function Zn(y,p){var m;const b=(0,U.m9)(y),R=p;return Z(p.customData.operationType,b,"argument-error"),Z(null===(m=R.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),oa._fromError(b,R)}(y,p));else if(R){const F=bp(p),X=p;F&&(X.credential=F,X.tenantId=R.tenantId||void 0,X.email=R.email||void 0,X.phoneNumber=R.phoneNumber||void 0)}}(y,m),m}).then(m=>{const R=m.user;return{operationType:m.operationType,credential:nv(m),additionalUserInfo:Wa(m),user:no.getOrCreate(R)}})}function Fh(y,p){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,d.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:b=>jr(y,m.confirm(b))}})).apply(this,arguments)}class sE{constructor(p,m){this.resolver=m,this.auth=function Oh(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return jr(vp(this.auth),this.resolver.resolveSignIn(p))}}class no{constructor(p){this._delegate=p,this.multiFactor=function xo(y){const p=(0,U.m9)(y);return So.has(p)||So.set(p,Ao._fromUser(p)),So.get(p)}(p)}static getOrCreate(p){return no.USER_MAP.has(p)||no.USER_MAP.set(p,new no(p)),no.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,d.Z)(function*(){return jr(m.auth,Eo(m._delegate,p))})()}linkWithPhoneNumber(p,m){var b=this;return(0,d.Z)(function*(){return Fh(b.auth,function Ri(y,p,m){return ms.apply(this,arguments)}(b._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,d.Z)(function*(){return jr(m.auth,function eu(y,p,m){return tu.apply(this,arguments)}(m._delegate,p,Oi))})()}linkWithRedirect(p){var m=this;return(0,d.Z)(function*(){return yield lu(Nn(m.auth)),function ne(y,p,m){return function pe(y,p,m){return Oe.apply(this,arguments)}(y,p,m)}(m._delegate,p,Oi)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,d.Z)(function*(){return jr(m.auth,ds(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Fh(this.auth,function sd(y,p,m){return rl.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return jr(this.auth,function pm(y,p,m){return vh.apply(this,arguments)}(this._delegate,p,Oi))}reauthenticateWithRedirect(p){var m=this;return(0,d.Z)(function*(){return yield lu(Nn(m.auth)),function S(y,p,m){return function k(y,p,m){return $.apply(this,arguments)}(y,p,m)}(m._delegate,p,Oi)})()}sendEmailVerification(p){return function Fl(y,p){return ra.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,d.Z)(function*(){return yield function Lr(y,p){return Ko.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function jl(y,p){return qs((0,U.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function fs(y,p){return qs((0,U.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function dr(y,p){return _t.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Ul(y,p){return Bl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Ll(y,p,m){return ia.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}no.USER_MAP=new WeakMap;const uu=Z;let Cp=(()=>{class y{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=m.options;uu(R,"invalid-api-key",{appName:m.name}),uu(R,"invalid-api-key",{appName:m.name});const F=typeof window<"u"?Oi:void 0;this._delegate=b.initialize({options:{persistence:cu(R,m.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?no.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function Ra(y,p,m){const b=Nn(y);Z(b._canInitEmulator,b,"emulator-config-failed"),Z(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const R=!!m?.disableWarnings,F=$i(p),{host:X,port:we}=function nr(y){const p=$i(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(b);if(R){const F=R[1];return{host:F,port:ss(b.substr(F.length+1))}}{const[F,X]=b.split(":");return{host:F,port:ss(X)}}}(p);b.config.emulator={url:`${F}//${X}${null===we?"":`:${we}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:X,port:we,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Cs(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,b)}applyActionCode(m){return function _i(y,p){return Jo.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Io(this._delegate,m)}confirmPasswordReset(m,b){return function Qo(y,p,m){return Co.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var R=this;return(0,d.Z)(function*(){return jr(R._delegate,function Do(y,p,m){return Fn.apply(this,arguments)}(R._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function ta(y,p){return na.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function yi(y,p){return"EMAIL_SIGNIN"===Oa.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){uu(md(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function Je(y,p){return bt.apply(this,arguments)}(m._delegate,Oi);return b?jr(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function iE(y,p){Nn(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,b,R){const{next:F,error:X,complete:we}=Lh(m,b,R);return this._delegate.onAuthStateChanged(F,X,we)}onIdTokenChanged(m,b,R){const{next:F,error:X,complete:we}=Lh(m,b,R);return this._delegate.onIdTokenChanged(F,X,we)}sendSignInLinkToEmail(m,b){return function Nl(y,p,m){return Gs.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function Ga(y,p,m){return On.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,d.Z)(function*(){let R;switch(function tv(y,p){dc(Object.values(Ni).includes(p),y,"invalid-persistence-type"),(0,U.b$)()?dc(p!==Ni.SESSION,y,"unsupported-persistence-type"):(0,U.UG)()?dc(p===Ni.NONE,y,"unsupported-persistence-type"):Ph()?dc(p===Ni.NONE||p===Ni.LOCAL&&(0,U.hl)(),y,"unsupported-persistence-type"):dc(p===Ni.NONE||mp(),y,"unsupported-persistence-type")}(b._delegate,m),m){case Ni.SESSION:R=P;break;case Ni.LOCAL:R=(yield ae(Ja)._isAvailable())?Ja:C;break;case Ni.NONE:R=ee;break;default:return Re("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return jr(this._delegate,function Xc(y){return Dn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return jr(this._delegate,Gn(this._delegate,m))}signInWithCustomToken(m){return jr(this._delegate,function Rl(y,p){return Yo.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return jr(this._delegate,function zi(y,p,m){return Gn((0,U.m9)(y),qi.credential(p,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return jr(this._delegate,function gh(y,p,m){return ea.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Fh(this._delegate,function ip(y,p,m){return Xu.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,d.Z)(function*(){return uu(md(),b._delegate,"operation-not-supported-in-this-environment"),jr(b._delegate,function tc(y,p,m){return Xl.apply(this,arguments)}(b._delegate,m,Oi))})()}signInWithRedirect(m){var b=this;return(0,d.Z)(function*(){return uu(md(),b._delegate,"operation-not-supported-in-this-environment"),yield lu(b._delegate),function ir(y,p,m){return function wh(y,p,m){return T.apply(this,arguments)}(y,p,m)}(b._delegate,m,Oi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Xo(y,p){return kl.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ni,y})();function Lh(y,p,m){let b=y;"function"!=typeof y&&({next:b,error:p,complete:m}=y);const R=b;return{next:X=>R(X&&no.getOrCreate(X)),error:p,complete:m}}function cu(y,p){const m=function yp(y,p){const m=yd();if(!m)return[];const b=Ae(Lo,y,p);switch(m.getItem(b)){case Ni.NONE:return[ee];case Ni.LOCAL:return[Ja,P];case Ni.SESSION:return[P];default:return[]}}(y,p);if(typeof self<"u"&&!m.includes(Ja)&&m.push(Ja),typeof window<"u")for(const b of[C,P])m.includes(b)||m.push(b);return m.includes(ee)||m.push(ee),m}class Vh{constructor(){this.providerId="phone",this._delegate=new ec(vp(B.Z.auth()))}static credential(p,m){return ec.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Vh.PHONE_SIGN_IN_METHOD=ec.PHONE_SIGN_IN_METHOD,Vh.PROVIDER_ID=ec.PROVIDER_ID;const rv=Z;class iv{constructor(p,m,b=B.Z.app()){var R;rv(null===(R=b.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Vr(p,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sv(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Cp(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:qi,FacebookAuthProvider:Zo,GithubAuthProvider:xl,GoogleAuthProvider:La,OAuthProvider:Ai,SAMLAuthProvider:gi,PhoneAuthProvider:Vh,PhoneMultiFactorGenerator:oc,RecaptchaVerifier:iv,TwitterAuthProvider:ui,Auth:Cp,AuthCredential:br,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.21")}(B.Z)},9751:(ht,oe,V)=>{"use strict";V.d(oe,{y:()=>me});var d=V(930),B=V(727),U=V(8822),ce=V(9635),de=V(2416),ye=V(576),ue=V(2806);let me=(()=>{class te{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const xe=new te;return xe.source=this,xe.operator=Ne,xe}subscribe(Ne,xe,ut){const ge=function Y(te){return te&&te instanceof d.Lv||function K(te){return te&&(0,ye.m)(te.next)&&(0,ye.m)(te.error)&&(0,ye.m)(te.complete)}(te)&&(0,B.Nn)(te)}(Ne)?Ne:new d.Hp(Ne,xe,ut);return(0,ue.x)(()=>{const{operator:ve,source:et}=this;ge.add(ve?ve.call(ge,et):et?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(xe){Ne.error(xe)}}forEach(Ne,xe){return new(xe=Ee(xe))((ut,ge)=>{const ve=new d.Hp({next:et=>{try{Ne(et)}catch(qe){ge(qe),ve.unsubscribe()}},error:ge,complete:ut});this.subscribe(ve)})}_subscribe(Ne){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Ne)}[U.L](){return this}pipe(...Ne){return(0,ce.U)(Ne)(this)}toPromise(Ne){return new(Ne=Ee(Ne))((xe,ut)=>{let ge;this.subscribe(ve=>ge=ve,ve=>ut(ve),()=>xe(ge))})}}return te.create=$e=>new te($e),te})();function Ee(te){var $e;return null!==($e=te??de.v.Promise)&&void 0!==$e?$e:Promise}},7579:(ht,oe,V)=>{"use strict";V.d(oe,{x:()=>ue});var d=V(9751),B=V(727);const ce=(0,V(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=V(8737),ye=V(2806);let ue=(()=>{class Ee extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const te=new me(this,this);return te.operator=Y,te}_throwIfClosed(){if(this.closed)throw new ce}next(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(Y)}})}error(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:te}=this;for(;te.length;)te.shift().error(Y)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:te,isStopped:$e,observers:Ne}=this;return te||$e?B.Lc:(this.currentObservers=null,Ne.push(Y),new B.w0(()=>{this.currentObservers=null,(0,de.P)(Ne,Y)}))}_checkFinalizedStatuses(Y){const{hasError:te,thrownError:$e,isStopped:Ne}=this;te?Y.error($e):Ne&&Y.complete()}asObservable(){const Y=new d.y;return Y.source=this,Y}}return Ee.create=(K,Y)=>new me(K,Y),Ee})();class me extends ue{constructor(K,Y){super(),this.destination=K,this.source=Y}next(K){var Y,te;null===(te=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===te||te.call(Y,K)}error(K){var Y,te;null===(te=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===te||te.call(Y,K)}complete(){var K,Y;null===(Y=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Y||Y.call(K)}_subscribe(K){var Y,te;return null!==(te=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(K))&&void 0!==te?te:B.Lc}}},930:(ht,oe,V)=>{"use strict";V.d(oe,{Hp:()=>ut,Lv:()=>te});var d=V(576),B=V(727),U=V(2416),ce=V(7849),de=V(5032);const ye=Ee("C",void 0,void 0);function Ee(Re,Se,Me){return{kind:Re,value:Se,error:Me}}var K=V(3410),Y=V(2806);class te extends B.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,B.Nn)(Se)&&Se.add(this)):this.destination=qe}static create(Se,Me,Ye){return new ut(Se,Me,Ye)}next(Se){this.isStopped?et(function me(Re){return Ee("N",Re,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?et(function ue(Re){return Ee("E",void 0,Re)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?et(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Ne(Re,Se){return $e.call(Re,Se)}class xe{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Se)}catch(Ye){ge(Ye)}}error(Se){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Se)}catch(Ye){ge(Ye)}else ge(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Me){ge(Me)}}}class ut extends te{constructor(Se,Me,Ye){let Qe;if(super(),(0,d.m)(Se)||!Se)Qe={next:Se??void 0,error:Me??void 0,complete:Ye??void 0};else{let Z;this&&U.v.useDeprecatedNextContext?(Z=Object.create(Se),Z.unsubscribe=()=>this.unsubscribe(),Qe={next:Se.next&&Ne(Se.next,Z),error:Se.error&&Ne(Se.error,Z),complete:Se.complete&&Ne(Se.complete,Z)}):Qe=Se}this.destination=new xe(Qe)}}function ge(Re){U.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Re):(0,ce.h)(Re)}function et(Re,Se){const{onStoppedNotification:Me}=U.v;Me&&K.z.setTimeout(()=>Me(Re,Se))}const qe={closed:!0,next:de.Z,error:function ve(Re){throw Re},complete:de.Z}},727:(ht,oe,V)=>{"use strict";V.d(oe,{Lc:()=>ye,w0:()=>de,Nn:()=>ue});var d=V(576);const U=(0,V(3888).d)(Ee=>function(Y){Ee(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ce=V(8737);class de{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Ne of Y)Ne.remove(this);else Y.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Ne){K=Ne instanceof U?Ne.errors:[Ne]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Ne of $e)try{me(Ne)}catch(xe){K=K??[],xe instanceof U?K=[...K,...xe.errors]:K.push(xe)}}if(K)throw new U(K)}}add(K){var Y;if(K&&K!==this)if(this.closed)me(K);else{if(K instanceof de){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(K)}}_hasParent(K){const{_parentage:Y}=this;return Y===K||Array.isArray(Y)&&Y.includes(K)}_addParent(K){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(K),Y):Y?[Y,K]:K}_removeParent(K){const{_parentage:Y}=this;Y===K?this._parentage=null:Array.isArray(Y)&&(0,ce.P)(Y,K)}remove(K){const{_finalizers:Y}=this;Y&&(0,ce.P)(Y,K),K instanceof de&&K._removeParent(this)}}de.EMPTY=(()=>{const Ee=new de;return Ee.closed=!0,Ee})();const ye=de.EMPTY;function ue(Ee){return Ee instanceof de||Ee&&"closed"in Ee&&(0,d.m)(Ee.remove)&&(0,d.m)(Ee.add)&&(0,d.m)(Ee.unsubscribe)}function me(Ee){(0,d.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(ht,oe,V)=>{"use strict";V.d(oe,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,oe,V)=>{"use strict";V.d(oe,{E:()=>B});const B=new(V(9751).y)(de=>de.complete())},8996:(ht,oe,V)=>{"use strict";V.d(oe,{D:()=>Se});var d=V(8421),B=V(5363),U=V(9468),ye=V(9751),me=V(2202),Ee=V(576),K=V(9672);function te(Me,Ye){if(!Me)throw new Error("Iterable cannot be null");return new ye.y(Qe=>{(0,K.f)(Qe,Ye,()=>{const Z=Me[Symbol.asyncIterator]();(0,K.f)(Qe,Ye,()=>{Z.next().then(_e=>{_e.done?Qe.complete():Qe.next(_e.value)})},0,!0)})})}var $e=V(3670),Ne=V(8239),xe=V(1144),ut=V(6495),ge=V(2206),ve=V(4532),et=V(3260);function Se(Me,Ye){return Ye?function Re(Me,Ye){if(null!=Me){if((0,$e.c)(Me))return function ce(Me,Ye){return(0,d.Xf)(Me).pipe((0,U.R)(Ye),(0,B.Q)(Ye))}(Me,Ye);if((0,xe.z)(Me))return function ue(Me,Ye){return new ye.y(Qe=>{let Z=0;return Ye.schedule(function(){Z===Me.length?Qe.complete():(Qe.next(Me[Z++]),Qe.closed||this.schedule())})})}(Me,Ye);if((0,Ne.t)(Me))return function de(Me,Ye){return(0,d.Xf)(Me).pipe((0,U.R)(Ye),(0,B.Q)(Ye))}(Me,Ye);if((0,ge.D)(Me))return te(Me,Ye);if((0,ut.T)(Me))return function Y(Me,Ye){return new ye.y(Qe=>{let Z;return(0,K.f)(Qe,Ye,()=>{Z=Me[me.h](),(0,K.f)(Qe,Ye,()=>{let _e,J;try{({value:_e,done:J}=Z.next())}catch(re){return void Qe.error(re)}J?Qe.complete():Qe.next(_e)},0,!0)}),()=>(0,Ee.m)(Z?.return)&&Z.return()})}(Me,Ye);if((0,et.L)(Me))return function qe(Me,Ye){return te((0,et.Q)(Me),Ye)}(Me,Ye)}throw(0,ve.z)(Me)}(Me,Ye):(0,d.Xf)(Me)}},8421:(ht,oe,V)=>{"use strict";V.d(oe,{Xf:()=>$e});var d=V(655),B=V(1144),U=V(8239),ce=V(9751),de=V(3670),ye=V(2206),ue=V(4532),me=V(6495),Ee=V(3260),K=V(576),Y=V(7849),te=V(8822);function $e(Re){if(Re instanceof ce.y)return Re;if(null!=Re){if((0,de.c)(Re))return function Ne(Re){return new ce.y(Se=>{const Me=Re[te.L]();if((0,K.m)(Me.subscribe))return Me.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,B.z)(Re))return function xe(Re){return new ce.y(Se=>{for(let Me=0;Me<Re.length&&!Se.closed;Me++)Se.next(Re[Me]);Se.complete()})}(Re);if((0,U.t)(Re))return function ut(Re){return new ce.y(Se=>{Re.then(Me=>{Se.closed||(Se.next(Me),Se.complete())},Me=>Se.error(Me)).then(null,Y.h)})}(Re);if((0,ye.D)(Re))return ve(Re);if((0,me.T)(Re))return function ge(Re){return new ce.y(Se=>{for(const Me of Re)if(Se.next(Me),Se.closed)return;Se.complete()})}(Re);if((0,Ee.L)(Re))return function et(Re){return ve((0,Ee.Q)(Re))}(Re)}throw(0,ue.z)(Re)}function ve(Re){return new ce.y(Se=>{(function qe(Re,Se){var Me,Ye,Qe,Z;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Me=(0,d.KL)(Re);!(Ye=yield Me.next()).done;)if(Se.next(Ye.value),Se.closed)return}catch(_e){Qe={error:_e}}finally{try{Ye&&!Ye.done&&(Z=Me.return)&&(yield Z.call(Me))}finally{if(Qe)throw Qe.error}}Se.complete()})})(Re,Se).catch(Me=>Se.error(Me))})}},6451:(ht,oe,V)=>{"use strict";V.d(oe,{T:()=>ye});var d=V(8189),B=V(8421),U=V(515),ce=V(3269),de=V(8996);function ye(...ue){const me=(0,ce.yG)(ue),Ee=(0,ce._6)(ue,1/0),K=ue;return K.length?1===K.length?(0,B.Xf)(K[0]):(0,d.J)(Ee)((0,de.D)(K,me)):U.E}},5403:(ht,oe,V)=>{"use strict";V.d(oe,{x:()=>B});var d=V(930);function B(ce,de,ye,ue,me){return new U(ce,de,ye,ue,me)}class U extends d.Lv{constructor(de,ye,ue,me,Ee,K){super(de),this.onFinalize=Ee,this.shouldUnsubscribe=K,this._next=ye?function(Y){try{ye(Y)}catch(te){de.error(te)}}:super._next,this._error=me?function(Y){try{me(Y)}catch(te){de.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(Y){de.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(ht,oe,V)=>{"use strict";V.d(oe,{U:()=>U});var d=V(4482),B=V(5403);function U(ce,de){return(0,d.e)((ye,ue)=>{let me=0;ye.subscribe((0,B.x)(ue,Ee=>{ue.next(ce.call(de,Ee,me++))}))})}},8189:(ht,oe,V)=>{"use strict";V.d(oe,{J:()=>U});var d=V(5577),B=V(4671);function U(ce=1/0){return(0,d.z)(B.y,ce)}},5577:(ht,oe,V)=>{"use strict";V.d(oe,{z:()=>me});var d=V(4004),B=V(8421),U=V(4482),ce=V(9672),de=V(5403),ue=V(576);function me(Ee,K,Y=1/0){return(0,ue.m)(K)?me((te,$e)=>(0,d.U)((Ne,xe)=>K(te,Ne,$e,xe))((0,B.Xf)(Ee(te,$e))),Y):("number"==typeof K&&(Y=K),(0,U.e)((te,$e)=>function ye(Ee,K,Y,te,$e,Ne,xe,ut){const ge=[];let ve=0,et=0,qe=!1;const Re=()=>{qe&&!ge.length&&!ve&&K.complete()},Se=Ye=>ve<te?Me(Ye):ge.push(Ye),Me=Ye=>{Ne&&K.next(Ye),ve++;let Qe=!1;(0,B.Xf)(Y(Ye,et++)).subscribe((0,de.x)(K,Z=>{$e?.(Z),Ne?Se(Z):K.next(Z)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(ve--;ge.length&&ve<te;){const Z=ge.shift();xe?(0,ce.f)(K,xe,()=>Me(Z)):Me(Z)}Re()}catch(Z){K.error(Z)}}))};return Ee.subscribe((0,de.x)(K,Se,()=>{qe=!0,Re()})),()=>{ut?.()}}(te,$e,Ee,Y)))}},5363:(ht,oe,V)=>{"use strict";V.d(oe,{Q:()=>ce});var d=V(9672),B=V(4482),U=V(5403);function ce(de,ye=0){return(0,B.e)((ue,me)=>{ue.subscribe((0,U.x)(me,Ee=>(0,d.f)(me,de,()=>me.next(Ee),ye),()=>(0,d.f)(me,de,()=>me.complete(),ye),Ee=>(0,d.f)(me,de,()=>me.error(Ee),ye)))})}},3099:(ht,oe,V)=>{"use strict";V.d(oe,{B:()=>de});var d=V(8421),B=V(7579),U=V(930),ce=V(4482);function de(ue={}){const{connector:me=(()=>new B.x),resetOnError:Ee=!0,resetOnComplete:K=!0,resetOnRefCountZero:Y=!0}=ue;return te=>{let $e,Ne,xe,ut=0,ge=!1,ve=!1;const et=()=>{Ne?.unsubscribe(),Ne=void 0},qe=()=>{et(),$e=xe=void 0,ge=ve=!1},Re=()=>{const Se=$e;qe(),Se?.unsubscribe()};return(0,ce.e)((Se,Me)=>{ut++,!ve&&!ge&&et();const Ye=xe=xe??me();Me.add(()=>{ut--,0===ut&&!ve&&!ge&&(Ne=ye(Re,Y))}),Ye.subscribe(Me),!$e&&ut>0&&($e=new U.Hp({next:Qe=>Ye.next(Qe),error:Qe=>{ve=!0,et(),Ne=ye(qe,Ee,Qe),Ye.error(Qe)},complete:()=>{ge=!0,et(),Ne=ye(qe,K),Ye.complete()}}),(0,d.Xf)(Se).subscribe($e))})(te)}}function ye(ue,me,...Ee){if(!0===me)return void ue();if(!1===me)return;const K=new U.Hp({next:()=>{K.unsubscribe(),ue()}});return me(...Ee).subscribe(K)}},9468:(ht,oe,V)=>{"use strict";V.d(oe,{R:()=>B});var d=V(4482);function B(U,ce=0){return(0,d.e)((de,ye)=>{ye.add(U.schedule(()=>de.subscribe(ye),ce))})}},8505:(ht,oe,V)=>{"use strict";V.d(oe,{b:()=>de});var d=V(576),B=V(4482),U=V(5403),ce=V(4671);function de(ye,ue,me){const Ee=(0,d.m)(ye)||ue||me?{next:ye,error:ue,complete:me}:ye;return Ee?(0,B.e)((K,Y)=>{var te;null===(te=Ee.subscribe)||void 0===te||te.call(Ee);let $e=!0;K.subscribe((0,U.x)(Y,Ne=>{var xe;null===(xe=Ee.next)||void 0===xe||xe.call(Ee,Ne),Y.next(Ne)},()=>{var Ne;$e=!1,null===(Ne=Ee.complete)||void 0===Ne||Ne.call(Ee),Y.complete()},Ne=>{var xe;$e=!1,null===(xe=Ee.error)||void 0===xe||xe.call(Ee,Ne),Y.error(Ne)},()=>{var Ne,xe;$e&&(null===(Ne=Ee.unsubscribe)||void 0===Ne||Ne.call(Ee)),null===(xe=Ee.finalize)||void 0===xe||xe.call(Ee)}))}):ce.y}},4408:(ht,oe,V)=>{"use strict";V.d(oe,{o:()=>de});var d=V(727);class B extends d.w0{constructor(ue,me){super()}schedule(ue,me=0){return this}}const U={setInterval(ye,ue,...me){const{delegate:Ee}=U;return Ee?.setInterval?Ee.setInterval(ye,ue,...me):setInterval(ye,ue,...me)},clearInterval(ye){const{delegate:ue}=U;return(ue?.clearInterval||clearInterval)(ye)},delegate:void 0};var ce=V(8737);class de extends B{constructor(ue,me){super(ue,me),this.scheduler=ue,this.work=me,this.pending=!1}schedule(ue,me=0){if(this.closed)return this;this.state=ue;const Ee=this.id,K=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(K,Ee,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(K,this.id,me),this}requestAsyncId(ue,me,Ee=0){return U.setInterval(ue.flush.bind(ue,this),Ee)}recycleAsyncId(ue,me,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return me;U.clearInterval(me)}execute(ue,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(ue,me);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,me){let K,Ee=!1;try{this.work(ue)}catch(Y){Ee=!0,K=Y||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:ue,scheduler:me}=this,{actions:Ee}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Ee,this),null!=ue&&(this.id=this.recycleAsyncId(me,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,oe,V)=>{"use strict";V.d(oe,{v:()=>U});var d=V(6063);class B{constructor(de,ye=B.now){this.schedulerActionCtor=de,this.now=ye}schedule(de,ye=0,ue){return new this.schedulerActionCtor(this,de).schedule(ue,ye)}}B.now=d.l.now;class U extends B{constructor(de,ye=B.now){super(de,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:ye}=this;if(this._active)return void ye.push(de);let ue;this._active=!0;do{if(ue=de.execute(de.state,de.delay))break}while(de=ye.shift());if(this._active=!1,ue){for(;de=ye.shift();)de.unsubscribe();throw ue}}}},4986:(ht,oe,V)=>{"use strict";V.d(oe,{P:()=>ce,z:()=>U});var d=V(4408);const U=new(V(7565).v)(d.o),ce=U},6063:(ht,oe,V)=>{"use strict";V.d(oe,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ht,oe,V)=>{"use strict";V.d(oe,{z:()=>d});const d={setTimeout(B,U,...ce){const{delegate:de}=d;return de?.setTimeout?de.setTimeout(B,U,...ce):setTimeout(B,U,...ce)},clearTimeout(B){const{delegate:U}=d;return(U?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(ht,oe,V)=>{"use strict";V.d(oe,{h:()=>B});const B=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,oe,V)=>{"use strict";V.d(oe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ht,oe,V)=>{"use strict";V.d(oe,{_6:()=>ye,jO:()=>ce,yG:()=>de});var d=V(576),B=V(3532);function U(ue){return ue[ue.length-1]}function ce(ue){return(0,d.m)(U(ue))?ue.pop():void 0}function de(ue){return(0,B.K)(U(ue))?ue.pop():void 0}function ye(ue,me){return"number"==typeof U(ue)?ue.pop():me}},8737:(ht,oe,V)=>{"use strict";function d(B,U){if(B){const ce=B.indexOf(U);0<=ce&&B.splice(ce,1)}}V.d(oe,{P:()=>d})},3888:(ht,oe,V)=>{"use strict";function d(B){const ce=B(de=>{Error.call(de),de.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}V.d(oe,{d:()=>d})},2806:(ht,oe,V)=>{"use strict";V.d(oe,{O:()=>ce,x:()=>U});var d=V(2416);let B=null;function U(de){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!B;if(ye&&(B={errorThrown:!1,error:null}),de(),ye){const{errorThrown:ue,error:me}=B;if(B=null,ue)throw me}}else de()}function ce(de){d.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=de)}},9672:(ht,oe,V)=>{"use strict";function d(B,U,ce,de=0,ye=!1){const ue=U.schedule(function(){ce(),ye?B.add(this.schedule(null,de)):this.unsubscribe()},de);if(B.add(ue),!ye)return ue}V.d(oe,{f:()=>d})},4671:(ht,oe,V)=>{"use strict";function d(B){return B}V.d(oe,{y:()=>d})},1144:(ht,oe,V)=>{"use strict";V.d(oe,{z:()=>d});const d=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ht,oe,V)=>{"use strict";V.d(oe,{D:()=>B});var d=V(576);function B(U){return Symbol.asyncIterator&&(0,d.m)(U?.[Symbol.asyncIterator])}},576:(ht,oe,V)=>{"use strict";function d(B){return"function"==typeof B}V.d(oe,{m:()=>d})},3670:(ht,oe,V)=>{"use strict";V.d(oe,{c:()=>U});var d=V(8822),B=V(576);function U(ce){return(0,B.m)(ce[d.L])}},6495:(ht,oe,V)=>{"use strict";V.d(oe,{T:()=>U});var d=V(2202),B=V(576);function U(ce){return(0,B.m)(ce?.[d.h])}},8239:(ht,oe,V)=>{"use strict";V.d(oe,{t:()=>B});var d=V(576);function B(U){return(0,d.m)(U?.then)}},3260:(ht,oe,V)=>{"use strict";V.d(oe,{L:()=>ce,Q:()=>U});var d=V(655),B=V(576);function U(de){return(0,d.FC)(this,arguments,function*(){const ue=de.getReader();try{for(;;){const{value:me,done:Ee}=yield(0,d.qq)(ue.read());if(Ee)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(me)}}finally{ue.releaseLock()}})}function ce(de){return(0,B.m)(de?.getReader)}},3532:(ht,oe,V)=>{"use strict";V.d(oe,{K:()=>B});var d=V(576);function B(U){return U&&(0,d.m)(U.schedule)}},4482:(ht,oe,V)=>{"use strict";V.d(oe,{A:()=>B,e:()=>U});var d=V(576);function B(ce){return(0,d.m)(ce?.lift)}function U(ce){return de=>{if(B(de))return de.lift(function(ye){try{return ce(ye,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,oe,V)=>{"use strict";function d(){}V.d(oe,{Z:()=>d})},9635:(ht,oe,V)=>{"use strict";V.d(oe,{U:()=>U,z:()=>B});var d=V(4671);function B(...ce){return U(ce)}function U(ce){return 0===ce.length?d.y:1===ce.length?ce[0]:function(ye){return ce.reduce((ue,me)=>me(ue),ye)}}},7849:(ht,oe,V)=>{"use strict";V.d(oe,{h:()=>U});var d=V(2416),B=V(3410);function U(ce){B.z.setTimeout(()=>{const{onUnhandledError:de}=d.v;if(!de)throw ce;de(ce)})}},4532:(ht,oe,V)=>{"use strict";function d(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(oe,{z:()=>d})},5226:function(ht){ht.exports=function(){"use strict";var oe={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const d=C=>{const I={};for(const P in C)I[C[P]]="swal2-"+C[P];return I},B=d(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),U=d(["success","warning","info","question","error"]),ce="SweetAlert2:",ye=C=>C.charAt(0).toUpperCase()+C.slice(1),ue=C=>{console.warn("".concat(ce," ").concat("object"==typeof C?C.join(" "):C))},me=C=>{console.error("".concat(ce," ").concat(C))},Ee=[],Y=(C,I)=>{(C=>{Ee.includes(C)||(Ee.push(C),ue(C))})('"'.concat(C,'" is deprecated and will be removed in the next major release. Please use "').concat(I,'" instead.'))},te=C=>"function"==typeof C?C():C,$e=C=>C&&"function"==typeof C.toPromise,Ne=C=>$e(C)?C.toPromise():Promise.resolve(C),xe=C=>C&&Promise.resolve(C)===C,ge=()=>document.body.querySelector(".".concat(B.container)),ve=C=>{const I=ge();return I?I.querySelector(C):null},et=C=>ve(".".concat(C)),qe=()=>et(B.popup),Re=()=>et(B.icon),Se=()=>et(B.title),Me=()=>et(B["html-container"]),Ye=()=>et(B.image),Qe=()=>et(B["progress-steps"]),Z=()=>et(B["validation-message"]),_e=()=>ve(".".concat(B.actions," .").concat(B.confirm)),J=()=>ve(".".concat(B.actions," .").concat(B.deny)),ae=()=>ve(".".concat(B.loader)),se=()=>ve(".".concat(B.actions," .").concat(B.cancel)),He=()=>et(B.actions),Be=()=>et(B.footer),yt=()=>et(B["timer-progress-bar"]),Xt=()=>et(B.close),nt=()=>{const C=Array.from(qe().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((P,G)=>{const De=parseInt(P.getAttribute("tabindex")),ot=parseInt(G.getAttribute("tabindex"));return De>ot?1:De<ot?-1:0}),I=Array.from(qe().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(P=>"-1"!==P.getAttribute("tabindex"));return(C=>{const I=[];for(let P=0;P<C.length;P++)-1===I.indexOf(C[P])&&I.push(C[P]);return I})(C.concat(I)).filter(P=>hn(P))},nn=()=>xt(document.body,B.shown)&&!xt(document.body,B["toast-shown"])&&!xt(document.body,B["no-backdrop"]),Tn=()=>qe()&&xt(qe(),B.toast),Kt={previousBodyPadding:null},pn=(C,I)=>{if(C.textContent="",I){const G=(new DOMParser).parseFromString(I,"text/html");Array.from(G.querySelector("head").childNodes).forEach(De=>{C.appendChild(De)}),Array.from(G.querySelector("body").childNodes).forEach(De=>{De instanceof HTMLVideoElement||De instanceof HTMLAudioElement?C.appendChild(De.cloneNode(!0)):C.appendChild(De)})}},xt=(C,I)=>{if(!I)return!1;const P=I.split(/\s+/);for(let G=0;G<P.length;G++)if(!C.classList.contains(P[G]))return!1;return!0},Ir=(C,I,P)=>{if(((C,I)=>{Array.from(C.classList).forEach(P=>{!Object.values(B).includes(P)&&!Object.values(U).includes(P)&&!Object.values(I.showClass).includes(P)&&C.classList.remove(P)})})(C,I),I.customClass&&I.customClass[P]){if("string"!=typeof I.customClass[P]&&!I.customClass[P].forEach)return ue("Invalid type of customClass.".concat(P,'! Expected string or iterable object, got "').concat(typeof I.customClass[P],'"'));Ut(C,I.customClass[P])}},si=(C,I)=>{if(!I)return null;switch(I){case"select":case"textarea":case"file":return C.querySelector(".".concat(B.popup," > .").concat(B[I]));case"checkbox":return C.querySelector(".".concat(B.popup," > .").concat(B.checkbox," input"));case"radio":return C.querySelector(".".concat(B.popup," > .").concat(B.radio," input:checked"))||C.querySelector(".".concat(B.popup," > .").concat(B.radio," input:first-child"));case"range":return C.querySelector(".".concat(B.popup," > .").concat(B.range," input"));default:return C.querySelector(".".concat(B.popup," > .").concat(B.input))}},Dr=C=>{if(C.focus(),"file"!==C.type){const I=C.value;C.value="",C.value=I}},Nr=(C,I,P)=>{!C||!I||("string"==typeof I&&(I=I.split(/\s+/).filter(Boolean)),I.forEach(G=>{Array.isArray(C)?C.forEach(De=>{P?De.classList.add(G):De.classList.remove(G)}):P?C.classList.add(G):C.classList.remove(G)}))},Ut=(C,I)=>{Nr(C,I,!0)},Yn=(C,I)=>{Nr(C,I,!1)},Qn=(C,I)=>{const P=Array.from(C.children);for(let G=0;G<P.length;G++){const De=P[G];if(De instanceof HTMLElement&&xt(De,I))return De}},vr=(C,I,P)=>{P==="".concat(parseInt(P))&&(P=parseInt(P)),P||0===parseInt(P)?C.style[I]="number"==typeof P?"".concat(P,"px"):P:C.style.removeProperty(I)},kn=function(C){C.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Ke=C=>{C.style.display="none"},zr=(C,I,P,G)=>{const De=C.querySelector(I);De&&(De.style[P]=G)},fi=function(C,I){I?kn(C,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ke(C)},hn=C=>!(!C||!(C.offsetWidth||C.offsetHeight||C.getClientRects().length)),Di=C=>C.scrollHeight>C.clientHeight,jn=C=>{const I=window.getComputedStyle(C),P=parseFloat(I.getPropertyValue("animation-duration")||"0"),G=parseFloat(I.getPropertyValue("transition-duration")||"0");return P>0||G>0},Wn=function(C){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=yt();hn(P)&&(I&&(P.style.transition="none",P.style.width="100%"),setTimeout(()=>{P.style.transition="width ".concat(C/1e3,"s linear"),P.style.width="0%"},10))},Ue={},Jn=C=>new Promise(I=>{if(!C)return I();const P=window.scrollX,G=window.scrollY;Ue.restoreFocusTimeout=setTimeout(()=>{Ue.previousActiveElement instanceof HTMLElement?(Ue.previousActiveElement.focus(),Ue.previousActiveElement=null):document.body&&document.body.focus(),I()},100),window.scrollTo(P,G)}),wr=()=>typeof window>"u"||typeof document>"u",Zr='\n <div aria-labelledby="'.concat(B.title,'" aria-describedby="').concat(B["html-container"],'" class="').concat(B.popup,'" tabindex="-1">\n   <button type="button" class="').concat(B.close,'"></button>\n   <ul class="').concat(B["progress-steps"],'"></ul>\n   <div class="').concat(B.icon,'"></div>\n   <img class="').concat(B.image,'" />\n   <h2 class="').concat(B.title,'" id="').concat(B.title,'"></h2>\n   <div class="').concat(B["html-container"],'" id="').concat(B["html-container"],'"></div>\n   <input class="').concat(B.input,'" />\n   <input type="file" class="').concat(B.file,'" />\n   <div class="').concat(B.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(B.select,'"></select>\n   <div class="').concat(B.radio,'"></div>\n   <label for="').concat(B.checkbox,'" class="').concat(B.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(B.label,'"></span>\n   </label>\n   <textarea class="').concat(B.textarea,'"></textarea>\n   <div class="').concat(B["validation-message"],'" id="').concat(B["validation-message"],'"></div>\n   <div class="').concat(B.actions,'">\n     <div class="').concat(B.loader,'"></div>\n     <button type="button" class="').concat(B.confirm,'"></button>\n     <button type="button" class="').concat(B.deny,'"></button>\n     <button type="button" class="').concat(B.cancel,'"></button>\n   </div>\n   <div class="').concat(B.footer,'"></div>\n   <div class="').concat(B["timer-progress-bar-container"],'">\n     <div class="').concat(B["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Or=()=>{Ue.currentInstance.resetValidationMessage()},Kr=C=>{const I=(()=>{const C=ge();return!!C&&(C.remove(),Yn([document.documentElement,document.body],[B["no-backdrop"],B["toast-shown"],B["has-column"]]),!0)})();if(wr())return void me("SweetAlert2 requires document to initialize");const P=document.createElement("div");P.className=B.container,I&&Ut(P,B["no-transition"]),pn(P,Zr);const G=(C=>"string"==typeof C?document.querySelector(C):C)(C.target);G.appendChild(P),(C=>{const I=qe();I.setAttribute("role",C.toast?"alert":"dialog"),I.setAttribute("aria-live",C.toast?"polite":"assertive"),C.toast||I.setAttribute("aria-modal","true")})(C),(C=>{"rtl"===window.getComputedStyle(C).direction&&Ut(ge(),B.rtl)})(G),(()=>{const C=qe(),I=Qn(C,B.input),P=Qn(C,B.file),G=C.querySelector(".".concat(B.range," input")),De=C.querySelector(".".concat(B.range," output")),ot=Qn(C,B.select),Ln=C.querySelector(".".concat(B.checkbox," input")),gn=Qn(C,B.textarea);I.oninput=Or,P.onchange=Or,ot.onchange=Or,Ln.onchange=Or,gn.oninput=Or,G.oninput=()=>{Or(),De.value=G.value},G.onchange=()=>{Or(),De.value=G.value}})()},st=(C,I)=>{C instanceof HTMLElement?I.appendChild(C):"object"==typeof C?Pe(C,I):C&&pn(I,C)},Pe=(C,I)=>{C.jquery?lt(I,C):pn(I,C.toString())},lt=(C,I)=>{if(C.textContent="",0 in I)for(let P=0;P in I;P++)C.appendChild(I[P].cloneNode(!0));else C.appendChild(I.cloneNode(!0))},Et=(()=>{if(wr())return!1;const C=document.createElement("div"),I={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const P in I)if(Object.prototype.hasOwnProperty.call(I,P)&&typeof C.style[P]<"u")return I[P];return!1})(),W=(C,I)=>{const P=He(),G=ae();I.showConfirmButton||I.showDenyButton||I.showCancelButton?kn(P):Ke(P),Ir(P,I,"actions"),function z(C,I,P){const G=_e(),De=J(),ot=se();Ae(G,"confirm",P),Ae(De,"deny",P),Ae(ot,"cancel",P),function ee(C,I,P,G){G.buttonsStyling?(Ut([C,I,P],B.styled),G.confirmButtonColor&&(C.style.backgroundColor=G.confirmButtonColor,Ut(C,B["default-outline"])),G.denyButtonColor&&(I.style.backgroundColor=G.denyButtonColor,Ut(I,B["default-outline"])),G.cancelButtonColor&&(P.style.backgroundColor=G.cancelButtonColor,Ut(P,B["default-outline"]))):Yn([C,I,P],B.styled)}(G,De,ot,P),P.reverseButtons&&(P.toast?(C.insertBefore(ot,G),C.insertBefore(De,G)):(C.insertBefore(ot,I),C.insertBefore(De,I),C.insertBefore(G,I)))}(P,G,I),pn(G,I.loaderHtml),Ir(G,I,"loader")};function Ae(C,I,P){fi(C,P["show".concat(ye(I),"Button")],"inline-block"),pn(C,P["".concat(I,"ButtonText")]),C.setAttribute("aria-label",P["".concat(I,"ButtonAriaLabel")]),C.className=B[I],Ir(C,P,"".concat(I,"Button")),Ut(C,P["".concat(I,"ButtonClass")])}const Ge=(C,I)=>{const P=ge();!P||(function vt(C,I){"string"==typeof I?C.style.background=I:I||Ut([document.documentElement,document.body],B["no-backdrop"])}(P,I.backdrop),function $t(C,I){I in B?Ut(C,B[I]):(ue('The "position" parameter is not valid, defaulting to "center"'),Ut(C,B.center))}(P,I.position),function Hn(C,I){if(I&&"string"==typeof I){const P="grow-".concat(I);P in B&&Ut(C,B[P])}}(P,I.grow),Ir(P,I,"container"))};const wn=["input","file","range","select","radio","checkbox","textarea"],Fe=C=>{if(!zn[C.input])return void me('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(C.input,'"'));const I=bs(C.input),P=zn[C.input](I,C);kn(I),setTimeout(()=>{Dr(P)})},en=(C,I)=>{const P=si(qe(),C);if(P){(C=>{for(let I=0;I<C.attributes.length;I++){const P=C.attributes[I].name;["type","value","style"].includes(P)||C.removeAttribute(P)}})(P);for(const G in I)P.setAttribute(G,I[G])}},Yr=C=>{const I=bs(C.input);"object"==typeof C.customClass&&Ut(I,C.customClass.input)},oi=(C,I)=>{(!C.placeholder||I.inputPlaceholder)&&(C.placeholder=I.inputPlaceholder)},$n=(C,I,P)=>{if(P.inputLabel){C.id=B.input;const G=document.createElement("label"),De=B["input-label"];G.setAttribute("for",C.id),G.className=De,"object"==typeof P.customClass&&Ut(G,P.customClass.inputLabel),G.innerText=P.inputLabel,I.insertAdjacentElement("beforebegin",G)}},bs=C=>Qn(qe(),B[C]||B.input),In=(C,I)=>{["string","number"].includes(typeof I)?C.value="".concat(I):xe(I)||ue('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof I,'"'))},zn={};zn.text=zn.email=zn.password=zn.number=zn.tel=zn.url=(C,I)=>(In(C,I.inputValue),$n(C,C,I),oi(C,I),C.type=I.input,C),zn.file=(C,I)=>($n(C,C,I),oi(C,I),C),zn.range=(C,I)=>{const P=C.querySelector("input"),G=C.querySelector("output");return In(P,I.inputValue),P.type=I.input,In(G,I.inputValue),$n(P,C,I),C},zn.select=(C,I)=>{if(C.textContent="",I.inputPlaceholder){const P=document.createElement("option");pn(P,I.inputPlaceholder),P.value="",P.disabled=!0,P.selected=!0,C.appendChild(P)}return $n(C,C,I),C},zn.radio=C=>(C.textContent="",C),zn.checkbox=(C,I)=>{const P=si(qe(),"checkbox");P.value="1",P.id=B.checkbox,P.checked=Boolean(I.inputValue);const G=C.querySelector("span");return pn(G,I.inputPlaceholder),P},zn.textarea=(C,I)=>{In(C,I.inputValue),oi(C,I),$n(C,C,I);return setTimeout(()=>{if("MutationObserver"in window){const G=parseInt(window.getComputedStyle(qe()).width);new MutationObserver(()=>{const ot=C.offsetWidth+(G=>parseInt(window.getComputedStyle(G).marginLeft)+parseInt(window.getComputedStyle(G).marginRight))(C);qe().style.width=ot>G?"".concat(ot,"px"):null}).observe(C,{attributes:!0,attributeFilter:["style"]})}}),C};const yo=(C,I)=>{const P=Me();Ir(P,I,"htmlContainer"),I.html?(st(I.html,P),kn(P,"block")):I.text?(P.textContent=I.text,kn(P,"block")):Ke(P),((C,I)=>{const P=qe(),G=oe.innerParams.get(C),De=!G||I.input!==G.input;wn.forEach(ot=>{const Ln=Qn(P,B[ot]);en(ot,I.inputAttributes),Ln.className=B[ot],De&&Ke(Ln)}),I.input&&(De&&Fe(I),Yr(I))})(C,I)},Es=(C,I)=>{for(const P in U)I.icon!==P&&Yn(C,U[P]);Ut(C,U[I.icon]),Cs(C,I),Ra(),Ir(C,I,"icon")},Ra=()=>{const C=qe(),I=window.getComputedStyle(C).getPropertyValue("background-color"),P=C.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let G=0;G<P.length;G++)P[G].style.backgroundColor=I},ss=(C,I)=>{let G,P=C.innerHTML;I.iconHtml?G=br(I.iconHtml):"success"===I.icon?(G='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',P=P.replace(/ style=".*?"/g,"")):G="error"===I.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':br({question:"?",warning:"!",info:"i"}[I.icon]),P.trim()!==G.trim()&&pn(C,G)},Cs=(C,I)=>{if(I.iconColor){C.style.color=I.iconColor,C.style.borderColor=I.iconColor;for(const P of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])zr(C,P,"backgroundColor",I.iconColor);zr(C,".swal2-success-ring","borderColor",I.iconColor)}},br=C=>'<div class="'.concat(B["icon-content"],'">').concat(C,"</div>"),un=(C,I)=>{C.className="".concat(B.popup," ").concat(hn(C)?I.showClass.popup:""),I.toast?(Ut([document.documentElement,document.body],B["toast-shown"]),Ut(C,B.toast)):Ut(C,B.modal),Ir(C,I,"popup"),"string"==typeof I.customClass&&Ut(C,I.customClass),I.icon&&Ut(C,B["icon-".concat(I.icon)])},bl=C=>{const I=document.createElement("li");return Ut(I,B["progress-step"]),pn(I,C),I},Hs=C=>{const I=document.createElement("li");return Ut(I,B["progress-step-line"]),C.progressStepsDistance&&vr(I,"width",C.progressStepsDistance),I},ai=(C,I)=>{((C,I)=>{const P=ge(),G=qe();I.toast?(vr(P,"width",I.width),G.style.width="100%",G.insertBefore(ae(),Re())):vr(G,"width",I.width),vr(G,"padding",I.padding),I.color&&(G.style.color=I.color),I.background&&(G.style.background=I.background),Ke(Z()),un(G,I)})(0,I),Ge(0,I),((C,I)=>{const P=Qe();I.progressSteps&&0!==I.progressSteps.length?(kn(P),P.textContent="",I.currentProgressStep>=I.progressSteps.length&&ue("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),I.progressSteps.forEach((G,De)=>{const ot=bl(G);if(P.appendChild(ot),De===I.currentProgressStep&&Ut(ot,B["active-progress-step"]),De!==I.progressSteps.length-1){const Ln=Hs(I);P.appendChild(Ln)}})):Ke(P)})(0,I),((C,I)=>{const P=oe.innerParams.get(C),G=Re();P&&I.icon===P.icon?(ss(G,I),Es(G,I)):I.icon||I.iconHtml?I.icon&&-1===Object.keys(U).indexOf(I.icon)?(me('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(I.icon,'"')),Ke(G)):(kn(G),ss(G,I),Es(G,I),Ut(G,I.showClass.icon)):Ke(G)})(C,I),((C,I)=>{const P=Ye();I.imageUrl?(kn(P,""),P.setAttribute("src",I.imageUrl),P.setAttribute("alt",I.imageAlt),vr(P,"width",I.imageWidth),vr(P,"height",I.imageHeight),P.className=B.image,Ir(P,I,"image")):Ke(P)})(0,I),((C,I)=>{const P=Se();fi(P,I.title||I.titleText,"block"),I.title&&st(I.title,P),I.titleText&&(P.innerText=I.titleText),Ir(P,I,"title")})(0,I),((C,I)=>{const P=Xt();pn(P,I.closeButtonHtml),Ir(P,I,"closeButton"),fi(P,I.showCloseButton),P.setAttribute("aria-label",I.closeButtonAriaLabel)})(0,I),yo(C,I),W(0,I),((C,I)=>{const P=Be();fi(P,I.footer),I.footer&&st(I.footer,P),Ir(P,I,"footer")})(0,I),"function"==typeof I.didRender&&I.didRender(qe())};function os(){const C=oe.innerParams.get(this);if(!C)return;const I=oe.domCache.get(this);Ke(I.loader),Tn()?C.icon&&kn(Re()):Ti(I),Yn([I.popup,I.actions],B.loading),I.popup.removeAttribute("aria-busy"),I.popup.removeAttribute("data-loading"),I.confirmButton.disabled=!1,I.denyButton.disabled=!1,I.cancelButton.disabled=!1}const Ti=C=>{const I=C.popup.getElementsByClassName(C.loader.getAttribute("data-button-to-replace"));I.length?kn(I[0],"inline-block"):!hn(_e())&&!hn(J())&&!hn(se())&&Ke(C.actions)};const lr=()=>_e()&&_e().click(),Gi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ka=C=>{C.keydownTarget&&C.keydownHandlerAdded&&(C.keydownTarget.removeEventListener("keydown",C.keydownHandler,{capture:C.keydownListenerCapture}),C.keydownHandlerAdded=!1)},Cl=(C,I,P)=>{const G=nt();if(G.length)return(I+=P)===G.length?I=0:-1===I&&(I=G.length-1),G[I].focus();qe().focus()},Il=["ArrowRight","ArrowDown"],Qc=["ArrowLeft","ArrowUp"],Dl=(C,I,P)=>{const G=oe.innerParams.get(C);!G||I.isComposing||229===I.keyCode||(G.stopKeydownPropagation&&I.stopPropagation(),"Enter"===I.key?Tl(C,I,G):"Tab"===I.key?ur(I,G):[...Il,...Qc].includes(I.key)?Lu(I.key):"Escape"===I.key&&ch(I,G,P))},Tl=(C,I,P)=>{if(te(P.allowEnterKey)&&I.target&&C.getInput()&&I.target instanceof HTMLElement&&I.target.outerHTML===C.getInput().outerHTML){if(["textarea","file"].includes(P.input))return;lr(),I.preventDefault()}},ur=(C,I)=>{const P=C.target,G=nt();let De=-1;for(let ot=0;ot<G.length;ot++)if(P===G[ot]){De=ot;break}Cl(0,De,C.shiftKey?-1:1),C.stopPropagation(),C.preventDefault()},Lu=C=>{const I=_e(),P=J(),G=se();if(document.activeElement instanceof HTMLElement&&![I,P,G].includes(document.activeElement))return;const De=Il.includes(C)?"nextElementSibling":"previousElementSibling";let ot=document.activeElement;for(let Ln=0;Ln<He().children.length;Ln++){if(ot=ot[De],!ot)return;if(ot instanceof HTMLButtonElement&&hn(ot))break}ot instanceof HTMLButtonElement&&ot.focus()},ch=(C,I,P)=>{te(I.allowEscapeKey)&&(C.preventDefault(),P(Gi.esc))};var li={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const vo=()=>{Array.from(document.body.children).forEach(I=>{I.hasAttribute("data-previous-aria-hidden")?(I.setAttribute("aria-hidden",I.getAttribute("data-previous-aria-hidden")),I.removeAttribute("data-previous-aria-hidden")):I.removeAttribute("aria-hidden")})},Is=()=>{const C=navigator.userAgent,I=!!C.match(/iPad/i)||!!C.match(/iPhone/i),P=!!C.match(/WebKit/i);I&&P&&!C.match(/CriOS/i)&&qe().scrollHeight>window.innerHeight-44&&(ge().style.paddingBottom="".concat(44,"px"))},hh=()=>{const C=ge();let I;C.ontouchstart=P=>{I=Na(P)},C.ontouchmove=P=>{I&&(P.preventDefault(),P.stopPropagation())}},Na=C=>{const I=C.target,P=ge();return!fh(C)&&!ph(C)&&(I===P||!Di(P)&&I instanceof HTMLElement&&"INPUT"!==I.tagName&&"TEXTAREA"!==I.tagName&&!(Di(Me())&&Me().contains(I)))},fh=C=>C.touches&&C.touches.length&&"stylus"===C.touches[0].touchType,ph=C=>C.touches&&C.touches.length>1,Ds=()=>{null===Kt.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Kt.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Kt.previousBodyPadding+(()=>{const C=document.createElement("div");C.className=B["scrollbar-measure"],document.body.appendChild(C);const I=C.getBoundingClientRect().width-C.clientWidth;return document.body.removeChild(C),I})(),"px"))};function Sl(C,I,P,G){Tn()?Bu(C,G):(Jn(P).then(()=>Bu(C,G)),ka(Ue)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(I.setAttribute("style","display:none !important"),I.removeAttribute("class"),I.innerHTML=""):I.remove(),nn()&&(null!==Kt.previousBodyPadding&&(document.body.style.paddingRight="".concat(Kt.previousBodyPadding,"px"),Kt.previousBodyPadding=null),(()=>{if(xt(document.body,B.iosfix)){const C=parseInt(document.body.style.top,10);Yn(document.body,B.iosfix),document.body.style.top="",document.body.scrollTop=-1*C}})(),vo()),function Oa(){Yn([document.documentElement,document.body],[B.shown,B["height-auto"],B["no-backdrop"],B["toast-shown"]])}()}function Fa(C){C=Zo(C);const I=li.swalPromiseResolve.get(this),P=as(this);this.isAwaitingPromise()?C.isDismissed||(Ai(this),I(C)):P&&I(C)}const as=C=>{const I=qe();if(!I)return!1;const P=oe.innerParams.get(C);if(!P||xt(I,P.hideClass.popup))return!1;Yn(I,P.showClass.popup),Ut(I,P.hideClass.popup);const G=ge();return Yn(G,P.showClass.backdrop),Ut(G,P.hideClass.backdrop),La(C,I,P),!0};const Ai=C=>{C.isAwaitingPromise()&&(oe.awaitingPromise.delete(C),oe.innerParams.get(C)||C._destroy())},Zo=C=>typeof C>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},C),La=(C,I,P)=>{const G=ge(),De=Et&&jn(I);"function"==typeof P.willClose&&P.willClose(I),De?xl(C,I,G,P.returnFocus,P.didClose):Sl(C,G,P.returnFocus,P.didClose)},xl=(C,I,P,G,De)=>{Ue.swalCloseEventFinishedCallback=Sl.bind(null,C,P,G,De),I.addEventListener(Et,function(ot){ot.target===I&&(Ue.swalCloseEventFinishedCallback(),delete Ue.swalCloseEventFinishedCallback)})},Bu=(C,I)=>{setTimeout(()=>{"function"==typeof I&&I.bind(C.params)(),C._destroy()})};function wo(C,I,P){const G=oe.domCache.get(C);I.forEach(De=>{G[De].disabled=P})}function Wi(C,I){if(C)if("radio"===C.type){const G=C.parentNode.parentNode.querySelectorAll("input");for(let De=0;De<G.length;De++)G[De].disabled=I}else C.disabled=I}const Dn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Va=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],ed={},mi=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Lr=C=>Object.prototype.hasOwnProperty.call(Dn,C),Ko=C=>-1!==Va.indexOf(C),us=C=>ed[C],cs=C=>{Lr(C)||ue('Unknown parameter "'.concat(C,'"'))},rn=C=>{mi.includes(C)&&ue('The parameter "'.concat(C,'" is incompatible with toasts'))},Ua=C=>{us(C)&&Y(C,us(C))};const Si=C=>{const I={};return Object.keys(C).forEach(P=>{Ko(P)?I[P]=C[P]:ue("Invalid parameter to update: ".concat(P))}),I};const Gn=C=>{Rt(C),delete C.params,delete Ue.keydownHandler,delete Ue.keydownTarget,delete Ue.currentInstance},Rt=C=>{C.isAwaitingPromise()?(Eo(oe,C),oe.awaitingPromise.set(C,!0)):(Eo(li,C),Eo(oe,C))},Eo=(C,I)=>{for(const P in C)C[P].delete(I)};var Hu=Object.freeze({hideLoading:os,disableLoading:os,getInput:function Xn(C){const I=oe.innerParams.get(C||this),P=oe.domCache.get(C||this);return P?si(P.popup,I.input):null},close:Fa,isAwaitingPromise:function qi(){return!!oe.awaitingPromise.get(this)},rejectPromise:function ls(C){const I=li.swalPromiseReject.get(this);Ai(this),I&&I(C)},handleAwaitingPromise:Ai,closePopup:Fa,closeModal:Fa,closeToast:Fa,enableButtons:function gi(){wo(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function ui(){wo(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function bo(){Wi(this.getInput(),!1)},disableInput:function ju(){Wi(this.getInput(),!0)},showValidationMessage:function Tr(C){const I=oe.domCache.get(this),P=oe.innerParams.get(this);pn(I.validationMessage,C),I.validationMessage.className=B["validation-message"],P.customClass&&P.customClass.validationMessage&&Ut(I.validationMessage,P.customClass.validationMessage),kn(I.validationMessage);const G=this.getInput();G&&(G.setAttribute("aria-invalid",!0),G.setAttribute("aria-describedby",B["validation-message"]),Dr(G),Ut(G,B.inputerror))},resetValidationMessage:function Jc(){const C=oe.domCache.get(this);C.validationMessage&&Ke(C.validationMessage);const I=this.getInput();I&&(I.removeAttribute("aria-invalid"),I.removeAttribute("aria-describedby"),Yn(I,B.inputerror))},getProgressSteps:function Xc(){return oe.domCache.get(this).progressSteps},update:function Ba(C){const I=qe(),P=oe.innerParams.get(this);if(!I||xt(I,P.hideClass.popup))return ue("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const G=Si(C),De=Object.assign({},P,G);ai(this,De),oe.innerParams.set(this,De),Object.defineProperties(this,{params:{value:Object.assign({},this.params,C),writable:!1,enumerable:!0}})},_destroy:function ja(){const C=oe.domCache.get(this),I=oe.innerParams.get(this);I?(C.popup&&Ue.swalCloseEventFinishedCallback&&(Ue.swalCloseEventFinishedCallback(),delete Ue.swalCloseEventFinishedCallback),"function"==typeof I.didDestroy&&I.didDestroy(),Gn(this)):Rt(this)}});const ds=C=>{let I=qe();I||new er,I=qe();const P=ae();Tn()?Ke(Re()):Ha(I,C),kn(P),I.setAttribute("data-loading","true"),I.setAttribute("aria-busy","true"),I.focus()},Ha=(C,I)=>{const P=He(),G=ae();!I&&hn(_e())&&(I=_e()),kn(P),I&&(Ke(I),G.setAttribute("data-button-to-replace",I.className)),G.parentNode.insertBefore(G,I),Ut([C,P],B.loading)},Rl=C=>C.checked?1:0,Yo=C=>C.checked?C.value:null,ke=C=>C.files.length?null!==C.getAttribute("multiple")?C.files:C.files[0]:null,Yt=(C,I)=>{const P=qe(),G=De=>{Ga[I.input](P,On(De),I)};$e(I.inputOptions)||xe(I.inputOptions)?(ds(_e()),Ne(I.inputOptions).then(De=>{C.hideLoading(),G(De)})):"object"==typeof I.inputOptions?G(I.inputOptions):me("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof I.inputOptions))},$a=(C,I)=>{const P=C.getInput();Ke(P),Ne(I.inputValue).then(G=>{P.value="".concat("number"===I.input?parseFloat(G)||0:G),kn(P),P.focus(),C.hideLoading()}).catch(G=>{me("Error in inputValue promise: ".concat(G)),P.value="",kn(P),P.focus(),C.hideLoading()})},Ga={select:(C,I,P)=>{const G=Qn(C,B.select),De=(ot,Ln,gn)=>{const Sn=document.createElement("option");Sn.value=gn,pn(Sn,Ln),Sn.selected=Qo(gn,P.inputValue),ot.appendChild(Sn)};I.forEach(ot=>{const Ln=ot[0],gn=ot[1];if(Array.isArray(gn)){const Sn=document.createElement("optgroup");Sn.label=Ln,Sn.disabled=!1,G.appendChild(Sn),gn.forEach(ps=>De(Sn,ps[1],ps[0]))}else De(G,gn,Ln)}),G.focus()},radio:(C,I,P)=>{const G=Qn(C,B.radio);I.forEach(ot=>{const Ln=ot[0],gn=ot[1],Sn=document.createElement("input"),ps=document.createElement("label");Sn.type="radio",Sn.name=B.radio,Sn.value=Ln,Qo(Ln,P.inputValue)&&(Sn.checked=!0);const gs=document.createElement("span");pn(gs,gn),gs.className=B.label,ps.appendChild(Sn),ps.appendChild(gs),G.appendChild(ps)});const De=G.querySelectorAll("input");De.length&&De[0].focus()}},On=C=>{const I=[];return typeof Map<"u"&&C instanceof Map?C.forEach((P,G)=>{let De=P;"object"==typeof De&&(De=On(De)),I.push([G,De])}):Object.keys(C).forEach(P=>{let G=C[P];"object"==typeof G&&(G=On(G)),I.push([P,G])}),I},Qo=(C,I)=>I&&I.toString()===C.toString(),Io=(C,I)=>{const P=oe.innerParams.get(C);if(!P.input)return void me('The "input" parameter is needed to be set when using returnInputValueOn'.concat(ye(I)));const G=((C,I)=>{const P=C.getInput();if(!P)return null;switch(I.input){case"checkbox":return Rl(P);case"radio":return Yo(P);case"file":return ke(P);default:return I.inputAutoTrim?P.value.trim():P.value}})(C,P);P.inputValidator?Pl(C,G,I):C.getInput().checkValidity()?"deny"===I?Xo(C,G):Fn(C,G):(C.enableButtons(),C.showValidationMessage(P.validationMessage))},Pl=(C,I,P)=>{const G=oe.innerParams.get(C);C.disableInput(),Promise.resolve().then(()=>Ne(G.inputValidator(I,G.validationMessage))).then(ot=>{C.enableButtons(),C.enableInput(),ot?C.showValidationMessage(ot):"deny"===P?Xo(C,I):Fn(C,I)})},Xo=(C,I)=>{const P=oe.innerParams.get(C||void 0);P.showLoaderOnDeny&&ds(J()),P.preDeny?(oe.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>Ne(P.preDeny(I,P.validationMessage))).then(De=>{!1===De?(C.hideLoading(),Ai(C)):C.close({isDenied:!0,value:typeof De>"u"?I:De})}).catch(De=>Do(C||void 0,De))):C.close({isDenied:!0,value:I})},kl=(C,I)=>{C.close({isConfirmed:!0,value:I})},Do=(C,I)=>{C.rejectPromise(I)},Fn=(C,I)=>{const P=oe.innerParams.get(C||void 0);P.showLoaderOnConfirm&&ds(),P.preConfirm?(C.resetValidationMessage(),oe.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>Ne(P.preConfirm(I,P.validationMessage))).then(De=>{hn(Z())||!1===De?(C.hideLoading(),Ai(C)):kl(C,typeof De>"u"?I:De)}).catch(De=>Do(C||void 0,De))):kl(C,I)},Nl=(C,I,P)=>{I.popup.onclick=()=>{const G=oe.innerParams.get(C);G&&(Gs(G)||G.timer||G.input)||P(Gi.close)}},Gs=C=>C.showConfirmButton||C.showDenyButton||C.showCancelButton||C.showCloseButton;let yi=!1;const gh=C=>{C.popup.onmousedown=()=>{C.container.onmouseup=function(I){C.container.onmouseup=void 0,I.target===C.container&&(yi=!0)}}},ea=C=>{C.container.onmousedown=()=>{C.popup.onmouseup=function(I){C.popup.onmouseup=void 0,(I.target===C.popup||C.popup.contains(I.target))&&(yi=!0)}}},mh=(C,I,P)=>{I.container.onclick=G=>{const De=oe.innerParams.get(C);yi?yi=!1:G.target===I.container&&te(De.allowOutsideClick)&&P(Gi.backdrop)}},ta=C=>C instanceof Element||(C=>"object"==typeof C&&C.jquery)(C);const ia=()=>{if(Ue.timeout)return(()=>{const C=yt(),I=parseInt(window.getComputedStyle(C).width);C.style.removeProperty("transition"),C.style.width="100%";const G=I/parseInt(window.getComputedStyle(C).width)*100;C.style.removeProperty("transition"),C.style.width="".concat(G,"%")})(),Ue.timeout.stop()},sa=()=>{if(Ue.timeout){const C=Ue.timeout.start();return Wn(C),C}};let jl=!1;const fs={};const qa=C=>{for(let I=C.target;I&&I!==document;I=I.parentNode)for(const P in fs){const G=I.getAttribute(P);if(G)return void fs[P].fire({template:G})}};var cr=Object.freeze({isValidParameter:Lr,isUpdatableParameter:Ko,isDeprecatedParameter:us,argsToParams:C=>{const I={};return"object"!=typeof C[0]||ta(C[0])?["title","html","icon"].forEach((P,G)=>{const De=C[G];"string"==typeof De||ta(De)?I[P]=De:void 0!==De&&me("Unexpected type of ".concat(P,'! Expected "string" or "Element", got ').concat(typeof De))}):Object.assign(I,C[0]),I},isVisible:()=>hn(qe()),clickConfirm:lr,clickDeny:()=>J()&&J().click(),clickCancel:()=>se()&&se().click(),getContainer:ge,getPopup:qe,getTitle:Se,getHtmlContainer:Me,getImage:Ye,getIcon:Re,getInputLabel:()=>et(B["input-label"]),getCloseButton:Xt,getActions:He,getConfirmButton:_e,getDenyButton:J,getCancelButton:se,getLoader:ae,getFooter:Be,getTimerProgressBar:yt,getFocusableElements:nt,getValidationMessage:Z,isLoading:()=>qe().hasAttribute("data-loading"),fire:function Fl(){const C=this;for(var I=arguments.length,P=new Array(I),G=0;G<I;G++)P[G]=arguments[G];return new C(...P)},mixin:function ra(C){return class I extends(this){_main(G,De){return super._main(G,Object.assign({},C,De))}}},showLoading:ds,enableLoading:ds,getTimerLeft:()=>Ue.timeout&&Ue.timeout.getTimerLeft(),stopTimer:ia,resumeTimer:sa,toggleTimer:()=>{const C=Ue.timeout;return C&&(C.running?ia():sa())},increaseTimer:C=>{if(Ue.timeout){const I=Ue.timeout.increase(C);return Wn(I,!0),I}},isTimerRunning:()=>Ue.timeout&&Ue.timeout.isRunning(),bindClickHandler:function qs(){fs[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,jl||(document.body.addEventListener("click",qa),jl=!0)}});class ci{constructor(I,P){this.callback=I,this.remaining=P,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(I){const P=this.running;return P&&this.stop(),this.remaining+=I,P&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const An=["swal-title","swal-html","swal-footer"],$l=C=>{const I={};return Array.from(C.querySelectorAll("swal-param")).forEach(G=>{vi(G,["name","value"]);const De=G.getAttribute("name"),ot=G.getAttribute("value");"boolean"==typeof Dn[De]&&(I[De]="false"!==ot),"object"==typeof Dn[De]&&(I[De]=JSON.parse(ot))}),I},$u=C=>{const I={};return Array.from(C.querySelectorAll("swal-button")).forEach(G=>{vi(G,["type","color","aria-label"]);const De=G.getAttribute("type");I["".concat(De,"ButtonText")]=G.innerHTML,I["show".concat(ye(De),"Button")]=!0,G.hasAttribute("color")&&(I["".concat(De,"ButtonColor")]=G.getAttribute("color")),G.hasAttribute("aria-label")&&(I["".concat(De,"ButtonAriaLabel")]=G.getAttribute("aria-label"))}),I},Gl=C=>{const I={},P=C.querySelector("swal-image");return P&&(vi(P,["src","width","height","alt"]),P.hasAttribute("src")&&(I.imageUrl=P.getAttribute("src")),P.hasAttribute("width")&&(I.imageWidth=P.getAttribute("width")),P.hasAttribute("height")&&(I.imageHeight=P.getAttribute("height")),P.hasAttribute("alt")&&(I.imageAlt=P.getAttribute("alt"))),I},Wa=C=>{const I={},P=C.querySelector("swal-icon");return P&&(vi(P,["type","color"]),P.hasAttribute("type")&&(I.icon=P.getAttribute("type")),P.hasAttribute("color")&&(I.iconColor=P.getAttribute("color")),I.iconHtml=P.innerHTML),I},Gu=C=>{const I={},P=C.querySelector("swal-input");P&&(vi(P,["type","label","placeholder","value"]),I.input=P.getAttribute("type")||"text",P.hasAttribute("label")&&(I.inputLabel=P.getAttribute("label")),P.hasAttribute("placeholder")&&(I.inputPlaceholder=P.getAttribute("placeholder")),P.hasAttribute("value")&&(I.inputValue=P.getAttribute("value")));const G=Array.from(C.querySelectorAll("swal-input-option"));return G.length&&(I.inputOptions={},G.forEach(De=>{vi(De,["value"]);const ot=De.getAttribute("value");I.inputOptions[ot]=De.innerHTML})),I},za=(C,I)=>{const P={};for(const G in I){const De=I[G],ot=C.querySelector(De);ot&&(vi(ot,[]),P[De.replace(/^swal-/,"")]=ot.innerHTML.trim())}return P},Ws=C=>{const I=An.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(C.children).forEach(P=>{const G=P.tagName.toLowerCase();I.includes(G)||ue("Unrecognized element <".concat(G,">"))})},vi=(C,I)=>{Array.from(C.attributes).forEach(P=>{-1===I.indexOf(P.name)&&ue(['Unrecognized attribute "'.concat(P.name,'" on <').concat(C.tagName.toLowerCase(),">."),"".concat(I.length?"Allowed attributes are: ".concat(I.join(", ")):"To set the value, use HTML within the element.")])})},To=C=>{const I=ge(),P=qe();"function"==typeof C.willOpen&&C.willOpen(P);const De=window.getComputedStyle(document.body).overflowY;zs(I,P,C),setTimeout(()=>{Ts(I,P)},10),nn()&&(As(I,C.scrollbarPadding,De),Array.from(document.body.children).forEach(I=>{I===ge()||I.contains(ge())||(I.hasAttribute("aria-hidden")&&I.setAttribute("data-previous-aria-hidden",I.getAttribute("aria-hidden")),I.setAttribute("aria-hidden","true"))})),!Tn()&&!Ue.previousActiveElement&&(Ue.previousActiveElement=document.activeElement),"function"==typeof C.didOpen&&setTimeout(()=>C.didOpen(P)),Yn(I,B["no-transition"])},Wl=C=>{const I=qe();if(C.target!==I)return;const P=ge();I.removeEventListener(Et,Wl),P.style.overflowY="auto"},Ts=(C,I)=>{Et&&jn(I)?(C.style.overflowY="hidden",I.addEventListener(Et,Wl)):C.style.overflowY="auto"},As=(C,I,P)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!xt(document.body,B.iosfix)){const I=document.body.scrollTop;document.body.style.top="".concat(-1*I,"px"),Ut(document.body,B.iosfix),hh(),Is()}})(),I&&"hidden"!==P&&Ds(),setTimeout(()=>{C.scrollTop=0})},zs=(C,I,P)=>{Ut(C,P.showClass.backdrop),I.style.setProperty("opacity","0","important"),kn(I,"grid"),setTimeout(()=>{Ut(I,P.showClass.popup),I.style.removeProperty("opacity")},10),Ut([document.documentElement,document.body],B.shown),P.heightAuto&&P.backdrop&&!P.toast&&Ut([document.documentElement,document.body],B["height-auto"])};var oa={email:(C,I)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(C)?Promise.resolve():Promise.resolve(I||"Invalid email address"),url:(C,I)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(C)?Promise.resolve():Promise.resolve(I||"Invalid URL")};function Ka(C){(function Zn(C){C.inputValidator||Object.keys(oa).forEach(I=>{C.input===I&&(C.inputValidator=oa[I])})})(C),C.showLoaderOnConfirm&&!C.preConfirm&&ue("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Za(C){(!C.target||"string"==typeof C.target&&!document.querySelector(C.target)||"string"!=typeof C.target&&!C.target.appendChild)&&(ue('Target parameter is not valid, defaulting to "body"'),C.target="body")}(C),"string"==typeof C.title&&(C.title=C.title.split("\n").join("<br />")),Kr(C)}let xi;class Ao{constructor(){if(typeof window>"u")return;xi=this;for(var I=arguments.length,P=new Array(I),G=0;G<I;G++)P[G]=arguments[G];const De=Object.freeze(this.constructor.argsToParams(P));Object.defineProperties(this,{params:{value:De,writable:!1,enumerable:!0,configurable:!0}});const ot=xi._main(xi.params);oe.promise.set(this,ot)}_main(I){let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(C=>{!C.backdrop&&C.allowOutsideClick&&ue('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const I in C)cs(I),C.toast&&rn(I),Ua(I)})(Object.assign({},P,I)),Ue.currentInstance&&(Ue.currentInstance._destroy(),nn()&&vo()),Ue.currentInstance=xi;const G=xo(I,P);Ka(G),Object.freeze(G),Ue.timeout&&(Ue.timeout.stop(),delete Ue.timeout),clearTimeout(Ue.restoreFocusTimeout);const De=Zs(xi);return ai(xi,G),oe.innerParams.set(xi,G),So(xi,De,G)}then(I){return oe.promise.get(this).then(I)}finally(I){return oe.promise.get(this).finally(I)}}const So=(C,I,P)=>new Promise((G,De)=>{const ot=Ln=>{C.close({isDismissed:!0,dismiss:Ln})};li.swalPromiseResolve.set(C,G),li.swalPromiseReject.set(C,De),I.confirmButton.onclick=()=>{(C=>{const I=oe.innerParams.get(C);C.disableButtons(),I.input?Io(C,"confirm"):Fn(C,!0)})(C)},I.denyButton.onclick=()=>{(C=>{const I=oe.innerParams.get(C);C.disableButtons(),I.returnInputValueOnDeny?Io(C,"deny"):Xo(C,!1)})(C)},I.cancelButton.onclick=()=>{((C,I)=>{C.disableButtons(),I(Gi.cancel)})(C,ot)},I.closeButton.onclick=()=>{ot(Gi.close)},((C,I,P)=>{oe.innerParams.get(C).toast?Nl(C,I,P):(gh(I),ea(I),mh(C,I,P))})(C,I,ot),((C,I,P,G)=>{ka(I),P.toast||(I.keydownHandler=De=>Dl(C,De,G),I.keydownTarget=P.keydownListenerCapture?window:qe(),I.keydownListenerCapture=P.keydownListenerCapture,I.keydownTarget.addEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!0)})(C,Ue,P,ot),((C,I)=>{"select"===I.input||"radio"===I.input?Yt(C,I):["text","email","number","tel","textarea"].includes(I.input)&&($e(I.inputValue)||xe(I.inputValue))&&(ds(_e()),$a(C,I))})(C,P),To(P),Ya(Ue,P,ot),aa(I,P),setTimeout(()=>{I.container.scrollTop=0})}),xo=(C,I)=>{const P=(C=>{const I="string"==typeof C.template?document.querySelector(C.template):C.template;if(!I)return{};const P=I.content;return Ws(P),Object.assign($l(P),$u(P),Gl(P),Wa(P),Gu(P),za(P,An))})(C),G=Object.assign({},Dn,I,P,C);return G.showClass=Object.assign({},Dn.showClass,G.showClass),G.hideClass=Object.assign({},Dn.hideClass,G.hideClass),G},Zs=C=>{const I={popup:qe(),container:ge(),actions:He(),confirmButton:_e(),denyButton:J(),cancelButton:se(),loader:ae(),closeButton:Xt(),validationMessage:Z(),progressSteps:Qe()};return oe.domCache.set(C,I),I},Ya=(C,I,P)=>{const G=yt();Ke(G),I.timer&&(C.timeout=new ci(()=>{P("timer"),delete C.timeout},I.timer),I.timerProgressBar&&(kn(G),Ir(G,I,"timerProgressBar"),setTimeout(()=>{C.timeout&&C.timeout.running&&Wn(I.timer)})))},aa=(C,I)=>{if(!I.toast){if(!te(I.allowEnterKey))return void Wu();qu(C,I)||Cl(0,-1,1)}},qu=(C,I)=>I.focusDeny&&hn(C.denyButton)?(C.denyButton.focus(),!0):I.focusCancel&&hn(C.cancelButton)?(C.cancelButton.focus(),!0):!(!I.focusConfirm||!hn(C.confirmButton)||(C.confirmButton.focus(),0)),Wu=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&Math.random()<.3){const C=document.createElement("div");C.className="save-yourself-from-war";const I=(C=>C[Math.floor(Math.random()*C.length)])([{text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0441\u0435\u0439\u0447\u0430\u0441 - \u043d\u0435 \u043f\u043e\u043f\u0430\u0441\u0442\u044c \u043d\u0430 \u0432\u043e\u0439\u043d\u0443 \u0438 \u043f\u043e\u043c\u043e\u0447\u044c \u0441\u0432\u043e\u0438\u043c \u0431\u043b\u0438\u0436\u043d\u0438\u043c \u043d\u0435 \u0431\u044b\u0442\u044c \u043c\u043e\u0431\u0438\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b\u043c\u0438.",id:"X39ZkynPjpQ"}]);pn(C,"<div>".concat(I.text,'</div>\n      <iframe width="560" height="315" src="https://www.youtube.com/embed/').concat(I.id,'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n      <div>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0441\u0435\u0431\u044f \u0438 \u0441\u0432\u043e\u0438\u0445 \u0431\u043b\u0438\u0437\u043a\u0438\u0445!</div>\n      '));const P=document.createElement("button");P.innerHTML="&times;",P.onclick=()=>C.remove(),C.appendChild(P),window.addEventListener("load",()=>{setTimeout(()=>{document.body.appendChild(C)},1e3)})}Object.assign(Ao.prototype,Hu),Object.assign(Ao,cr),Object.keys(Hu).forEach(C=>{Ao[C]=function(){if(xi)return xi[C](...arguments)}}),Ao.DismissReason=Gi,Ao.version="11.4.37";const er=Ao;return er.default=er,er}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(oe,V){var d=oe.createElement("style");if(oe.getElementsByTagName("head")[0].appendChild(d),d.styleSheet)d.styleSheet.disabled||(d.styleSheet.cssText=V);else try{d.innerHTML=V}catch{d.innerText=V}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:0 0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:0 0;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:0 0;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:0 0;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.save-yourself-from-war{display:flex;position:fixed;z-index:1939;top:0;right:0;bottom:0;left:0;flex-direction:column;align-items:center;justify-content:center;padding:25px 0 20px;background:#20232a;color:#fff;text-align:center}.save-yourself-from-war div{max-width:560px;margin:10px;line-height:146%}.save-yourself-from-war iframe{max-width:100%;max-height:55.5555555556vmin;margin:16px auto}.save-yourself-from-war strong{border-bottom:2px dashed #fff}.save-yourself-from-war button{display:flex;position:fixed;z-index:1940;top:0;right:0;align-items:center;justify-content:center;width:48px;height:48px;margin-right:10px;margin-bottom:-10px;border:none;background:0 0;color:#aaa;font-size:48px;font-weight:700;cursor:pointer}.save-yourself-from-war button:hover{color:#fff}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},9163:ht=>{function oe(V){var d=new Error("Cannot find module '"+V+"'");throw d.code="MODULE_NOT_FOUND",d}oe.keys=()=>[],oe.resolve=oe,oe.id=9163,ht.exports=oe},655:(ht,oe,V)=>{"use strict";function ce(J,re){var ae={};for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&re.indexOf(se)<0&&(ae[se]=J[se]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(se=Object.getOwnPropertySymbols(J);He<se.length;He++)re.indexOf(se[He])<0&&Object.prototype.propertyIsEnumerable.call(J,se[He])&&(ae[se[He]]=J[se[He]])}return ae}function me(J,re,ae,se){return new(ae||(ae=Promise))(function(Be,yt){function Xt(nn){try{nt(se.next(nn))}catch(Tn){yt(Tn)}}function zt(nn){try{nt(se.throw(nn))}catch(Tn){yt(Tn)}}function nt(nn){nn.done?Be(nn.value):function He(Be){return Be instanceof ae?Be:new ae(function(yt){yt(Be)})}(nn.value).then(Xt,zt)}nt((se=se.apply(J,re||[])).next())})}function ge(J){return this instanceof ge?(this.v=J,this):new ge(J)}function ve(J,re,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,se=ae.apply(J,re||[]),Be=[];return He={},yt("next"),yt("throw"),yt("return"),He[Symbol.asyncIterator]=function(){return this},He;function yt(sn){se[sn]&&(He[sn]=function(Kt){return new Promise(function(pn,xt){Be.push([sn,Kt,pn,xt])>1||Xt(sn,Kt)})})}function Xt(sn,Kt){try{!function zt(sn){sn.value instanceof ge?Promise.resolve(sn.value.v).then(nt,nn):Tn(Be[0][2],sn)}(se[sn](Kt))}catch(pn){Tn(Be[0][3],pn)}}function nt(sn){Xt("next",sn)}function nn(sn){Xt("throw",sn)}function Tn(sn,Kt){sn(Kt),Be.shift(),Be.length&&Xt(Be[0][0],Be[0][1])}}function qe(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,re=J[Symbol.asyncIterator];return re?re.call(J):(J=function te(J){var re="function"==typeof Symbol&&Symbol.iterator,ae=re&&J[re],se=0;if(ae)return ae.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&se>=J.length&&(J=void 0),{value:J&&J[se++],done:!J}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ae={},se("next"),se("throw"),se("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function se(Be){ae[Be]=J[Be]&&function(yt){return new Promise(function(Xt,zt){!function He(Be,yt,Xt,zt){Promise.resolve(zt).then(function(nt){Be({value:nt,done:Xt})},yt)}(Xt,zt,(yt=J[Be](yt)).done,yt.value)})}}}V.d(oe,{FC:()=>ve,KL:()=>qe,_T:()=>ce,mG:()=>me,qq:()=>ge})},4650:(ht,oe,V)=>{"use strict";V.d(oe,{$8M:()=>Qu,$Z:()=>kA,AFp:()=>xf,ALo:()=>Fs,AaK:()=>me,AsE:()=>lw,CHM:()=>$a,CRH:()=>a0,CZH:()=>Sf,CqO:()=>gS,D6c:()=>vD,EJc:()=>tr,EpF:()=>fS,F4k:()=>pS,FYo:()=>R,FiY:()=>Je,G48:()=>Q_,GfV:()=>Ze,Gpc:()=>Y,JOm:()=>va,KtG:()=>Ga,LFG:()=>ir,LSH:()=>Cm,Lbi:()=>eD,Lck:()=>Uw,MAs:()=>Hr,MMx:()=>Sr,NdJ:()=>kC,O4$:()=>Hl,OlP:()=>Vn,Oqu:()=>Bo,PXZ:()=>aD,Q6J:()=>Qp,QGY:()=>PC,QP$:()=>Hn,Qsj:()=>F,R0b:()=>Ho,RDi:()=>Yb,Rgc:()=>xr,SBq:()=>p,Sil:()=>xg,Suo:()=>Gd,TTD:()=>ls,TgZ:()=>Xp,X6Q:()=>gr,XFs:()=>Ke,Xpm:()=>Pe,Xts:()=>pp,Y36:()=>Ad,YKP:()=>Cg,YNc:()=>MC,Yjl:()=>le,Yz7:()=>Kt,Z0I:()=>Ir,ZZ4:()=>ty,_Bn:()=>Eg,_UZ:()=>uf,_Vd:()=>fc,_c5:()=>Ii,_uU:()=>ig,aQg:()=>F0,c2e:()=>nD,cJS:()=>xt,cg1:()=>lg,dDg:()=>iD,dqk:()=>vn,eFA:()=>S0,ekj:()=>jt,eoX:()=>Z_,f3M:()=>T,g9A:()=>Rf,h0i:()=>hl,hGG:()=>L0,hij:()=>cf,iGM:()=>o0,ifc:()=>Ue,ip1:()=>Fc,jDz:()=>xI,kL8:()=>Ei,kcU:()=>$u,lG2:()=>Ae,lcZ:()=>Hd,lqb:()=>Oi,lri:()=>I0,n5z:()=>Ys,oAB:()=>W,oxw:()=>rw,q4F:()=>at,qLn:()=>Ip,qOj:()=>Jv,qZA:()=>lf,rWj:()=>Jd,s9C:()=>ow,sBO:()=>kg,sIi:()=>zp,s_b:()=>je,soG:()=>Sg,tb:()=>tD,tp0:()=>Mt,uIk:()=>Xv,vHH:()=>xe,vpe:()=>lo,wAp:()=>kt,xDo:()=>y_,xp6:()=>SE,z2F:()=>Su,zSh:()=>lu,zs3:()=>mu});var d=V(7579),B=V(727),U=V(9751),ce=V(6451),de=V(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function me(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(me).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function Ee(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=ye({__forward_ref__:ye});function Y(s){return s.__forward_ref__=Y,s.toString=function(){return me(this())},s}function te(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===Y}class xe extends Error{constructor(o,l){super(function ut(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Se(s,o){throw new xe(-201,!1)}function zt(s,o){null==s&&function nt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Kt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function on(s){return si(s,Yn)||si(s,vr)}function Ir(s){return null!==on(s)}function si(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ut(s){return s&&(s.hasOwnProperty(Qn)||s.hasOwnProperty(kn))?s[Qn]:null}const Yn=ye({\u0275prov:ye}),Qn=ye({\u0275inj:ye}),vr=ye({ngInjectableDef:ye}),kn=ye({ngInjectorDef:ye});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let zr;function hn(s){const o=zr;return zr=s,o}function pi(s,o,l){const c=on(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Ke.Optional?null:void 0!==o?o:void Se(me(s))}function jn(s){return{toString:s}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),Ue=(()=>{return(s=Ue||(Ue={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ue;var s})();const vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zr={},Pt=[],Or=ye({\u0275cmp:ye}),an=ye({\u0275dir:ye}),Hi=ye({\u0275pipe:ye}),ln=ye({\u0275mod:ye}),ar=ye({\u0275fac:ye}),Kr=ye({__NG_ELEMENT_ID__:ye});let st=0;function Pe(s){return jn(()=>{const l=!0===s.standalone,c={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Pt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ue.Emulated,id:"c"+st++,styles:s.styles||Pt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return f.inputs=ee(s.inputs,c),f.outputs=ee(s.outputs),v&&v.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Et).filter(At):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map($t).filter(At):null,f})}function Et(s){return Ge(s)||vt(s)}function At(s){return null!==s}function W(s){return jn(()=>({type:s.type,bootstrap:s.bootstrap||Pt,declarations:s.declarations||Pt,imports:s.imports||Pt,exports:s.exports||Pt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ee(s,o){if(null==s)return Zr;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=c,o&&(o[f]=g)}return l}const Ae=Pe;function le(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ge(s){return s[Or]||null}function vt(s){return s[an]||null}function $t(s){return s[Hi]||null}function Hn(s){const o=Ge(s)||vt(s)||$t(s);return null!==o&&o.standalone}function wn(s,o){const l=s[ln]||null;if(!l&&!0===o)throw new Error(`Type ${me(s)} does not have '\u0275mod' property.`);return l}function lr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Qr(s){return Array.isArray(s)&&!0===s[1]}function Pa(s){return 0!=(8&s.flags)}function Gi(s){return 2==(2&s.flags)}function ka(s){return 1==(1&s.flags)}function Fr(s){return null!==s.template}function Cl(s){return 0!=(256&s[2])}function qi(s,o){return s.hasOwnProperty(ar)?s[ar]:null}class as{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function ls(){return Ai}function Ai(s){return s.type.prototype.ngOnChanges&&(s.setInput=La),Zo}function Zo(){const s=Bu(this),o=s?.current;if(o){const l=s.previous;if(l===Zr)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function La(s,o,l,c){const f=Bu(s)||function wo(s,o){return s[xl]=o}(s,{previous:Zr,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[l],D=v[E];g[E]=new as(D&&D.currentValue,o,v===Zr),s[c]=o}ls.ngInherit=!0;const xl="__ngSimpleChanges__";function Bu(s){return s[xl]||null}function Dn(s){for(;Array.isArray(s);)s=s[0];return s}function mi(s,o){return Dn(o[s])}function Lr(s,o){return Dn(o[s.index])}function us(s,o){return s.data[o]}function cs(s,o){return s[o]}function rn(s,o){const l=o[s];return lr(l)?l:l[0]}function $s(s){return 64==(64&s[2])}function Si(s,o){return null==o?null:s[o]}function ja(s){s[18]=0}function Gn(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Rt={lFrame:Ul(null),bindingsEnabled:!0};function hs(){return Rt.bindingsEnabled}function ke(){return Rt.lFrame.lView}function Yt(){return Rt.lFrame.tView}function $a(s){return Rt.lFrame.contextLView=s,s[8]}function Ga(s){return Rt.lFrame.contextLView=null,s}function On(){let s=Qo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Qo(){return Rt.lFrame.currentTNode}function _i(s,o){const l=Rt.lFrame;l.currentTNode=s,l.isParent=o}function Jo(){return Rt.lFrame.isParent}function zi(){return Rt.lFrame.bindingIndex}function Gs(){return Rt.lFrame.bindingIndex++}function yi(s){const o=Rt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function mh(s,o){const l=Rt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ta(o)}function ta(s){Rt.lFrame.currentDirectiveIndex=s}function Fl(){return Rt.lFrame.currentQueryIndex}function ra(s){Rt.lFrame.currentQueryIndex=s}function Ll(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ia(s,o,l){if(l&Ke.SkipSelf){let f=o,g=s;for(;!(f=f.parent,null!==f||l&Ke.Host||(f=Ll(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;o=f,s=g}const c=Rt.lFrame=Vl();return c.currentTNode=o,c.lView=s,!0}function sa(s){const o=Vl(),l=s[1];Rt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Vl(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Ul(s):o}function Ul(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Bl(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const jl=Bl;function fs(){const s=Bl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function cr(){return Rt.lFrame.selectedIndex}function ci(s){Rt.lFrame.selectedIndex=s}function An(){const s=Rt.lFrame;return us(s.tView,s.selectedIndex)}function Hl(){Rt.lFrame.currentNamespace="svg"}function $u(){!function Gl(){Rt.lFrame.currentNamespace=null}()}function za(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:O}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function Ws(s,o,l){To(s,o,3,l)}function vi(s,o,l,c){(3&s[2])===l&&To(s,o,l,c)}function ql(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function To(s,o,l,c){const g=c??-1,v=o.length-1;let E=0;for(let D=void 0!==c?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=c&&E>=c)break}else o[D]<0&&(s[18]+=65536),(E<g||-1==g)&&(Wl(s,l,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Wl(s,o,l,c){const f=l[c]<0,g=l[c+1],E=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class As{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function xo(s,o,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const g=l[c++],v=l[c++],E=l[c++];s.setAttribute(o,v,E,g)}else{const g=f,v=l[++c];Ya(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function Zs(s){return 3===s||4===s||6===s}function Ya(s){return 64===s.charCodeAt(0)}function aa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const f=o[c];"number"==typeof f?l=f:0===l||qu(s,l,f,null,-1===l||2===l?o[++c]:null)}}return s}function qu(s,o,l,c,f){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===c)return void(null!==f&&(s[g+1]=f));if(c===s[g+1])return void(s[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==f&&s.splice(g++,0,f)}function Wu(s){return-1!==s}function er(s){return 32767&s}function I(s,o){let l=function C(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let P=!0;function G(s){const o=P;return P=s,o}let gn=0;const Sn={};function gs(s,o){const l=zu(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,zl(c.data,s),zl(o,null),zl(c.blueprint,null));const f=Zu(s,o),g=s.injectorIndex;if(Wu(f)){const v=er(f),E=I(f,o),D=E[1].data;for(let M=0;M<8;M++)o[g+M]=E[v+M]|D[v+M]}return o[g+8]=f,g}function zl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function zu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Zu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=o;for(;null!==f;){if(c=Xa(f),null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Mo(s,o,l){!function ps(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Kr)&&(c=l[Kr]),null==c&&(c=l[Kr]=gn++);const f=255&c;o.data[s+(f>>5)]|=1<<f}(s,o,l)}function Ro(s,o,l){if(l&Ke.Optional||void 0!==s)return s;Se()}function td(s,o,l,c){if(l&Ke.Optional&&void 0===c&&(c=null),0==(l&(Ke.Self|Ke.Host))){const f=s[9],g=hn(void 0);try{return f?f.get(o,c,l&Ke.Optional):pi(o,c,l&Ke.Optional)}finally{hn(g)}}return Ro(c,0,l)}function la(s,o,l,c=Ke.Default,f){if(null!==s){if(1024&o[2]){const v=function Ja(s,o,l,c,f){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=Zl(g,v,l,c|Ke.Self,Sn);if(E!==Sn)return E;let D=g.parent;if(!D){const M=v[21];if(M){const O=M.get(l,Sn,c);if(O!==Sn)return O}D=Xa(v),v=v[15]}g=D}return f}(s,o,l,c,Sn);if(v!==Sn)return v}const g=Zl(s,o,l,c,Sn);if(g!==Sn)return g}return td(o,l,c,f)}function Zl(s,o,l,c,f){const g=function nd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Kr)?s[Kr]:void 0;return"number"==typeof o?o>=0?255&o:rd:o}(l);if("function"==typeof g){if(!ia(o,s,c))return c&Ke.Host?Ro(f,0,c):td(o,l,c,f);try{const v=g(c);if(null!=v||c&Ke.Optional)return v;Se()}finally{jl()}}else if("number"==typeof g){let v=null,E=zu(s,o),D=-1,M=c&Ke.Host?o[16][6]:null;for((-1===E||c&Ke.SkipSelf)&&(D=-1===E?Zu(s,o):o[E+8],-1!==D&&Kl(c,!1)?(v=o[1],E=er(D),o=I(D,o)):E=-1);-1!==E;){const O=o[1];if(Ku(g,E,O.data)){const j=yh(E,o,l,v,c,M);if(j!==Sn)return j}D=o[E+8],-1!==D&&Kl(c,o[1].data[E+8]===M)&&Ku(g,E,o)?(v=O,E=er(D),o=I(D,o)):E=-1}}return f}function yh(s,o,l,c,f,g){const v=o[1],E=v.data[s+8],O=Qa(E,v,l,null==c?Gi(E)&&P:c!=v&&0!=(3&E.type),f&Ke.Host&&g===E);return null!==O?Ks(o,v,O,E):Sn}function Qa(s,o,l,c,f){const g=s.providerIndexes,v=o.data,E=1048575&g,D=s.directiveStart,O=g>>20,Q=f?E+O:s.directiveEnd;for(let ie=c?E:E+O;ie<Q;ie++){const Ce=v[ie];if(ie<D&&l===Ce||ie>=D&&Ce.type===l)return ie}if(f){const ie=v[D];if(ie&&Fr(ie)&&ie.type===l)return D}return null}function Ks(s,o,l,c){let f=s[l];const g=o.data;if(function zs(s){return s instanceof As}(f)){const v=f;v.resolving&&function et(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new xe(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(g[l]));const E=G(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?hn(v.injectImpl):null;ia(s,c,Ke.Default);try{f=s[l]=v.factory(void 0,g,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Gu(s,o,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=o.type.prototype;if(c){const v=Ai(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==D&&hn(D),G(E),v.resolving=!1,jl()}}return f}function Ku(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Kl(s,o){return!(s&Ke.Self||s&Ke.Host&&o)}class ua{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return la(this._tNode,this._lView,o,c,l)}}function rd(){return new ua(On(),ke())}function Ys(s){return jn(()=>{const o=s.prototype.constructor,l=o[ar]||Yu(o),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const g=f[ar]||Yu(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Yu(s){return $e(s)?()=>{const o=Yu(te(s));return o&&o()}:qi(s)}function Xa(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Qu(s){return function _h(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const g=l[f];if(Zs(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(g===o)return l[f+1];f+=2}}}return null}(On(),s)}const Po="__parameters__";function nl(s,o,l){return jn(()=>{const c=function Ju(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(o);function f(...g){if(this instanceof f)return c.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(D,M,O){const j=D.hasOwnProperty(Po)?D[Po]:Object.defineProperty(D,Po,{value:[]})[Po];for(;j.length<=O;)j.push(null);return(j[O]=j[O]||[]).push(v),D}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Vn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Kt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ri(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Ri(c,o)):o!==s&&o.push(c)}return o}function ms(s,o){s.forEach(l=>Array.isArray(l)?ms(l,o):o(l))}function sd(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function rl(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function wi(s,o,l){let c=Qs(s,o);return c>=0?s[1|c]=l:(c=~c,function _t(s,o,l,c){let f=s.length;if(f==o)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Jl(s,o){const l=Qs(s,o);if(l>=0)return s[1|l]}function Qs(s,o){return function bi(s,o,l){let c=0,f=s.length>>l;for(;f!==c;){const g=c+(f-c>>1),v=s[g<<l];if(o===v)return g<<l;v>o?f=g:c=g+1}return~(f<<l)}(s,o,1)}const Un={},Ms="__NG_DI_FLAG__",nc="ngTempTokenPath",rc=/\n/gm,ad="__source";let ha;function Js(s){const o=ha;return ha=s,o}function ld(s,o=Ke.Default){if(void 0===ha)throw new xe(-203,!1);return null===ha?pi(s,void 0,o):ha.get(s,o&Ke.Optional?null:void 0,o)}function ir(s,o=Ke.Default){return(function fi(){return zr}()||ld)(te(s),o)}function T(s,o=Ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ir(s,o)}function S(s){const o=[];for(let l=0;l<s.length;l++){const c=te(s[l]);if(Array.isArray(c)){if(0===c.length)throw new xe(900,!1);let f,g=Ke.Default;for(let v=0;v<c.length;v++){const E=c[v],D=$(E);"number"==typeof D?-1===D?f=E.token:g|=D:f=E}o.push(ir(f,g))}else o.push(ir(c))}return o}function k(s,o){return s[Ms]=o,s.prototype[Ms]=o,s}function $(s){return s[Ms]}const Je=k(nl("Optional"),8),Mt=k(nl("SkipSelf"),4);let mm;function Yb(s){mm=s}class sc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function to(s){return s instanceof sc?s.changingThisBreaksApplicationSecurity:s}const pa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Br=(()=>((Br=Br||{})[Br.NONE=0]="NONE",Br[Br.HTML=1]="HTML",Br[Br.STYLE=2]="STYLE",Br[Br.SCRIPT=3]="SCRIPT",Br[Br.URL=4]="URL",Br[Br.RESOURCE_URL=5]="RESOURCE_URL",Br))();function Cm(s){const o=function _a(){const s=ke();return s&&s[12]}();return o?o.sanitize(Br.URL,s)||"":function oc(s,o){const l=function Ih(s){return s instanceof sc&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?to(s):function lc(s){return(s=String(s)).match(pa)?s:"unsafe:"+s}(ge(s))}const pp=new Vn("ENVIRONMENT_INITIALIZER"),gp=new Vn("INJECTOR",-1),Dm=new Vn("INJECTOR_DEF_TYPES");class Xy{get(o,l=Un){if(l===Un){const c=new Error(`NullInjectorError: No provider for ${me(o)}!`);throw c.name="NullInjectorError",c}return l}}function mp(...s){return{\u0275providers:Ph(0,s)}}function Ph(s,...o){const l=[],c=new Set;let f;return ms(o,g=>{const v=g;kh(v,l,[],c)&&(f||(f=[]),f.push(v))}),void 0!==f&&md(f,l),l}function md(s,o){for(let l=0;l<s.length;l++){const{providers:f}=s[l];ms(f,g=>{o.push(g)})}}function kh(s,o,l,c){if(!(s=te(s)))return!1;let f=null,g=Ut(s);const v=!g&&Ge(s);if(g||v){if(v&&!v.standalone)return!1;f=s}else{const D=s.ngModule;if(g=Ut(D),!g)return!1;f=D}const E=c.has(f);if(v){if(E)return!1;if(c.add(f),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of D)kh(M,o,l,c)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let M;c.add(f);try{ms(g.imports,O=>{kh(O,o,l,c)&&(M||(M=[]),M.push(O))})}finally{}void 0!==M&&md(M,o)}if(!E){const M=qi(f)||(()=>new f);o.push({provide:f,useFactory:M,deps:Pt},{provide:Dm,useValue:f,multi:!0},{provide:pp,useValue:()=>ir(f),multi:!0})}const D=g.providers;null==D||E||ms(D,O=>{o.push(O)})}}return f!==s&&void 0!==s.providers}const _d=ye({provide:String,useValue:ye});function _p(s){return null!==s&&"object"==typeof s&&_d in s}function Lo(s){return"function"==typeof s}const lu=new Vn("Set Injector scope."),hc={},yp={};let yd;function Nh(){return void 0===yd&&(yd=new Xy),yd}class Oi{}class vp extends Oi{constructor(o,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uu(o,v=>this.processProvider(v)),this.records.set(gp,jr(void 0,this)),f.has("environment")&&this.records.set(Oi,jr(void 0,this));const g=this.records.get(lu);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Dm.multi,Pt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=Js(this),c=hn(void 0);try{return o()}finally{Js(l),hn(c)}}get(o,l=Un,c=Ke.Default){this.assertNotDestroyed();const f=Js(this),g=hn(void 0);try{if(!(c&Ke.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function sE(s){return"function"==typeof s||"object"==typeof s&&s instanceof Vn}(o)&&on(o);E=D&&this.injectableDefInScope(D)?jr(Oh(o),hc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ke.Self?Nh():this.parent).get(o,l=c&Ke.Optional&&l===Un?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[nc]=v[nc]||[]).unshift(me(o)),f)throw v;return function ne(s,o,l,c){const f=s[nc];throw o[ad]&&f.unshift(o[ad]),s.message=function pe(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=me(o);if(Array.isArray(o))f=o.map(me).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(rc,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[nc]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{hn(g),Js(f)}}resolveInjectorInitializers(){const o=Js(this),l=hn(void 0);try{const c=this.get(pp.multi,Pt,Ke.Self);for(const f of c)f()}finally{Js(o),hn(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(me(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(o){let l=Lo(o=te(o))?o:te(o&&o.provide);const c=function wp(s){return _p(s)?jr(void 0,s.useValue):jr(bp(s),hc)}(o);if(Lo(o)||!0!==o.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=jr(void 0,hc,!0),f.factory=()=>S(f.multi),this.records.set(l,f)),l=o,f.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===hc&&(l.value=yp,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Ep(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=te(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Oh(s){const o=on(s),l=null!==o?o.factory:qi(s);if(null!==l)return l;if(s instanceof Vn)throw new xe(204,!1);if(s instanceof Function)return function nv(s){const o=s.length;if(o>0)throw function Zi(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new xe(204,!1);const l=function Dr(s){const o=s&&(s[Yn]||s[vr]);if(o){const l=function Nr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new xe(204,!1)}function bp(s,o,l){let c;if(Lo(s)){const f=te(s);return qi(f)||Oh(f)}if(_p(s))c=()=>te(s.useValue);else if(function dc(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...S(s.deps||[]));else if(function Ni(s){return!(!s||!s.useExisting)}(s))c=()=>ir(te(s.useExisting));else{const f=te(s&&(s.useClass||s.provide));if(!function Fh(s){return!!s.deps}(s))return qi(f)||Oh(f);c=()=>new f(...S(s.deps))}return c}function jr(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function no(s){return!!s.\u0275providers}function uu(s,o){for(const l of s)Array.isArray(l)?uu(l,o):no(l)?uu(l.\u0275providers,o):o(l)}class Lh{}class iv{resolveComponentFactory(o){throw function cu(s){const o=Error(`No component factory found for ${me(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let fc=(()=>{class s{}return s.NULL=new iv,s})();function sv(){return y(On(),ke())}function y(s,o){return new p(Lr(s,o))}let p=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=sv,s})();function m(s){return s instanceof p?s.nativeElement:s}class R{}let F=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function X(){const s=ke(),l=rn(On().index,s);return(lr(l)?l:s)[11]}(),s})(),we=(()=>{class s{}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:()=>null}),s})();class Ze{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const at=new Ze("14.2.2"),Dt={};function pc(s){return s.ngOriginalError}class Ip{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&pc(o);for(;l&&pc(l);)l=pc(l);return l||null}}const Dp=new Map;let Tp=0;const ks="__ngContext__";function xn(s,o){lr(o)?(s[ks]=o[20],function hE(s){Dp.set(s[20],s)}(o)):s[ks]=o}function ro(s){return s instanceof Function?s():s}var va=(()=>((va=va||{})[va.Important=1]="Important",va[va.DashCase=2]="DashCase",va))();function mE(s,o){return undefined(s,o)}function Sp(s){const o=s[3];return Qr(o)?o[3]:o}function Pm(s){return mv(s[13])}function gv(s){return mv(s[4])}function mv(s){for(;null!==s&&!Qr(s);)s=s[4];return s}function bd(s,o,l,c,f){if(null!=c){let g,v=!1;Qr(c)?g=c:lr(c)&&(v=!0,c=c[0]);const E=Dn(c);0===s&&null!==l?null==f?yv(o,l,E):_c(o,l,E,f||null,!0):1===s&&null!==l?_c(o,l,E,f||null,!0):2===s?function mA(s,o,l){const c=Id(s,o);c&&function pA(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function Np(s,o,l,c,f){const g=l[7];g!==Dn(l)&&bd(o,s,c,g,f);for(let E=10;E<l.length;E++){const D=l[E];kp(D[1],D,s,o,c,g)}}(o,s,g,l,f)}}function tn(s,o,l){return s.createElement(o,l)}function vE(s,o){const l=s[9],c=l.indexOf(o),f=o[3];512&o[2]&&(o[2]&=-513,Gn(f,-1)),l.splice(c,1)}function Hh(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&vE(f,c),o>0&&(s[l-1][4]=c[4]);const g=rl(s,10+o);!function Mp(s,o){kp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function $h(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&kp(s,o,l,3,null,null),function hA(s){let o=s[13];if(!o)return Nm(s[1],s);for(;o;){let l=null;if(lr(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)lr(o)&&Nm(o[1],o),o=o[3];null===o&&(o=s),lr(o)&&Nm(o[1],o),l=o&&o[4]}o=l}}(o)}}function Nm(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function fA(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=o[l[c]];if(!(f instanceof As)){const g=l[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],D=g[v+1];try{D.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,o),function Om(s,o){const l=s.cleanup,c=o[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(o):Dn(o[v]),D=c[f=l[g+2]],M=l[g+3];"boolean"==typeof M?E.removeEventListener(l[g],D,M):M>=0?c[f=M]():c[f=-M].unsubscribe(),g+=2}else{const v=c[f=l[g+1]];l[g].call(v)}if(null!==c){for(let g=f+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&Qr(o[3])){l!==o[3]&&vE(l,o);const c=o[19];null!==c&&c.detachView(s)}!function cv(s){Dp.delete(s[20])}(o)}}function Fm(s,o,l){return function Rp(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===Ue.None||f===Ue.Emulated)return null}return Lr(c,l)}(s,o.parent,l)}function _c(s,o,l,c,f){s.insertBefore(o,l,c,f)}function yv(s,o,l){s.appendChild(o,l)}function wE(s,o,l,c,f){null!==c?_c(s,o,l,c,f):yv(s,o,l)}function Id(s,o){return s.parentNode(o)}let CE=function EE(s,o,l){return 40&s.type?Lr(s,l):null};function Dd(s,o,l,c){const f=Fm(s,c,o),g=o[11],E=function bE(s,o,l){return CE(s,o,l)}(c.parent||o[6],c,o);if(null!=f)if(Array.isArray(l))for(let D=0;D<l.length;D++)wE(g,f,l[D],E,!1);else wE(g,f,l,E,!1)}function Vm(s,o){if(null!==o){const l=o.type;if(3&l)return Lr(o,s);if(4&l)return Pp(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Vm(s,c);{const f=s[o.index];return Qr(f)?Pp(-1,f):Dn(f)}}if(32&l)return mE(o,s)()||Dn(s[o.index]);{const c=yc(s,o);return null!==c?Array.isArray(c)?c[0]:Vm(Sp(s[16]),c):Vm(s,o.next)}}return null}function yc(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Pp(s,o){const l=10+s+1;if(l<o.length){const c=o[l],f=c[1].firstChild;if(null!==f)return Vm(c,f)}return o[7]}function wv(s,o,l,c,f,g,v){for(;null!=l;){const E=c[l.index],D=l.type;if(v&&0===o&&(E&&xn(Dn(E),c),l.flags|=4),64!=(64&l.flags))if(8&D)wv(s,o,l.child,c,f,g,!1),bd(o,s,f,E,g);else if(32&D){const M=mE(l,c);let O;for(;O=M();)bd(o,s,f,O,g);bd(o,s,f,E,g)}else 16&D?Gh(s,o,c,l,f,g):bd(o,s,f,E,g);l=v?l.projectionNext:l.next}}function kp(s,o,l,c,f,g){wv(l,c,s.firstChild,o,f,g,!1)}function Gh(s,o,l,c,f,g){const v=l[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)bd(o,s,f,D[M],g);else wv(s,o,D,v[3],f,g,!0)}function bv(s,o,l){s.setAttribute(o,"style",l)}function Um(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function Ev(s,o,l){let c=s.length;for(;;){const f=s.indexOf(o,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=o.length;if(f+g===c||s.charCodeAt(f+g)<=32)return f}l=f+1}}const IE="ng-template";function yA(s,o,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==Ev(f.toLowerCase(),o,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function Cv(s){return 4===s.type&&s.value!==IE}function vA(s,o,l){return o===(4!==s.type||l?s.value:IE)}function Iv(s,o,l){let c=4;const f=s.attrs||[],g=function DE(s){for(let o=0;o<s.length;o++)if(Zs(s[o]))return o;return s.length}(f);let v=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!vA(s,D,l)||""===D&&1===o.length){if(_s(c))return!1;v=!0}}else{const M=8&c?D:o[++E];if(8&c&&null!==s.attrs){if(!yA(s.attrs,M,l)){if(_s(c))return!1;v=!0}continue}const j=wA(8&c?"class":D,f,Cv(s),l);if(-1===j){if(_s(c))return!1;v=!0;continue}if(""!==M){let Q;Q=j>g?"":f[j+1].toLowerCase();const ie=8&c?Q:null;if(ie&&-1!==Ev(ie,M,0)||2&c&&M!==Q){if(_s(c))return!1;v=!0}}}}else{if(!v&&!_s(c)&&!_s(D))return!1;if(v&&_s(D))continue;v=!1,c=D|1&c}}return _s(c)||v}function _s(s){return 0==(1&s)}function wA(s,o,l,c){if(null===o)return-1;let f=0;if(c||!l){let g=!1;for(;f<o.length;){const v=o[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++f];for(;"string"==typeof E;)E=o[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function TE(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Bm(s,o,l=!1){for(let c=0;c<o.length;c++)if(Iv(s,o[c],l))return!0;return!1}function jm(s,o){return s?":not("+o.trim()+")":o}function Td(s){let o=s[0],l=1,c=2,f="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const E=s[++l];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?f+="."+v:4&c&&(f+=" "+v);else""!==f&&!_s(v)&&(o+=jm(g,f),f=""),c=v,g=g||!_s(c);l++}return""!==f&&(o+=jm(g,f)),o}const Wt={};function SE(s){xE(Yt(),ke(),cr()+s,!1)}function xE(s,o,l,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Ws(o,g,l)}else{const g=s.preOrderHooks;null!==g&&vi(o,g,0,l)}ci(l)}function kE(s,o=null,l=null,c){const f=Dv(s,o,l,c);return f.resolveInjectorInitializers(),f}function Dv(s,o=null,l=null,c,f=new Set){const g=[l||Pt,mp(s)];return c=c||("object"==typeof s?void 0:me(s)),new vp(g,o||Nh(),c||null,f)}let mu=(()=>{class s{static create(l,c){if(Array.isArray(l))return kE({name:""},c,l,"");{const f=l.name??"";return kE({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=Un,s.NULL=new Xy,s.\u0275prov=Kt({token:s,providedIn:"any",factory:()=>ir(gp)}),s.__NG_ELEMENT_ID__=-1,s})();function Ad(s,o=Ke.Default){const l=ke();return null===l?ir(s,o):la(On(),l,te(s),o)}function kA(){throw new Error("invalid")}function Rv(s,o){return s<<17|o<<2}function ol(s){return s>>17&32767}function Pv(s){return 2|s}function _u(s){return(131068&s)>>2}function Fp(s,o){return-131069&s|o<<2}function qm(s){return 1|s}function $p(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],g=l[c+1];if(-1!==g){const v=s.data[g];ra(f),v.contentQueries(2,o[g],g)}}}function xd(s,o,l,c,f,g,v,E,D,M,O){const j=o.blueprint.slice();return j[0]=f,j[2]=76|c,(null!==O||s&&1024&s[2])&&(j[2]|=1024),ja(j),j[3]=j[15]=s,j[8]=l,j[10]=v||s&&s[10],j[11]=E||s&&s[11],j[12]=D||s&&s[12]||null,j[9]=M||s&&s[9]||null,j[6]=g,j[20]=function wd(){return Tp++}(),j[21]=O,j[16]=2==o.type?s[16]:j,j}function yu(s,o,l,c,f){let g=s.data[o];if(null===g)g=function Km(s,o,l,c,f){const g=Qo(),v=Jo(),D=s.data[o]=function $A(s,o,l,c,f,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,c,f);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,l,c,f),function gh(){return Rt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=f;const v=function Co(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return _i(g,!0),g}function al(s,o,l,c){if(0===l)return-1;const f=o.length;for(let g=0;g<l;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return f}function Ym(s,o,l){sa(o);try{const c=s.viewQuery;null!==c&&Zv(1,c,l);const f=s.template;null!==f&&tC(s,o,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&$p(s,o),s.staticViewQueries&&Zv(2,s.viewQuery,l);const g=s.components;null!==g&&function eC(s,o){for(let l=0;l<o.length;l++)XA(s,o[l])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,fs()}}function Qm(s,o,l,c){const f=o[2];if(128!=(128&f)){sa(o);try{ja(o),function Nl(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&tC(s,o,l,2,c);const v=3==(3&f);if(v){const M=s.preOrderCheckHooks;null!==M&&Ws(o,M,null)}else{const M=s.preOrderHooks;null!==M&&vi(o,M,0,null),ql(o,0)}if(function JA(s){for(let o=Pm(s);null!==o;o=gv(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const f=l[c],g=f[3];0==(512&f[2])&&Gn(g,1),f[2]|=512}}}(o),function QA(s){for(let o=Pm(s);null!==o;o=gv(o))for(let l=10;l<o.length;l++){const c=o[l],f=c[1];$s(c)&&Qm(f,c,f.template,c[8])}}(o),null!==s.contentQueries&&$p(s,o),v){const M=s.contentCheckHooks;null!==M&&Ws(o,M)}else{const M=s.contentHooks;null!==M&&vi(o,M,1),ql(o,1)}!function BA(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)ci(~f);else{const g=f,v=l[++c],E=l[++c];mh(v,g),E(2,o[g])}}}finally{ci(-1)}}(s,o);const E=s.components;null!==E&&function XE(s,o){for(let l=0;l<o.length;l++)t_(s,o[l])}(o,E);const D=s.viewQuery;if(null!==D&&Zv(2,D,c),v){const M=s.viewCheckHooks;null!==M&&Ws(o,M)}else{const M=s.viewHooks;null!==M&&vi(o,M,2),ql(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Gn(o[3],-1))}finally{fs()}}}function tC(s,o,l,c,f){const g=cr(),v=2&c;try{ci(-1),v&&o.length>22&&xE(s,o,22,!1),l(c,f)}finally{ci(g)}}function Uv(s,o,l){!hs()||(function zA(s,o,l,c){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||gs(l,o),xn(c,o);const v=l.initialInputs;for(let E=f;E<g;E++){const D=s.data[E],M=Fr(D);M&&YA(o,l,D);const O=Ks(o,s,E,l);xn(O,o),null!==v&&Xm(0,E-f,O,D,0,v),M&&(rn(l.index,o)[8]=O)}}(s,o,l,Lr(l,o)),128==(128&l.flags)&&function ZA(s,o,l){const c=l.directiveStart,f=l.directiveEnd,g=l.index,v=function Ol(){return Rt.lFrame.currentDirectiveIndex}();try{ci(g);for(let E=c;E<f;E++){const D=s.data[E],M=o[E];ta(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&lC(D,M)}}finally{ci(-1),ta(v)}}(s,o,l))}function Bv(s,o,l=Lr){const c=o.localNames;if(null!==c){let f=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],E=-1===v?l(o,s):s[v];s[f++]=E}}}function Gp(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=jv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function jv(s,o,l,c,f,g,v,E,D,M){const O=22+c,j=O+f,Q=function jA(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Wt);return l}(O,j),ie="function"==typeof M?M():M;return Q[1]={type:s,blueprint:Q,template:l,queries:null,viewQuery:E,declTNode:o,data:Q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:ie,incompleteFirstPass:!1}}function rC(s,o,l,c){const f=r_(o);null===l?f.push(c):(f.push(l),s.firstCreatePass&&Wp(s).push(c,f.length-1))}function iC(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,f):l[c]=[o,f]}return l}function Hv(s,o){const c=o.directiveEnd,f=s.data,g=o.attrs,v=[];let E=null,D=null;for(let M=o.directiveStart;M<c;M++){const O=f[M],j=O.inputs,Q=null===g||Cv(o)?null:fC(j,g);v.push(Q),E=iC(j,M,E),D=iC(O.outputs,M,D)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=D}function Ns(s,o,l,c,f,g,v,E){const D=Lr(o,l);let O,M=o.inputs;!E&&null!=M&&(O=M[c])?(i_(s,l,O,c,f),Gi(o)&&$v(l,o.index)):3&o.type&&(c=function GA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=v?v(f,o.value||"",c):f,g.setProperty(D,c,f))}function $v(s,o){const l=rn(o,s);16&l[2]||(l[2]|=32)}function Gv(s,o,l,c){let f=!1;if(hs()){const g=function uC(s,o,l){const c=s.directiveRegistry;let f=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Bm(l,v.selectors,!1)&&(f||(f=[]),Mo(gs(l,o),s,v.type),Fr(v)?(Jm(s,l),f.unshift(v)):f.push(v))}return f}(s,o,l),v=null===c?null:{"":-1};if(null!==g){f=!0,KA(l,s.data.length,g.length);for(let O=0;O<g.length;O++){const j=g[O];j.providersResolver&&j.providersResolver(j)}let E=!1,D=!1,M=al(s,o,g.length,null);for(let O=0;O<g.length;O++){const j=g[O];l.mergedAttrs=aa(l.mergedAttrs,j.hostAttrs),hC(s,l,o,M,j),dC(M,j,v),null!==j.contentQueries&&(l.flags|=8),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(l.flags|=128);const Q=j.type.prototype;!E&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!D&&(Q.ngOnChanges||Q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),M++}Hv(s,l)}v&&function cC(s,o,l){if(o){const c=s.localNames=[];for(let f=0;f<o.length;f+=2){const g=l[o[f+1]];if(null==g)throw new xe(-301,!1);c.push(o[f],g)}}}(l,c,v)}return l.mergedAttrs=aa(l.mergedAttrs,l.attrs),f}function aC(s,o,l,c,f,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const D=~o.index;(function WA(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=D&&E.push(D),E.push(c,f,v)}}function lC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Jm(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function dC(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Fr(o)&&(l[""]=s)}}function KA(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function hC(s,o,l,c,f){s.data[c]=f;const g=f.factory||(f.factory=qi(f.type)),v=new As(g,Fr(f),Ad);s.blueprint[c]=v,l[c]=v,aC(s,o,0,c,al(s,l,f.hostVars,Wt),f)}function YA(s,o,l){const c=Lr(o,s),f=Gp(l),g=s[10],v=n_(s,xd(s,f,null,l.onPush?32:16,c,o,g,g.createRenderer(c,l),null,null,null));s[o.index]=v}function ll(s,o,l,c,f,g){const v=Lr(s,o);!function qv(s,o,l,c,f,g,v){if(null==g)s.removeAttribute(o,f,l);else{const E=null==v?ge(g):v(g,c||"",f);s.setAttribute(o,f,E,l)}}(o[11],v,g,s.value,l,c,f)}function Xm(s,o,l,c,f,g){const v=g[o];if(null!==v){const E=c.setInput;for(let D=0;D<v.length;){const M=v[D++],O=v[D++],j=v[D++];null!==E?c.setInput(l,j,M,O):l[O]=j}}}function fC(s,o){let l=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],o[c+1])),c+=2}else c+=2;else c+=4}return l}function e_(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function t_(s,o){const l=rn(o,s);if($s(l)){const c=l[1];48&l[2]?Qm(c,l,c.template,l[8]):l[5]>0&&Wv(l)}}function Wv(s){for(let c=Pm(s);null!==c;c=gv(c))for(let f=10;f<c.length;f++){const g=c[f];if($s(g))if(512&g[2]){const v=g[1];Qm(v,g,v.template,g[8])}else g[5]>0&&Wv(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=rn(l[c],s);$s(f)&&f[5]>0&&Wv(f)}}function XA(s,o){const l=rn(o,s),c=l[1];(function eS(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Ym(c,l,l[8])}function n_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function zv(s){for(;s;){s[2]|=32;const o=Sp(s);if(Cl(s)&&!o)return s;s=o}return null}function qp(s,o,l,c=!0){const f=o[10];f.begin&&f.begin();try{Qm(s,o,s.template,l)}catch(v){throw c&&gC(o,v),v}finally{f.end&&f.end()}}function Zv(s,o,l){ra(0),o(s,l)}function r_(s){return s[7]||(s[7]=[])}function Wp(s){return s.cleanup||(s.cleanup=[])}function gC(s,o){const l=s[9],c=l?l.get(Ip,null):null;c&&c.handleError(o)}function i_(s,o,l,c,f){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],D=o[v],M=s.data[v];null!==M.setInput?M.setInput(D,f,c,E):D[E]=f}}function Ic(s,o,l){const c=mi(o,s);!function xp(s,o,l){s.setValue(o,l)}(s[11],c,l)}function Yv(s,o,l){let c=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?f=Ee(f,E):2==g&&(c=Ee(c,E+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}function s_(s,o,l,c,f=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&c.push(Dn(g)),Qr(g))for(let E=10;E<g.length;E++){const D=g[E],M=D[1].firstChild;null!==M&&s_(D[1],D,M,c)}const v=l.type;if(8&v)s_(s,o,l.child,c);else if(32&v){const E=mE(l,o);let D;for(;D=E();)c.push(D)}else if(16&v){const E=yc(o,l);if(Array.isArray(E))c.push(...E);else{const D=Sp(o[16]);s_(D[1],D,E,c,!0)}}l=f?l.projectionNext:l.next}return c}class Md{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return s_(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Qr(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Hh(o,c),rl(l,c))}this._attachedToViewContainer=!1}$h(this._lView[1],this._lView)}onDestroy(o){rC(this._lView[1],this._lView,null,o)}markForCheck(){zv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){qp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cd(s,o){kp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=o}}class mC extends Md{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;qp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Qh extends fc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Ge(o);return new Rd(l,this.ngModule)}}function nS(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class Jh{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){const f=this.injector.get(o,Dt,c);return f!==Dt||l===Dt?f:this.parentInjector.get(o,l,c)}}class Rd extends Lh{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Hm(s){return s.map(Td).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return nS(this.componentDef.inputs)}get outputs(){return nS(this.componentDef.outputs)}create(o,l,c,f){let g=(f=f||this.ngModule)instanceof Oi?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new Jh(o,g):o,E=v.get(R,null);if(null===E)throw new xe(407,!1);const D=v.get(we,null),M=E.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",j=c?function HA(s,o,l){return s.selectRootElement(o,l===Ue.ShadowDom)}(M,c,this.componentDef.encapsulation):tn(E.createRenderer(null,this.componentDef),O,function _C(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(O)),Q=this.componentDef.onPush?288:272,ie=jv(0,null,null,1,0,null,null,null,null,null),Ce=xd(null,ie,null,Q,null,null,E,M,D,v,null);let ze,tt;sa(Ce);try{const it=function iS(s,o,l,c,f,g){const v=l[1];l[22]=s;const D=yu(v,22,2,"#host",null),M=D.mergedAttrs=o.hostAttrs;null!==M&&(Yv(D,M,!0),null!==s&&(xo(f,s,M),null!==D.classes&&Um(f,s,D.classes),null!==D.styles&&bv(f,s,D.styles)));const O=c.createRenderer(s,o),j=xd(l,Gp(o),null,o.onPush?32:16,l[22],D,c,O,g||null,null,null);return v.firstCreatePass&&(Mo(gs(D,l),v,o.type),Jm(v,D),KA(D,l.length,1)),n_(l,j),l[22]=j}(j,this.componentDef,Ce,E,M);if(j)if(c)xo(M,j,["ng-version",at.full]);else{const{attrs:St,classes:Le}=function AE(s){const o=[],l=[];let c=1,f=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===f?""!==g&&o.push(g,s[++c]):8===f&&l.push(g);else{if(!_s(f))break;f=g}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);St&&xo(M,j,St),Le&&Le.length>0&&Um(M,j,Le.join(" "))}if(tt=us(ie,22),void 0!==l){const St=tt.projection=[];for(let Le=0;Le<this.ngContentSelectors.length;Le++){const Ft=l[Le];St.push(null!=Ft?Array.from(Ft):null)}}ze=function sS(s,o,l,c){const f=l[1],g=function oC(s,o,l){const c=On();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),hC(s,c,o,al(s,o,1,null),l),Hv(s,c));const f=Ks(o,s,c.directiveStart,c);xn(f,o);const g=Lr(c,o);return g&&xn(g,o),f}(f,l,o);if(s[8]=l[8]=g,null!==c)for(const E of c)E(g,o);if(o.contentQueries){const E=On();o.contentQueries(1,g,E.directiveStart)}const v=On();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ci(v.index),aC(l[1],v,0,v.directiveStart,v.directiveEnd,o),lC(o,g)),g}(it,this.componentDef,Ce,[oS]),Ym(ie,Ce,null)}finally{fs()}return new yC(this.componentType,ze,y(tt,Ce),Ce,tt)}}class yC extends class Cp{}{constructor(o,l,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new mC(f),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[o])){const g=this._rootLView;i_(g[1],g,f,o,l),$v(g,this._tNode.index)}}get injector(){return new ua(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function oS(){const s=On();za(ke()[1],s)}function Jv(s){let o=function Qv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let f;if(Fr(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new xe(903,!1);f=o.\u0275dir}if(f){if(l){c.push(f);const v=s;v.inputs=Xh(s.inputs),v.declaredInputs=Xh(s.declaredInputs),v.outputs=Xh(s.outputs);const E=f.hostBindings;E&&aS(s,E);const D=f.viewQuery,M=f.contentQueries;if(D&&$1(s,D),M&&wC(s,M),ue(s.inputs,f.inputs),ue(s.declaredInputs,f.declaredInputs),ue(s.outputs,f.outputs),Fr(f)&&f.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===Jv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function H1(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=o+=f.hostVars,f.hostAttrs=aa(f.hostAttrs,l=aa(l,f.hostAttrs))}}(c)}function Xh(s){return s===Zr?{}:s===Pt?[]:s}function $1(s,o){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{o(c,f),l(c,f)}:o}function wC(s,o){const l=s.contentQueries;s.contentQueries=l?(c,f,g)=>{o(c,f,g),l(c,f,g)}:o}function aS(s,o){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{o(c,f),l(c,f)}:o}let o_=null;function Pd(){if(!o_){const s=vn.Symbol;if(s&&s.iterator)o_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(o_=c)}}}return o_}function zp(s){return!!CC(s)&&(Array.isArray(s)||!(s instanceof Map)&&Pd()in s)}function CC(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ei(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Dc(s,o,l,c){const f=ei(s,o,l);return ei(s,o+1,c)||f}function Xv(s,o,l,c){const f=ke();return ei(f,Gs(),o)&&(Yt(),ll(An(),f,s,o,l,c)),Xv}function nf(s,o,l,c){return ei(s,Gs(),l)?o+ge(l)+c:Wt}function Os(s,o,l,c,f,g,v,E,D,M,O,j){const Q=zi();let ie=function so(s,o,l,c,f,g){const v=Dc(s,o,l,c);return Dc(s,o+2,f,g)||v}(s,Q,l,f,v,D);return ie=ei(s,Q+4,O)||ie,yi(5),ie?o+ge(l)+c+ge(f)+g+ge(v)+E+ge(D)+M+ge(O)+j:Wt}function MC(s,o,l,c,f,g,v,E){const D=ke(),M=Yt(),O=s+22,j=M.firstCreatePass?function xC(s,o,l,c,f,g,v,E,D){const M=o.consts,O=yu(o,s,4,v||null,Si(M,E));Gv(o,l,O,Si(M,D)),za(o,O);const j=O.tViews=jv(2,O,c,f,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,O),j.queries=o.queries.embeddedTView(O)),O}(O,M,D,o,l,c,f,g,v):M.data[O];_i(j,!1);const Q=D[11].createComment("");Dd(M,D,Q,j),xn(Q,D),n_(D,D[O]=e_(Q,D,Q,j)),ka(j)&&Uv(M,D,j),null!=v&&Bv(D,j,E)}function Hr(s){return cs(function Xo(){return Rt.lFrame.contextLView}(),22+s)}function Qp(s,o,l){const c=ke();return ei(c,Gs(),o)&&Ns(Yt(),An(),c,s,o,c[11],l,!1),Qp}function Jp(s,o,l,c,f){const v=f?"class":"style";i_(s,l,o.inputs[v],v,c)}function Xp(s,o,l,c){const f=ke(),g=Yt(),v=22+s,E=f[11],D=f[v]=tn(E,o,function Wa(){return Rt.lFrame.currentNamespace}()),M=g.firstCreatePass?function u_(s,o,l,c,f,g,v){const E=o.consts,M=yu(o,s,2,f,Si(E,g));return Gv(o,l,M,Si(E,v)),null!==M.attrs&&Yv(M,M.attrs,!1),null!==M.mergedAttrs&&Yv(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(v,g,f,0,o,l,c):g.data[v];_i(M,!0);const O=M.mergedAttrs;null!==O&&xo(E,D,O);const j=M.classes;null!==j&&Um(E,D,j);const Q=M.styles;return null!==Q&&bv(E,D,Q),64!=(64&M.flags)&&Dd(g,f,D,M),0===function ds(){return Rt.lFrame.elementDepthCount}()&&xn(D,f),function Ha(){Rt.lFrame.elementDepthCount++}(),ka(M)&&(Uv(g,f,M),function nC(s,o,l){if(Pa(o)){const f=o.directiveEnd;for(let g=o.directiveStart;g<f;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,M,f)),null!==c&&Bv(f,M),Xp}function lf(){let s=On();Jo()?function Io(){Rt.lFrame.isParent=!1}():(s=s.parent,_i(s,!1));const o=s;!function Ml(){Rt.lFrame.elementDepthCount--}();const l=Yt();return l.firstCreatePass&&(za(l,s),Pa(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ka(s){return 0!=(16&s.flags)}(o)&&Jp(l,o,ke(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xi(s){return 0!=(32&s.flags)}(o)&&Jp(l,o,ke(),o.stylesWithoutHost,!1),lf}function uf(s,o,l,c){return Xp(s,o,l,c),lf(),uf}function fS(){return ke()}function PC(s){return!!s&&"function"==typeof s.then}function pS(s){return!!s&&"function"==typeof s.subscribe}const gS=pS;function kC(s,o,l,c){const f=ke(),g=Yt(),v=On();return function _S(s,o,l,c,f,g,v,E){const D=ka(c),O=s.firstCreatePass&&Wp(s),j=o[8],Q=r_(o);let ie=!0;if(3&c.type||E){const tt=Lr(c,o),it=E?E(tt):tt,St=Q.length,Le=E?Mn=>E(Dn(Mn[c.index])):c.index;let Ft=null;if(!E&&D&&(Ft=function q1(s,o,l,c){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===c){const E=o[7],D=f[g+2];return E.length>D?E[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,f,c.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=g,Ft.__ngLastListenerFn__=g,ie=!1;else{g=OC(c,o,j,g,!1);const Mn=l.listen(it,f,g);Q.push(g,Mn),O&&O.push(f,Le,St,St+1)}}else g=OC(c,o,j,g,!1);const Ce=c.outputs;let ze;if(ie&&null!==Ce&&(ze=Ce[f])){const tt=ze.length;if(tt)for(let it=0;it<tt;it+=2){const mr=o[ze[it]][ze[it+1]].subscribe(g),th=Q.length;Q.push(g,mr),O&&O.push(f,c.index,th,-(th+1))}}}(g,f,f[11],v,s,o,0,c),kC}function NC(s,o,l,c){try{return!1!==l(c)}catch(f){return gC(s,f),!1}}function OC(s,o,l,c,f){return function g(v){if(v===Function)return c;zv(2&s.flags?rn(s.index,o):o);let D=NC(o,0,c,v),M=g.__ngNextListenerFn__;for(;M;)D=NC(o,0,M,v)&&D,M=M.__ngNextListenerFn__;return f&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function rw(s=1){return function qs(s){return(Rt.lFrame.contextLView=function qa(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function ow(s,o,l){return eg(s,"",o,"",l),ow}function eg(s,o,l,c,f){const g=ke(),v=nf(g,o,l,c);return v!==Wt&&Ns(Yt(),An(),g,s,v,g[11],f,!1),eg}function jC(s,o,l,c,f){const g=s[l+1],v=null===o;let E=c?ol(g):_u(g),D=!1;for(;0!==E&&(!1===D||v);){const O=s[E+1];tg(s[E],o)&&(D=!0,s[E+1]=c?qm(O):Pv(O)),E=c?ol(O):_u(O)}D&&(s[l+1]=c?Pv(g):qm(g))}function tg(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Qs(s,o)>=0}function jt(s,o){return function ao(s,o,l,c){const f=ke(),g=Yt(),v=yi(2);g.firstUpdatePass&&function GC(s,o,l,c){const f=s.data;if(null===f[l+1]){const g=f[cr()],v=function $C(s,o){return o>=s.expandoStartIndex}(s,l);(function __(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function Qi(s,o,l,c){const f=function na(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===f)0===(c?o.classBindings:o.styleBindings)&&(l=rg(l=aw(null,s,o,l,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==f)if(l=aw(f,s,o,l,c),null===g){let D=function g_(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==_u(c))return s[ol(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=aw(null,s,o,D[1],c),D=rg(D,o.attrs,c),function Li(s,o,l,c){s[ol(l?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else g=function Tc(s,o,l){let c;const f=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<f;g++)c=rg(c,s[g].hostAttrs,l);return rg(c,o.attrs,l)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),l}(f,g,o,c),function ES(s,o,l,c,f,g){let v=g?o.classBindings:o.styleBindings,E=ol(v),D=_u(v);s[c]=l;let O,M=!1;if(Array.isArray(l)){const j=l;O=j[1],(null===O||Qs(j,O)>0)&&(M=!0)}else O=l;if(f)if(0!==D){const Q=ol(s[E+1]);s[c+1]=Rv(Q,E),0!==Q&&(s[Q+1]=Fp(s[Q+1],c)),s[E+1]=function OA(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Rv(E,0),0!==E&&(s[E+1]=Fp(s[E+1],c)),E=c;else s[c+1]=Rv(D,0),0===E?E=c:s[D+1]=Fp(s[D+1],c),D=c;M&&(s[c+1]=Pv(s[c+1])),jC(s,O,c,!0),jC(s,O,c,!1),function CS(s,o,l,c,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Qs(g,o)>=0&&(l[c+1]=qm(l[c+1]))}(o,O,s,c,g),v=Rv(E,D),g?o.classBindings=v:o.styleBindings=v}(f,g,o,l,v,c)}}(g,s,v,c),o!==Wt&&ei(f,v,o)&&function Vi(s,o,l,c,f,g,v,E){if(!(3&o.type))return;const D=s.data,M=D[E+1];Od(function io(s){return 1==(1&s)}(M)?zC(D,o,l,f,_u(M),v):void 0)||(Od(g)||function Gm(s){return 2==(2&s)}(M)&&(g=zC(D,null,l,f,E,v)),function qh(s,o,l,c,f){if(o)f?s.addClass(l,c):s.removeClass(l,c);else{let g=-1===c.indexOf("-")?void 0:va.DashCase;null==f?s.removeStyle(l,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=va.Important),s.setStyle(l,c,f,g))}}(c,v,mi(cr(),l),f,g))}(g,g.data[cr()],f,f[11],s,f[v+1]=function ZC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=me(to(s)))),s}(o,l),c,v)}(s,o,null,!0),jt}function aw(s,o,l,c,f){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=o[E],c=rg(c,g.hostAttrs,f),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),c}function rg(s,o,l){const c=l?1:2;let f=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?f=v:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),wi(s,v,!!l||o[++g]))}return void 0===s?null:s}function zC(s,o,l,c,f,g){const v=null===o;let E;for(;f>0;){const D=s[f],M=Array.isArray(D),O=M?D[1]:D,j=null===O;let Q=l[f+1];Q===Wt&&(Q=j?Pt:void 0);let ie=j?Jl(Q,c):O===c?Q:void 0;if(M&&!Od(ie)&&(ie=Jl(D,c)),Od(ie)&&(E=ie,v))return E;const Ce=s[f+1];f=v?ol(Ce):_u(Ce)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(E=Jl(D,c))}return E}function Od(s){return void 0!==s}function ig(s,o=""){const l=ke(),c=Yt(),f=s+22,g=c.firstCreatePass?yu(c,f,1,o,null):c.data[f],v=l[f]=function km(s,o){return s.createText(o)}(l[11],o);Dd(c,l,v,g),_i(g,!1)}function Bo(s){return cf("",s,""),Bo}function cf(s,o,l){const c=ke(),f=nf(c,s,o,l);return f!==Wt&&Ic(c,cr(),f),cf}function lw(s,o,l,c,f){const g=ke(),v=function rf(s,o,l,c,f,g){const E=Dc(s,zi(),l,f);return yi(2),E?o+ge(l)+c+ge(f)+g:Wt}(g,s,o,l,c,f);return v!==Wt&&Ic(g,cr(),v),lw}function y_(s,o,l,c,f,g,v,E,D,M,O){const j=ke(),Q=Os(j,s,o,l,c,f,g,v,E,D,M,O);return Q!==Wt&&Ic(j,cr(),Q),y_}const wu=void 0;var PS=["en",[["a","p"],["AM","PM"],wu],[["AM","PM"],wu,wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wu,"{1} 'at' {0}",wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tI(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Ac={};function lg(s){const o=function kS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=ug(o);if(l)return l;const c=o.split("-")[0];if(l=ug(c),l)return l;if("en"===c)return PS;throw new xe(701,!1)}function Ei(s){return lg(s)[kt.PluralCase]}function ug(s){return s in Ac||(Ac[s]=vn.ng&&vn.ng.common&&vn.ng.common.locales&&vn.ng.common.locales[s]),Ac[s]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const df="en-US";let oI=df;function wg(s,o,l,c,f){if(s=te(s),Array.isArray(s))for(let g=0;g<s.length;g++)wg(s[g],o,l,c,f);else{const g=Yt(),v=ke();let E=Lo(s)?s:te(s.provide),D=bp(s);const M=On(),O=1048575&M.providerIndexes,j=M.directiveStart,Q=M.providerIndexes>>20;if(Lo(s)||!s.multi){const ie=new As(D,f,Ad),Ce=k_(E,o,f?O:O+Q,j);-1===Ce?(Mo(gs(M,v),g,E),bg(g,s,o.length),o.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ie),v.push(ie)):(l[Ce]=ie,v[Ce]=ie)}else{const ie=k_(E,o,O+Q,j),Ce=k_(E,o,O,O+Q),ze=ie>=0&&l[ie],tt=Ce>=0&&l[Ce];if(f&&!tt||!f&&!ze){Mo(gs(M,v),g,E);const it=function YS(s,o,l,c,f){const g=new As(s,l,Ad);return g.multi=[],g.index=o,g.componentProviders=0,Fw(g,f,c&&!l),g}(f?KS:Lw,l.length,f,c,D);!f&&tt&&(l[Ce].providerFactory=it),bg(g,s,o.length,0),o.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(it),v.push(it)}else bg(g,s,ie>-1?ie:Ce,Fw(l[f?Ce:ie],D,!f&&c));!f&&c&&tt&&l[Ce].componentProviders++}}}function bg(s,o,l,c){const f=Lo(o),g=function tv(s){return!!s.useClass}(o);if(f||g){const D=(g?te(o.useClass):o).prototype.ngOnDestroy;if(D){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const O=M.indexOf(l);-1===O?M.push(l,[c,D]):M[O+1].push(c,D)}else M.push(l,D)}}}function Fw(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function k_(s,o,l,c){for(let f=l;f<c;f++)if(o[f]===s)return f;return-1}function Lw(s,o,l,c){return Vw(this.multi,[])}function KS(s,o,l,c){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Ks(l,l[1],this.providerFactory.index,c);g=E.slice(0,v),Vw(f,g);for(let D=v;D<E.length;D++)g.push(E[D])}else g=[],Vw(f,g);return g}function Vw(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Eg(s,o=[]){return l=>{l.providersResolver=(c,f)=>function AI(s,o,l){const c=Yt();if(c.firstCreatePass){const f=Fr(s);wg(l,c.data,c.blueprint,f,!0),wg(o,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,o)}}class hl{}class Cg{}function Uw(s,o){return new yf(s,o??null)}class yf extends hl{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qh(this);const c=wn(o);this._bootstrapComponents=ro(c.bootstrap),this._r3Injector=Dv(o,l,[{provide:hl,useValue:this},{provide:fc,useValue:this.componentFactoryResolver}],me(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jd extends Cg{constructor(o){super(),this.moduleType=o}create(o){return new yf(this.moduleType,o)}}class JS extends hl{constructor(o,l,c){super(),this.componentFactoryResolver=new Qh(this),this.instance=null;const f=new vp([...o,{provide:hl,useValue:this},{provide:fc,useValue:this.componentFactoryResolver}],l||Nh(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Sr(s,o,l=null){return new JS(s,o,l).injector}let SI=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Ph(0,l.type),f=c.length>0?Sr([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Kt({token:s,providedIn:"environment",factory:()=>new s(ir(Oi))}),s})();function xI(s){s.getStandaloneInjector=o=>o.get(SI).getOrCreateStandaloneInjector(s)}function Kw(s,o,l,c,f,g){const v=o+l;return ei(s,v,f)?function ul(s,o,l){return s[o]=l}(s,v+1,g?c.call(g,f):c(f)):function Ta(s,o){const l=s[o];return l===Wt?void 0:l}(s,v+1)}function Fs(s,o){const l=Yt();let c;const f=s+22;l.firstCreatePass?(c=function jI(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[f]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,c.onDestroy)):c=l.data[f];const g=c.factory||(c.factory=qi(c.type)),v=hn(Ad);try{const E=G(!1),D=g();return G(E),function Yp(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,ke(),f,D),D}finally{hn(v)}}function Hd(s,o,l){const c=s+22,f=ke(),g=cs(f,c);return function Tg(s,o){return s[1].data[o].pure}(f,c)?Kw(f,function Fn(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,g.transform,l,g):g.transform(l)}function e0(s){return o=>{setTimeout(s,void 0,o)}}const lo=class HI extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let f=o,g=l||(()=>null),v=c;if(o&&"object"==typeof o){const D=o;f=D.next?.bind(D),g=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(g=e0(g),f&&(f=e0(f)),v&&(v=e0(v)));const E=super.subscribe({next:f,error:g,complete:v});return o instanceof B.w0&&o.add(E),E}};function sx(){return this._results[Pd()]()}class L_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Pd(),c=L_.prototype;c[l]||(c[l]=sx)}get changes(){return this._changes||(this._changes=new lo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const f=Ri(o);(this._changesDetected=!function Xu(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],g=o[c];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xr=(()=>{class s{}return s.__NG_ELEMENT_ID__=t0,s})();const wf=xr,Rc=class extends wf{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tViews,f=xd(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(c)),Ym(c,f,o),new Md(f)}};function t0(){return V_(On(),ke())}function V_(s,o){return 4&s.type?new Rc(o,s,y(s,o)):null}let je=(()=>{class s{}return s.__NG_ELEMENT_ID__=$r,s})();function $r(){return $I(On(),ke())}const $d=je,U_=class extends $d{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new ua(this._hostTNode,this._hostLView)}get parentInjector(){const o=Zu(this._hostTNode,this._hostLView);if(Wu(o)){const l=I(o,this._hostLView),c=er(o);return new ua(l[1].data[c+8],l)}return new ua(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=ft(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const v=o.createEmbeddedView(l||{},g);return this.insert(v,f),v}createComponent(o,l,c,f,g){const v=o&&!function Ar(s){return"function"==typeof s}(o);let E;if(v)E=l;else{const j=l||{};E=j.index,c=j.injector,f=j.projectableNodes,g=j.environmentInjector||j.ngModuleRef}const D=v?o:new Rd(Ge(o)),M=c||this.parentInjector;if(!g&&null==D.ngModule){const Q=(v?M:this.parentInjector).get(Oi,null);Q&&(g=Q)}const O=D.create(M,f,void 0,g);return this.insert(O.hostView,E),O}insert(o,l){const c=o._lView,f=c[1];if(function Ba(s){return Qr(s[3])}(c)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const j=c[3],Q=new U_(j,j[6],j[3]);Q.detach(Q.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function yE(s,o,l,c){const f=10+c,g=l.length;c>0&&(l[f-1][4]=o),c<g-10?(o[4]=l[f],sd(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function _v(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(f,c,v,g);const E=Pp(g,v),D=c[11],M=Id(D,v[7]);return null!==M&&function dA(s,o,l,c,f,g){c[0]=f,c[6]=o,kp(s,c,l,1,f,g)}(f,v[6],D,c,M,E),o.attachToViewContainerRef(),sd(Nt(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=ft(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Hh(this._lContainer,l);c&&(rl(Nt(this._lContainer),l),$h(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Hh(this._lContainer,l);return c&&null!=rl(Nt(this._lContainer),l)?new Md(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function ft(s){return s[8]}function Nt(s){return s[8]||(s[8]=[])}function $I(s,o){let l;const c=o[s.index];if(Qr(c))l=c;else{let f;if(8&s.type)f=Dn(c);else{const g=o[11];f=g.createComment("");const v=Lr(s,o);_c(g,Id(g,v),f,function gA(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=l=e_(c,o,f,s),n_(o,l)}return new U_(l,s,o)}class Gr{constructor(o){this.queryList=o,this.matches=null}clone(){return new Gr(this.queryList)}setDirty(){this.queryList.setDirty()}}class B_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,f=[];for(let g=0;g<c;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new B_(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==WI(o,l).matches&&this.queries[l].setDirty()}}class GI{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class n0{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(o,f);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new n0(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class r0{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new r0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(o,l,ox(l,g)),this.matchTNodeWithReadOption(o,l,Qa(l,o,g,!1,!1))}else c===xr?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Qa(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===p||f===je||f===xr&&4&l.type)this.addMatch(l.index,-2);else{const g=Qa(l,o,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function ox(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function qI(s,o,l,c){return-1===l?function ax(s,o){return 11&s.type?y(s,o):4&s.type?V_(s,o):null}(o,s):-2===l?function lx(s,o,l){return l===p?y(o,s):l===xr?V_(o,s):l===je?$I(o,s):void 0}(s,o,c):Ks(s,s[1],l,o)}function ux(s,o,l,c){const f=o[19].queries[c];if(null===f.matches){const g=s.data,v=l.matches,E=[];for(let D=0;D<v.length;D+=2){const M=v[D];E.push(M<0?null:qI(o,g[M],v[D+1],l.metadata.read))}f.matches=E}return f.matches}function s0(s,o,l,c){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const v=ux(s,o,f,l);for(let E=0;E<g.length;E+=2){const D=g[E];if(D>0)c.push(v[E/2]);else{const M=g[E+1],O=o[-D];for(let j=10;j<O.length;j++){const Q=O[j];Q[17]===Q[3]&&s0(Q[1],Q,M,c)}if(null!==O[9]){const j=O[9];for(let Q=0;Q<j.length;Q++){const ie=j[Q];s0(ie[1],ie,M,c)}}}}}return c}function o0(s){const o=ke(),l=Yt(),c=Fl();ra(c+1);const f=WI(l,c);if(s.dirty&&function Ua(s){return 4==(4&s[2])}(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?s0(l,o,c,[]):ux(l,o,f,c);s.reset(g,m),s.notifyOnChanges()}return!0}return!1}function Gd(s,o,l,c){const f=Yt();if(f.firstCreatePass){const g=On();(function bf(s,o,l){null===s.queries&&(s.queries=new n0),s.queries.track(new r0(o,l))})(f,new GI(o,l,c),g.index),function En(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}!function Ot(s,o,l){const c=new L_(4==(4&l));rC(s,o,c,c.destroy),null===o[19]&&(o[19]=new B_),o[19].queries.push(new Gr(c))}(f,ke(),l)}function a0(){return function pr(s,o){return s[19].queries[o].queryList}(ke(),Fl())}function WI(s,o){return s.queries.getByIndex(o)}function Tu(...s){}const Fc=new Vn("Application Initializer");let Sf=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Tu,this.reject=Tu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(PC(g))l.push(g);else if(gS(g)){const v=new Promise((E,D)=>{g.subscribe({complete:E,error:D})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ir(Fc,8))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const xf=new Vn("AppId",{providedIn:"root",factory:function _0(){return`${Mf()}${Mf()}${Mf()}`}});function Mf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rf=new Vn("Platform Initializer"),eD=new Vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tD=new Vn("appBootstrapListener");let nD=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Sg=new Vn("LocaleId",{providedIn:"root",factory:()=>T(Sg,Ke.Optional|Ke.SkipSelf)||function ji(){return typeof $localize<"u"&&$localize.locale||df}()}),tr=new Vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wx{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let xg=(()=>{class s{compileModuleSync(l){return new jd(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=ro(wn(l).declarations).reduce((v,E)=>{const D=Ge(E);return D&&v.push(new Rd(D)),v},[]);return new wx(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bx=(()=>Promise.resolve(0))();function z_(s){typeof Zone>"u"?bx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ho{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lo(!1),this.onMicrotaskEmpty=new lo(!1),this.onStable=new lo(!1),this.onError=new lo(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Ex(){let s=vn.requestAnimationFrame,o=vn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function kf(s){const o=()=>{!function Lc(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(vn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,b0(s),s.isCheckStableRunning=!0,w0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),b0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,g,v,E)=>{try{return E0(s),l.invokeTask(f,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),C0(s)}},onInvoke:(l,c,f,g,v,E,D)=>{try{return E0(s),l.invoke(f,g,v,E,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),C0(s)}},onHasTask:(l,c,f,g)=>{l.hasTask(f,g),c===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,b0(s),w0(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ho.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Ho.isInAngularZone())throw new xe(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,o,Cx,Tu,Tu);try{return g.runTask(v,l,c)}finally{g.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const Cx={};function w0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function b0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function E0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function C0(s){s._nesting--,w0(s)}class Au{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lo,this.onMicrotaskEmpty=new lo,this.onStable=new lo,this.onError=new lo}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,f){return o.apply(l,c)}}const I0=new Vn(""),Jd=new Vn("");let Mg,iD=(()=>{class s{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mg||(function D0(s){Mg=s}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ho.assertNotInAngularZone(),z_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())z_(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(ir(Ho),ir(Z_),ir(Jd))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac}),s})(),Z_=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Mg?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),uo=null;const Xi=new Vn("AllowMultipleToken"),Nf=new Vn("PlatformDestroyListeners");class aD{constructor(o,l){this.name=o,this.token=l}}function S0(s,o,l=[]){const c=`Platform: ${o}`,f=new Vn(c);return(g=[])=>{let v=Y_();if(!v||v.injector.get(Xi,!1)){const E=[...l,...g,{provide:f,useValue:!0}];s?s(E):function lD(s){if(uo&&!uo.get(Xi,!1))throw new xe(400,!1);uo=s;const o=s.get(Xd);(function A0(s){const o=s.get(Rf,null);o&&o.forEach(l=>l())})(s)}(function uD(s=[],o){return mu.create({name:o,providers:[{provide:lu,useValue:"platform"},{provide:Nf,useValue:new Set([()=>uo=null])},...s]})}(E,c))}return function K_(s){const o=Y_();if(!o)throw new xe(401,!1);return o}()}}function Y_(){return uo?.get(Xd)??null}let Xd=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function x0(s,o){let l;return l="noop"===s?new Au:("zone.js"===s?void 0:s)||new Ho(o),l}(c?.ngZone,function Vc(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ho,useValue:f}];return f.run(()=>{const v=mu.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(v),D=E.injector.get(Ip,null);if(!D)throw new xe(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:O=>{D.handleError(O)}});E.onDestroy(()=>{Rg(this._modules,E),M.unsubscribe()})}),function Uc(s,o,l){try{const c=l();return PC(c)?c.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(D,f,()=>{const M=E.injector.get(Sf);return M.runInitializers(),M.donePromise.then(()=>(function cg(s){zt(s,"Expected localeId to be defined"),"string"==typeof s&&(oI=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Sg,df)||df),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,c=[]){const f=M0({},c);return function sD(s,o,l){const c=new jd(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const c=l.injector.get(Su);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new xe(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(Nf,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ir(mu))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function M0(s,o){return Array.isArray(o)?o.reduce(M0,s):{...s,...o}}let Su=(()=>{class s{constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new U.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new U.y(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ho.assertNotInAngularZone(),z_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ce.T)(g,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const f=l instanceof Lh;if(!this._injector.get(Sf).done)throw!f&&Hn(l),new xe(405,false);let v;v=f?l:this._injector.get(fc).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const E=function T0(s){return s.isBoundToModule}(v)?void 0:this._injector.get(hl),M=v.create(mu.NULL,[],c||v.selector,E),O=M.location.nativeElement,j=M.injector.get(I0,null);return j?.registerApplication(O),M.onDestroy(()=>{this.detachView(M.hostView),Rg(this.components,M),j?.unregisterApplication(O)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Rg(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(tD,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Rg(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new xe(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(ir(Ho),ir(Oi),ir(Ip))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Rg(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let cD=!0,dD=!1;function gr(){return dD=!0,cD}function Q_(){if(dD)throw new Error("Cannot enable prod mode after platform setup.");cD=!1}let kg=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ax,s})();function Ax(s){return function fD(s,o,l){if(Gi(s)&&!l){const c=rn(s.index,o);return new Md(c,c)}return 47&s.type?new Md(o[16],o):null}(On(),ke(),16==(16&s))}class pD{constructor(){}supports(o){return zp(o)}create(o){return new kx(o)}}const Qt=(s,o)=>o;class kx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Qt}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,f=0,g=null;for(;l||c;){const v=!c||l&&l.currentIndex<Lg(c,f,g)?l:c,E=Lg(v,f,g),D=v.currentIndex;if(v===c)f--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const M=E-f,O=D-f;if(M!=O){for(let Q=0;Q<M;Q++){const ie=Q<g.length?g[Q]:g[Q]=0,Ce=ie+Q;O<=Ce&&Ce<M&&(g[Q]=ie+1)}g[v.previousIndex]=O-M}}E!==D&&o(v,E,D)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!zp(o))throw new xe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,g,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),c=!0),l=l._next}else f=0,function cS(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Pd()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,E,v,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,f){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,f)):o=this._addAfter(new ey(l,c),g,f),o}_verifyReinsertion(o,l,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,g=o._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const f=null===l?this._itHead:l._next;return o._next=f,o._prev=l,null===f?this._itTail=o:f._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Lf),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lf),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ey{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Fg{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Lf{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new Fg,this.map.set(l,c)),c.add(o)}get(o,l){const f=this.map.get(o);return f?f.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lg(s,o,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+o+f}class O0{constructor(){}supports(o){return o instanceof Map||CC(o)}create(){return new gD}}class gD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||CC(o)))throw new xe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const c=new mD(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class mD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _D(){return new ty([new pD])}let ty=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||_D()),deps:[[s,new Mt,new Je]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new xe(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:_D}),s})();function yD(){return new F0([new O0])}let F0=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||yD()),deps:[[s,new Mt,new Je]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new xe(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:yD}),s})();const Ii=S0(null,"core",[]);let L0=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ir(Su))},s.\u0275mod=W({type:s}),s.\u0275inj=xt({}),s})();function vD(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ht,oe,V)=>{"use strict";V.d(oe,{Z:()=>xe});var d=V(2090),B=V(4859),U=V(9681),ce=V(1877);class de{constructor(ge,ve){this._delegate=ge,this.firebase=ve,(0,U._addComponent)(ge,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ge,ve=U._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(ge);return!qe.isInitialized()&&"EXPLICIT"===(null===(et=qe.getComponent())||void 0===et?void 0:et.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:ve})}_removeServiceInstance(ge,ve=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(ve)}_addComponent(ge){(0,U._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,U._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Ee(){const ut=function me(ut){const ge={},ve={__esModule:!0,initializeApp:function Re(Qe,Z={}){const _e=U.initializeApp(Qe,Z);if((0,d.r3)(ge,_e.name))return ge[_e.name];const J=new ut(_e,ve);return ge[_e.name]=J,J},app:qe,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Me(Qe){const Z=Qe.name,_e=Z.replace("-compat","");if(U._registerComponent(Qe)&&"PUBLIC"===Qe.type){const J=(re=qe())=>{if("function"!=typeof re[_e])throw ue.create("invalid-app-argument",{appName:Z});return re[_e]()};void 0!==Qe.serviceProps&&(0,d.ZB)(J,Qe.serviceProps),ve[_e]=J,ut.prototype[_e]=function(...re){return this._getService.bind(this,Z).apply(this,Qe.multipleInstances?re:[])}}return"PUBLIC"===Qe.type?ve[_e]:null},removeApp:function et(Qe){delete ge[Qe]},useAsService:function Ye(Qe,Z){return"serverAuth"===Z?null:Z},modularAPIs:U}};function qe(Qe){if(!(0,d.r3)(ge,Qe=Qe||U._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Qe});return ge[Qe]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Se(){return Object.keys(ge).map(Qe=>ge[Qe])}}),qe.App=ut,ve}(de);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function ge(ve){(0,d.ZB)(ut,ve)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ut}(),Y=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=K;!function Ne(ut){(0,U.registerVersion)("@firebase/app-compat","0.1.35",ut)}()},9681:(ht,oe,V)=>{"use strict";V.r(oe),V.d(oe,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Ut,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>sn,_addOrOverwriteComponent:()=>Kt,_apps:()=>nn,_clearComponents:()=>Ir,_components:()=>Tn,_getProvider:()=>xt,_registerComponent:()=>pn,_removeServiceInstance:()=>on,deleteApp:()=>kn,getApp:()=>Qn,getApps:()=>vr,initializeApp:()=>Yn,onLog:()=>fi,registerVersion:()=>zr,setLogLevel:()=>hn});var d=V(5861),B=V(4859),U=V(1877),ce=V(2090),de=V(8766);class ye{constructor(Pe){this.container=Pe}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function ue(st){return"VERSION"===st.getComponent()?.type}(lt)){const Et=lt.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(lt=>lt).join(" ")}}const me="@firebase/app",K=new U.Yd("@firebase/app"),zt="[DEFAULT]",nt={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,Tn=new Map;function sn(st,Pe){try{st.container.addComponent(Pe)}catch(lt){K.debug(`Component ${Pe.name} failed to register with FirebaseApp ${st.name}`,lt)}}function Kt(st,Pe){st.container.addOrOverwriteComponent(Pe)}function pn(st){const Pe=st.name;if(Tn.has(Pe))return K.debug(`There were multiple attempts to register component ${Pe}.`),!1;Tn.set(Pe,st);for(const lt of nn.values())sn(lt,st);return!0}function xt(st,Pe){const lt=st.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),st.container.getProvider(Pe)}function on(st,Pe,lt=zt){xt(st,Pe).clearInstance(lt)}function Ir(){Tn.clear()}const Dr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nr{constructor(Pe,lt,Et){this._isDeleted=!1,this._options=Object.assign({},Pe),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Pe){this._isDeleted=Pe}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const Ut="9.11.0";function Yn(st,Pe={}){let lt=st;"object"!=typeof Pe&&(Pe={name:Pe});const Et=Object.assign({name:zt,automaticDataCollectionEnabled:!1},Pe),At=Et.name;if("string"!=typeof At||!At)throw Dr.create("bad-app-name",{appName:String(At)});if(lt||(lt=(0,ce.aH)()),!lt)throw Dr.create("no-options");const W=nn.get(At);if(W){if((0,ce.vZ)(lt,W.options)&&(0,ce.vZ)(Et,W.config))return W;throw Dr.create("duplicate-app",{appName:At})}const z=new B.H0(At);for(const Ae of Tn.values())z.addComponent(Ae);const ee=new Nr(lt,Et,z);return nn.set(At,ee),ee}function Qn(st=zt){const Pe=nn.get(st);if(!Pe&&st===zt)return Yn();if(!Pe)throw Dr.create("no-app",{appName:st});return Pe}function vr(){return Array.from(nn.values())}function kn(st){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(st){const Pe=st.name;nn.has(Pe)&&(nn.delete(Pe),yield Promise.all(st.container.getProviders().map(lt=>lt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function zr(st,Pe,lt){var Et;let At=null!==(Et=nt[st])&&void 0!==Et?Et:st;lt&&(At+=`-${lt}`);const W=At.match(/\s|\//),z=Pe.match(/\s|\//);if(W||z){const ee=[`Unable to register library "${At}" with version "${Pe}":`];return W&&ee.push(`library name "${At}" contains illegal characters (whitespace or "/")`),W&&z&&ee.push("and"),z&&ee.push(`version name "${Pe}" contains illegal characters (whitespace or "/")`),void K.warn(ee.join(" "))}pn(new B.wA(`${At}-version`,()=>({library:At,version:Pe}),"VERSION"))}function fi(st,Pe){if(null!==st&&"function"!=typeof st)throw Dr.create("invalid-log-argument");(0,U.Am)(st,Pe)}function hn(st){(0,U.Ub)(st)}const jn="firebase-heartbeat-store";let Wn=null;function Rn(){return Wn||(Wn=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(st,Pe)=>{0===Pe&&st.createObjectStore(jn)}}).catch(st=>{throw Dr.create("idb-open",{originalErrorMessage:st.message})})),Wn}function Ue(){return(Ue=(0,d.Z)(function*(st){var Pe;try{return(yield Rn()).transaction(jn).objectStore(jn).get(wr(st))}catch(lt){if(lt instanceof ce.ZR)K.warn(lt.message);else{const Et=Dr.create("idb-get",{originalErrorMessage:null===(Pe=lt)||void 0===Pe?void 0:Pe.message});K.warn(Et.message)}}})).apply(this,arguments)}function vn(st,Pe){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(st,Pe){var lt;try{const At=(yield Rn()).transaction(jn,"readwrite");return yield At.objectStore(jn).put(Pe,wr(st)),At.done}catch(Et){if(Et instanceof ce.ZR)K.warn(Et.message);else{const At=Dr.create("idb-set",{originalErrorMessage:null===(lt=Et)||void 0===lt?void 0:lt.message});K.warn(At.message)}}})).apply(this,arguments)}function wr(st){return`${st.name}!${st.options.appId}`}class Or{constructor(Pe){this.container=Pe,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new ln(lt),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Pe=this;return(0,d.Z)(function*(){const Et=Pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=an();if(null===Pe._heartbeatsCache&&(Pe._heartbeatsCache=yield Pe._heartbeatsCachePromise),Pe._heartbeatsCache.lastSentHeartbeatDate!==At&&!Pe._heartbeatsCache.heartbeats.some(W=>W.date===At))return Pe._heartbeatsCache.heartbeats.push({date:At,agent:Et}),Pe._heartbeatsCache.heartbeats=Pe._heartbeatsCache.heartbeats.filter(W=>{const z=new Date(W.date).valueOf();return Date.now()-z<=2592e6}),Pe._storage.overwrite(Pe._heartbeatsCache)})()}getHeartbeatsHeader(){var Pe=this;return(0,d.Z)(function*(){if(null===Pe._heartbeatsCache&&(yield Pe._heartbeatsCachePromise),null===Pe._heartbeatsCache||0===Pe._heartbeatsCache.heartbeats.length)return"";const lt=an(),{heartbeatsToSend:Et,unsentEntries:At}=function Hi(st,Pe=1024){const lt=[];let Et=st.slice();for(const At of st){const W=lt.find(z=>z.agent===At.agent);if(W){if(W.dates.push(At.date),ar(lt)>Pe){W.dates.pop();break}}else if(lt.push({agent:At.agent,dates:[At.date]}),ar(lt)>Pe){lt.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Et}}(Pe._heartbeatsCache.heartbeats),W=(0,ce.L)(JSON.stringify({version:2,heartbeats:Et}));return Pe._heartbeatsCache.lastSentHeartbeatDate=lt,At.length>0?(Pe._heartbeatsCache.heartbeats=At,yield Pe._storage.overwrite(Pe._heartbeatsCache)):(Pe._heartbeatsCache.heartbeats=[],Pe._storage.overwrite(Pe._heartbeatsCache)),W})()}}function an(){return(new Date).toISOString().substring(0,10)}class ln{constructor(Pe){this.app=Pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Pe=this;return(0,d.Z)(function*(){return(yield Pe._canUseIndexedDBPromise)&&(yield function wt(st){return Ue.apply(this,arguments)}(Pe.app))||{heartbeats:[]}})()}overwrite(Pe){var lt=this;return(0,d.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const W=yield lt.read();return vn(lt.app,{lastSentHeartbeatDate:null!==(Et=Pe.lastSentHeartbeatDate)&&void 0!==Et?Et:W.lastSentHeartbeatDate,heartbeats:Pe.heartbeats})}})()}add(Pe){var lt=this;return(0,d.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const W=yield lt.read();return vn(lt.app,{lastSentHeartbeatDate:null!==(Et=Pe.lastSentHeartbeatDate)&&void 0!==Et?Et:W.lastSentHeartbeatDate,heartbeats:[...W.heartbeats,...Pe.heartbeats]})}})()}}function ar(st){return(0,ce.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Kr(st){pn(new B.wA("platform-logger",Pe=>new ye(Pe),"PRIVATE")),pn(new B.wA("heartbeat",Pe=>new Or(Pe),"PRIVATE")),zr(me,"0.8.0",st),zr(me,"0.8.0","esm2017"),zr("fire-js","")}("")},4859:(ht,oe,V)=>{"use strict";V.d(oe,{H0:()=>me,wA:()=>U,zt:()=>de});var d=V(5861),B=V(2090);class U{constructor(K,Y,te){this.name=K,this.instanceFactory=Y,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ce="[DEFAULT]";class de{constructor(K,Y){this.name=K,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Y=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Y)){const te=new B.BH;if(this.instancesDeferred.set(Y,te),this.isInitialized(Y)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:Y});$e&&te.resolve($e)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(K){var Y;const te=this.normalizeInstanceIdentifier(K?.identifier),$e=null!==(Y=K?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ne){if($e)return null;throw Ne}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function ue(Ee){return"EAGER"===Ee.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[Y,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(Y);try{const Ne=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(Ne)}catch{}}}}clearInstance(K=ce){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const Y=Array.from(K.instances.values());yield Promise.all([...Y.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...Y.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ce){return this.instances.has(K)}getOptions(K=ce){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Y={}}=K,te=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:Y});for(const[Ne,xe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ne)&&xe.resolve($e);return $e}onInit(K,Y){var te;const $e=this.normalizeInstanceIdentifier(Y),Ne=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;Ne.add(K),this.onInitCallbacks.set($e,Ne);const xe=this.instances.get($e);return xe&&K(xe,$e),()=>{Ne.delete(K)}}invokeOnInitCallbacks(K,Y){const te=this.onInitCallbacks.get(Y);if(te)for(const $e of te)try{$e(K,Y)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Y={}}){let te=this.instances.get(K);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=K,Ee===ce?void 0:Ee),options:Y}),this.instances.set(K,te),this.instancesOptions.set(K,Y),this.invokeOnInitCallbacks(te,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,te)}catch{}var Ee;return te||null}normalizeInstanceIdentifier(K=ce){return this.component?this.component.multipleInstances?K:ce:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Y=this.getProvider(K.name);if(Y.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Y.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Y=new de(K,this);return this.providers.set(K,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,oe,V)=>{"use strict";V.d(oe,{Am:()=>Ee,Ub:()=>me,Yd:()=>ue,in:()=>B});const d=[];var B=(()=>{return(K=B||(B={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",B;var K})();const U={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ce=B.INFO,de={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ye=(K,Y,...te)=>{if(Y<K.logLevel)return;const $e=(new Date).toISOString(),Ne=de[Y];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Ne](`[${$e}]  ${K.name}:`,...te)};class ue{constructor(Y){this.name=Y,this._logLevel=ce,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in B))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?U[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...Y),this._logHandler(this,B.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...Y),this._logHandler(this,B.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,B.INFO,...Y),this._logHandler(this,B.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,B.WARN,...Y),this._logHandler(this,B.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...Y),this._logHandler(this,B.ERROR,...Y)}}function me(K){d.forEach(Y=>{Y.setLogLevel(K)})}function Ee(K,Y){for(const te of d){let $e=null;Y&&Y.level&&($e=U[Y.level]),te.userLogHandler=null===K?null:(Ne,xe,...ut)=>{const ge=ut.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");xe>=($e??Ne.logLevel)&&K({level:B[xe].toLowerCase(),message:ge,args:ut,type:Ne.name})}}}},8766:(ht,oe,V)=>{"use strict";V.d(oe,{Lj:()=>Re,X3:()=>qe});var d=V(5861);let U,ce;const ue=new WeakMap,me=new WeakMap,Ee=new WeakMap,K=new WeakMap,Y=new WeakMap;let Ne={get(Z,_e,J){if(Z instanceof IDBTransaction){if("done"===_e)return me.get(Z);if("objectStoreNames"===_e)return Z.objectStoreNames||Ee.get(Z);if("store"===_e)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return ve(Z[_e])},set:(Z,_e,J)=>(Z[_e]=J,!0),has:(Z,_e)=>Z instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in Z};function ge(Z){return"function"==typeof Z?function ut(Z){return Z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Z)?function(..._e){return Z.apply(et(this),_e),ve(ue.get(this))}:function(..._e){return ve(Z.apply(et(this),_e))}:function(_e,...J){const re=Z.call(et(this),_e,...J);return Ee.set(re,_e.sort?_e.sort():[_e]),ve(re)}}(Z):(Z instanceof IDBTransaction&&function $e(Z){if(me.has(Z))return;const _e=new Promise((J,re)=>{const ae=()=>{Z.removeEventListener("complete",se),Z.removeEventListener("error",He),Z.removeEventListener("abort",He)},se=()=>{J(),ae()},He=()=>{re(Z.error||new DOMException("AbortError","AbortError")),ae()};Z.addEventListener("complete",se),Z.addEventListener("error",He),Z.addEventListener("abort",He)});me.set(Z,_e)}(Z),((Z,_e)=>_e.some(J=>Z instanceof J))(Z,function de(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Z,Ne):Z)}function ve(Z){if(Z instanceof IDBRequest)return function te(Z){const _e=new Promise((J,re)=>{const ae=()=>{Z.removeEventListener("success",se),Z.removeEventListener("error",He)},se=()=>{J(ve(Z.result)),ae()},He=()=>{re(Z.error),ae()};Z.addEventListener("success",se),Z.addEventListener("error",He)});return _e.then(J=>{J instanceof IDBCursor&&ue.set(J,Z)}).catch(()=>{}),Y.set(_e,Z),_e}(Z);if(K.has(Z))return K.get(Z);const _e=ge(Z);return _e!==Z&&(K.set(Z,_e),Y.set(_e,Z)),_e}const et=Z=>Y.get(Z);function qe(Z,_e,{blocked:J,upgrade:re,blocking:ae,terminated:se}={}){const He=indexedDB.open(Z,_e),Be=ve(He);return re&&He.addEventListener("upgradeneeded",yt=>{re(ve(He.result),yt.oldVersion,yt.newVersion,ve(He.transaction))}),J&&He.addEventListener("blocked",()=>J()),Be.then(yt=>{se&&yt.addEventListener("close",()=>se()),ae&&yt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),Be}function Re(Z,{blocked:_e}={}){const J=indexedDB.deleteDatabase(Z);return _e&&J.addEventListener("blocked",()=>_e()),ve(J).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Ye=new Map;function Qe(Z,_e){if(!(Z instanceof IDBDatabase)||_e in Z||"string"!=typeof _e)return;if(Ye.get(_e))return Ye.get(_e);const J=_e.replace(/FromIndex$/,""),re=_e!==J,ae=Me.includes(J);if(!(J in(re?IDBIndex:IDBObjectStore).prototype)||!ae&&!Se.includes(J))return;const se=function(){var He=(0,d.Z)(function*(Be,...yt){const Xt=this.transaction(Be,ae?"readwrite":"readonly");let zt=Xt.store;return re&&(zt=zt.index(yt.shift())),(yield Promise.all([zt[J](...yt),ae&&Xt.done]))[0]});return function(yt){return He.apply(this,arguments)}}();return Ye.set(_e,se),se}!function xe(Z){Ne=Z(Ne)}(Z=>({...Z,get:(_e,J,re)=>Qe(_e,J)||Z.get(_e,J,re),has:(_e,J)=>!!Qe(_e,J)||Z.has(_e,J)}))},5861:(ht,oe,V)=>{"use strict";function d(U,ce,de,ye,ue,me,Ee){try{var K=U[me](Ee),Y=K.value}catch(te){return void de(te)}K.done?ce(Y):Promise.resolve(Y).then(ye,ue)}function B(U){return function(){var ce=this,de=arguments;return new Promise(function(ye,ue){var me=U.apply(ce,de);function Ee(Y){d(me,ye,ue,Ee,K,"next",Y)}function K(Y){d(me,ye,ue,Ee,K,"throw",Y)}Ee(void 0)})}}V.d(oe,{Z:()=>B})}},ht=>{ht(ht.s=910)}]);